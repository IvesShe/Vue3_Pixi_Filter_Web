(self["webpackChunk_01_pixiapp"]=self["webpackChunk_01_pixiapp"]||[]).push([[504],{28:function(t,e,r){"use strict";var n=r(5072),i=r(3071),s=r(1012),o=r(9340),a=n("%Map%",!0),l=i("Map.prototype.get",!0),h=i("Map.prototype.set",!0),u=i("Map.prototype.has",!0),c=i("Map.prototype.delete",!0),d=i("Map.prototype.size",!0);t.exports=!!a&&function(){var t,e={assert:function(t){if(!e.has(t))throw new o("Side channel does not contain "+s(t))},delete:function(e){if(t){var r=c(t,e);return 0===d(t)&&(t=void 0),r}return!1},get:function(e){if(t)return l(t,e)},has:function(e){return!!t&&u(t,e)},set:function(e,r){t||(t=new a),h(t,e,r)}};return e}},34:function(t,e,r){"use strict";var n=r(4901);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},81:function(t,e,r){"use strict";var n=r(9565),i=r(9306),s=r(8551),o=r(6823),a=r(851),l=TypeError;t.exports=function(t,e){var r=arguments.length<2?a(t):e;if(i(r))return s(n(r,t));throw new l(o(t)+" is not iterable")}},116:function(t,e,r){"use strict";var n=r(6518),i=r(9565),s=r(2652),o=r(9306),a=r(8551),l=r(1767),h=r(9539),u=r(4549),c=u("find",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:c},{find:function(t){a(this);try{o(t)}catch(n){h(this,"throw",n)}if(c)return i(c,this,t);var e=l(this),r=0;return s(e,function(e,n){if(t(e,r++))return n(e)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},144:function(t,e,r){"use strict";r.d(e,{C4:function(){return w},EW:function(){return Dt},Gc:function(){return yt},IG:function(){return At},Kh:function(){return gt},Pr:function(){return Mt},R1:function(){return It},X2:function(){return h},bl:function(){return A},hZ:function(){return N},i9:function(){return Rt},ju:function(){return Tt},u4:function(){return B},ux:function(){return wt},wB:function(){return kt},yC:function(){return o}});r(4114),r(8111),r(2489),r(7588),r(1701),r(3579),r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698);var n=r(4232);let i,s;class o{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=i,!t&&i&&(this.index=(i.scopes||(i.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let t,e;if(this._isPaused=!0,this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){let t,e;if(this._isPaused=!1,this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=i;try{return i=this,t()}finally{i=e}}else 0}on(){1===++this._on&&(this.prevScope=i,i=this)}off(){this._on>0&&0===--this._on&&(i=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){let e,r;for(this._active=!1,e=0,r=this.effects.length;e<r;e++)this.effects[e].stop();for(this.effects.length=0,e=0,r=this.cleanups.length;e<r;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0}}}function a(){return i}const l=new WeakSet;class h{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,i&&i.active&&i.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,l.has(this)&&(l.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||f(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,S(this),g(this);const t=s,e=E;s=this,E=!0;try{return this.fn()}finally{0,y(this),s=t,E=e,this.flags&=-3}}stop(){if(1&this.flags){for(let t=this.deps;t;t=t.nextDep)x(t);this.deps=this.depsTail=void 0,S(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?l.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){v(this)&&this.run()}get dirty(){return v(this)}}let u,c,d=0;function f(t,e=!1){if(t.flags|=8,e)return t.next=c,void(c=t);t.next=u,u=t}function p(){d++}function m(){if(--d>0)return;if(c){let t=c;c=void 0;while(t){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let t;while(u){let r=u;u=void 0;while(r){const n=r.next;if(r.next=void 0,r.flags&=-9,1&r.flags)try{r.trigger()}catch(e){t||(t=e)}r=n}}if(t)throw t}function g(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function y(t){let e,r=t.depsTail,n=r;while(n){const t=n.prevDep;-1===n.version?(n===r&&(r=t),x(n),b(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=t}t.deps=e,t.depsTail=r}function v(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function _(t){if(4&t.flags&&!(16&t.flags))return;if(t.flags&=-17,t.globalVersion===C)return;if(t.globalVersion=C,!t.isSSR&&128&t.flags&&(!t.deps&&!t._dirty||!v(t)))return;t.flags|=2;const e=t.dep,r=s,i=E;s=t,E=!0;try{g(t);const r=t.fn(t._value);(0===e.version||(0,n.$H)(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(o){throw e.version++,o}finally{s=r,E=i,y(t),t.flags&=-3}}function x(t,e=!1){const{dep:r,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let t=r.computed.deps;t;t=t.nextDep)x(t,!0)}e||--r.sc||!r.map||r.map.delete(r.key)}function b(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let E=!0;const T=[];function w(){T.push(E),E=!1}function A(){const t=T.pop();E=void 0===t||t}function S(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const t=s;s=void 0;try{e()}finally{s=t}}}let C=0;class R{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class I{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!s||!E||s===this.computed)return;let e=this.activeLink;if(void 0===e||e.sub!==s)e=this.activeLink=new R(s,this),s.deps?(e.prevDep=s.depsTail,s.depsTail.nextDep=e,s.depsTail=e):s.deps=s.depsTail=e,P(e);else if(-1===e.version&&(e.version=this.version,e.nextDep)){const t=e.nextDep;t.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=t),e.prevDep=s.depsTail,e.nextDep=void 0,s.depsTail.nextDep=e,s.depsTail=e,s.deps===e&&(s.deps=t)}return e}trigger(t){this.version++,C++,this.notify(t)}notify(t){p();try{0;for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{m()}}}function P(t){if(t.dep.sc++,4&t.sub.flags){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let t=e.deps;t;t=t.nextDep)P(t)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const M=new WeakMap,O=Symbol(""),D=Symbol(""),F=Symbol("");function B(t,e,r){if(E&&s){let e=M.get(t);e||M.set(t,e=new Map);let n=e.get(r);n||(e.set(r,n=new I),n.map=e,n.key=r),n.track()}}function N(t,e,r,i,s,o){const a=M.get(t);if(!a)return void C++;const l=t=>{t&&t.trigger()};if(p(),"clear"===e)a.forEach(l);else{const s=(0,n.cy)(t),o=s&&(0,n.yI)(r);if(s&&"length"===r){const t=Number(i);a.forEach((e,r)=>{("length"===r||r===F||!(0,n.Bm)(r)&&r>=t)&&l(e)})}else switch((void 0!==r||a.has(void 0))&&l(a.get(r)),o&&l(a.get(F)),e){case"add":s?o&&l(a.get("length")):(l(a.get(O)),(0,n.CE)(t)&&l(a.get(D)));break;case"delete":s||(l(a.get(O)),(0,n.CE)(t)&&l(a.get(D)));break;case"set":(0,n.CE)(t)&&l(a.get(O));break}}m()}function L(t){const e=wt(t);return e===t?e:(B(e,"iterate",F),Et(t)?e:e.map(St))}function k(t){return B(t=wt(t),"iterate",F),t}const U={__proto__:null,[Symbol.iterator](){return G(this,Symbol.iterator,St)},concat(...t){return L(this).concat(...t.map(t=>(0,n.cy)(t)?L(t):t))},entries(){return G(this,"entries",t=>(t[1]=St(t[1]),t))},every(t,e){return z(this,"every",t,e,void 0,arguments)},filter(t,e){return z(this,"filter",t,e,t=>t.map(St),arguments)},find(t,e){return z(this,"find",t,e,St,arguments)},findIndex(t,e){return z(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return z(this,"findLast",t,e,St,arguments)},findLastIndex(t,e){return z(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return z(this,"forEach",t,e,void 0,arguments)},includes(...t){return W(this,"includes",t)},indexOf(...t){return W(this,"indexOf",t)},join(t){return L(this).join(t)},lastIndexOf(...t){return W(this,"lastIndexOf",t)},map(t,e){return z(this,"map",t,e,void 0,arguments)},pop(){return X(this,"pop")},push(...t){return X(this,"push",t)},reduce(t,...e){return H(this,"reduce",t,e)},reduceRight(t,...e){return H(this,"reduceRight",t,e)},shift(){return X(this,"shift")},some(t,e){return z(this,"some",t,e,void 0,arguments)},splice(...t){return X(this,"splice",t)},toReversed(){return L(this).toReversed()},toSorted(t){return L(this).toSorted(t)},toSpliced(...t){return L(this).toSpliced(...t)},unshift(...t){return X(this,"unshift",t)},values(){return G(this,"values",St)}};function G(t,e,r){const n=k(t),i=n[e]();return n===t||Et(t)||(i._next=i.next,i.next=()=>{const t=i._next();return t.value&&(t.value=r(t.value)),t}),i}const j=Array.prototype;function z(t,e,r,n,i,s){const o=k(t),a=o!==t&&!Et(t),l=o[e];if(l!==j[e]){const e=l.apply(t,s);return a?St(e):e}let h=r;o!==t&&(a?h=function(e,n){return r.call(this,St(e),n,t)}:r.length>2&&(h=function(e,n){return r.call(this,e,n,t)}));const u=l.call(o,h,n);return a&&i?i(u):u}function H(t,e,r,n){const i=k(t);let s=r;return i!==t&&(Et(t)?r.length>3&&(s=function(e,n,i){return r.call(this,e,n,i,t)}):s=function(e,n,i){return r.call(this,e,St(n),i,t)}),i[e](s,...n)}function W(t,e,r){const n=wt(t);B(n,"iterate",F);const i=n[e](...r);return-1!==i&&!1!==i||!Tt(r[0])?i:(r[0]=wt(r[0]),n[e](...r))}function X(t,e,r=[]){w(),p();const n=wt(t)[e].apply(t,r);return m(),A(),n}const V=(0,n.pD)("__proto__,__v_isRef,__isVue"),$=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>"arguments"!==t&&"caller"!==t).map(t=>Symbol[t]).filter(n.Bm));function Y(t){(0,n.Bm)(t)||(t=String(t));const e=wt(this);return B(e,"has",t),e.hasOwnProperty(t)}class q{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,r){if("__v_skip"===e)return t["__v_skip"];const i=this._isReadonly,s=this._isShallow;if("__v_isReactive"===e)return!i;if("__v_isReadonly"===e)return i;if("__v_isShallow"===e)return s;if("__v_raw"===e)return r===(i?s?ft:dt:s?ct:ut).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=(0,n.cy)(t);if(!i){let t;if(o&&(t=U[e]))return t;if("hasOwnProperty"===e)return Y}const a=Reflect.get(t,e,Rt(t)?t:r);return((0,n.Bm)(e)?$.has(e):V(e))?a:(i||B(t,"get",e),s?a:Rt(a)?o&&(0,n.yI)(e)?a:a.value:(0,n.Gv)(a)?i?vt(a):gt(a):a)}}class K extends q{constructor(t=!1){super(!1,t)}set(t,e,r,i){let s=t[e];if(!this._isShallow){const e=bt(s);if(Et(r)||bt(r)||(s=wt(s),r=wt(r)),!(0,n.cy)(t)&&Rt(s)&&!Rt(r))return!e&&(s.value=r,!0)}const o=(0,n.cy)(t)&&(0,n.yI)(e)?Number(e)<t.length:(0,n.$3)(t,e),a=Reflect.set(t,e,r,Rt(t)?t:i);return t===wt(i)&&(o?(0,n.$H)(r,s)&&N(t,"set",e,r,s):N(t,"add",e,r)),a}deleteProperty(t,e){const r=(0,n.$3)(t,e),i=t[e],s=Reflect.deleteProperty(t,e);return s&&r&&N(t,"delete",e,void 0,i),s}has(t,e){const r=Reflect.has(t,e);return(0,n.Bm)(e)&&$.has(e)||B(t,"has",e),r}ownKeys(t){return B(t,"iterate",(0,n.cy)(t)?"length":O),Reflect.ownKeys(t)}}class Z extends q{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const J=new K,Q=new Z,tt=new K(!0),et=t=>t,rt=t=>Reflect.getPrototypeOf(t);function nt(t,e,r){return function(...i){const s=this["__v_raw"],o=wt(s),a=(0,n.CE)(o),l="entries"===t||t===Symbol.iterator&&a,h="keys"===t&&a,u=s[t](...i),c=r?et:e?Ct:St;return!e&&B(o,"iterate",h?D:O),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:l?[c(t[0]),c(t[1])]:c(t),done:e}},[Symbol.iterator](){return this}}}}function it(t){return function(...e){return"delete"!==t&&("clear"===t?void 0:this)}}function st(t,e){const r={get(r){const i=this["__v_raw"],s=wt(i),o=wt(r);t||((0,n.$H)(r,o)&&B(s,"get",r),B(s,"get",o));const{has:a}=rt(s),l=e?et:t?Ct:St;return a.call(s,r)?l(i.get(r)):a.call(s,o)?l(i.get(o)):void(i!==s&&i.get(r))},get size(){const e=this["__v_raw"];return!t&&B(wt(e),"iterate",O),Reflect.get(e,"size",e)},has(e){const r=this["__v_raw"],i=wt(r),s=wt(e);return t||((0,n.$H)(e,s)&&B(i,"has",e),B(i,"has",s)),e===s?r.has(e):r.has(e)||r.has(s)},forEach(r,n){const i=this,s=i["__v_raw"],o=wt(s),a=e?et:t?Ct:St;return!t&&B(o,"iterate",O),s.forEach((t,e)=>r.call(n,a(t),a(e),i))}};(0,n.X$)(r,t?{add:it("add"),set:it("set"),delete:it("delete"),clear:it("clear")}:{add(t){e||Et(t)||bt(t)||(t=wt(t));const r=wt(this),n=rt(r),i=n.has.call(r,t);return i||(r.add(t),N(r,"add",t,t)),this},set(t,r){e||Et(r)||bt(r)||(r=wt(r));const i=wt(this),{has:s,get:o}=rt(i);let a=s.call(i,t);a||(t=wt(t),a=s.call(i,t));const l=o.call(i,t);return i.set(t,r),a?(0,n.$H)(r,l)&&N(i,"set",t,r,l):N(i,"add",t,r),this},delete(t){const e=wt(this),{has:r,get:n}=rt(e);let i=r.call(e,t);i||(t=wt(t),i=r.call(e,t));const s=n?n.call(e,t):void 0,o=e.delete(t);return i&&N(e,"delete",t,void 0,s),o},clear(){const t=wt(this),e=0!==t.size,r=void 0,n=t.clear();return e&&N(t,"clear",void 0,void 0,r),n}});const i=["keys","values","entries",Symbol.iterator];return i.forEach(n=>{r[n]=nt(n,t,e)}),r}function ot(t,e){const r=st(t,e);return(e,i,s)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get((0,n.$3)(r,i)&&i in e?r:e,i,s)}const at={get:ot(!1,!1)},lt={get:ot(!1,!0)},ht={get:ot(!0,!1)};const ut=new WeakMap,ct=new WeakMap,dt=new WeakMap,ft=new WeakMap;function pt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mt(t){return t["__v_skip"]||!Object.isExtensible(t)?0:pt((0,n.Zf)(t))}function gt(t){return bt(t)?t:_t(t,!1,J,at,ut)}function yt(t){return _t(t,!1,tt,lt,ct)}function vt(t){return _t(t,!0,Q,ht,dt)}function _t(t,e,r,i,s){if(!(0,n.Gv)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=mt(t);if(0===o)return t;const a=s.get(t);if(a)return a;const l=new Proxy(t,2===o?i:r);return s.set(t,l),l}function xt(t){return bt(t)?xt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function bt(t){return!(!t||!t["__v_isReadonly"])}function Et(t){return!(!t||!t["__v_isShallow"])}function Tt(t){return!!t&&!!t["__v_raw"]}function wt(t){const e=t&&t["__v_raw"];return e?wt(e):t}function At(t){return!(0,n.$3)(t,"__v_skip")&&Object.isExtensible(t)&&(0,n.yQ)(t,"__v_skip",!0),t}const St=t=>(0,n.Gv)(t)?gt(t):t,Ct=t=>(0,n.Gv)(t)?vt(t):t;function Rt(t){return!!t&&!0===t["__v_isRef"]}function It(t){return Rt(t)?t.value:t}const Pt={get:(t,e,r)=>"__v_raw"===e?t:It(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const i=t[e];return Rt(i)&&!Rt(r)?(i.value=r,!0):Reflect.set(t,e,r,n)}};function Mt(t){return xt(t)?t:new Proxy(t,Pt)}class Ot{constructor(t,e,r){this.fn=t,this.setter=e,this._value=void 0,this.dep=new I(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=C-1,this.next=void 0,this.effect=this,this["__v_isReadonly"]=!e,this.isSSR=r}notify(){if(this.flags|=16,!(8&this.flags||s===this))return f(this,!0),!0}get value(){const t=this.dep.track();return _(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Dt(t,e,r=!1){let i,s;(0,n.Tn)(t)?i=t:(i=t.get,s=t.set);const o=new Ot(i,s,r);return o}const Ft={},Bt=new WeakMap;let Nt;function Lt(t,e=!1,r=Nt){if(r){let e=Bt.get(r);e||Bt.set(r,e=[]),e.push(t)}else 0}function kt(t,e,r=n.MZ){const{immediate:i,deep:s,once:o,scheduler:l,augmentJob:u,call:c}=r,d=t=>s?t:Et(t)||!1===s||0===s?Ut(t,1):Ut(t);let f,p,m,g,y=!1,v=!1;if(Rt(t)?(p=()=>t.value,y=Et(t)):xt(t)?(p=()=>d(t),y=!0):(0,n.cy)(t)?(v=!0,y=t.some(t=>xt(t)||Et(t)),p=()=>t.map(t=>Rt(t)?t.value:xt(t)?d(t):(0,n.Tn)(t)?c?c(t,2):t():void 0)):p=(0,n.Tn)(t)?e?c?()=>c(t,2):t:()=>{if(m){w();try{m()}finally{A()}}const e=Nt;Nt=f;try{return c?c(t,3,[g]):t(g)}finally{Nt=e}}:n.tE,e&&s){const t=p,e=!0===s?1/0:s;p=()=>Ut(t(),e)}const _=a(),x=()=>{f.stop(),_&&_.active&&(0,n.TF)(_.effects,f)};if(o&&e){const t=e;e=(...e)=>{t(...e),x()}}let b=v?new Array(t.length).fill(Ft):Ft;const E=t=>{if(1&f.flags&&(f.dirty||t))if(e){const t=f.run();if(s||y||(v?t.some((t,e)=>(0,n.$H)(t,b[e])):(0,n.$H)(t,b))){m&&m();const r=Nt;Nt=f;try{const r=[t,b===Ft?void 0:v&&b[0]===Ft?[]:b,g];b=t,c?c(e,3,r):e(...r)}finally{Nt=r}}}else f.run()};return u&&u(E),f=new h(p),f.scheduler=l?()=>l(E,!1):E,g=t=>Lt(t,!1,f),m=f.onStop=()=>{const t=Bt.get(f);if(t){if(c)c(t,4);else for(const e of t)e();Bt.delete(f)}},e?i?E(!0):b=f.run():l?l(E.bind(null,!0),!0):f.run(),x.pause=f.pause.bind(f),x.resume=f.resume.bind(f),x.stop=x,x}function Ut(t,e=1/0,r){if(e<=0||!(0,n.Gv)(t)||t["__v_skip"])return t;if(r=r||new Set,r.has(t))return t;if(r.add(t),e--,Rt(t))Ut(t.value,e,r);else if((0,n.cy)(t))for(let n=0;n<t.length;n++)Ut(t[n],e,r);else if((0,n.vM)(t)||(0,n.CE)(t))t.forEach(t=>{Ut(t,e,r)});else if((0,n.Qd)(t)){for(const n in t)Ut(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Ut(t[n],e,r)}return t}},283:function(t,e,r){"use strict";var n=r(9504),i=r(9039),s=r(4901),o=r(9297),a=r(3724),l=r(350).CONFIGURABLE,h=r(3706),u=r(1181),c=u.enforce,d=u.get,f=String,p=Object.defineProperty,m=n("".slice),g=n("".replace),y=n([].join),v=a&&!i(function(){return 8!==p(function(){},"length",{value:8}).length}),_=String(String).split("String"),x=t.exports=function(t,e,r){"Symbol("===m(f(e),0,7)&&(e="["+g(f(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!o(t,"name")||l&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),v&&r&&o(r,"arity")&&t.length!==r.arity&&p(t,"length",{value:r.arity});try{r&&o(r,"constructor")&&r.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var n=c(t);return o(n,"source")||(n.source=y(_,"string"==typeof e?e:"")),t};Function.prototype.toString=x(function(){return s(this)&&d(this).source||h(this)},"toString")},350:function(t,e,r){"use strict";var n=r(3724),i=r(9297),s=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,a=i(s,"name"),l=a&&"something"===function(){}.name,h=a&&(!n||n&&o(s,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:h}},397:function(t,e,r){"use strict";var n=r(7751);t.exports=n("document","documentElement")},409:function(t){"use strict";t.exports=Math.pow},421:function(t){"use strict";t.exports={}},507:function(t,e,r){"use strict";var n=r(9565);t.exports=function(t,e,r){var i,s,o=r?t:t.iterator,a=t.next;while(!(i=n(a,o)).done)if(s=e(i.value),void 0!==s)return s}},616:function(t,e,r){"use strict";var n=r(9039);t.exports=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},655:function(t,e,r){"use strict";var n=r(6955),i=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return i(t)}},679:function(t,e,r){"use strict";var n=r(1625),i=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw new i("Incorrect invocation")}},684:function(t){"use strict";t.exports=function(t,e){var r="function"==typeof Iterator&&Iterator.prototype[t];if(r)try{r.call({next:null},e).next()}catch(n){return!0}}},741:function(t){"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},757:function(t,e,r){"use strict";var n=r(7751),i=r(4901),s=r(1625),o=r(7040),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return i(e)&&s(e.prototype,a(t))}},833:function(t,e,r){"use strict";var n=r(6147),i=r(6417),s=r(4887);t.exports=n?function(t){return n(t)}:i?function(t){if(!t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("getProto: not an object");return i(t)}:s?function(t){return s(t)}:null},851:function(t,e,r){"use strict";var n=r(6955),i=r(5966),s=r(4117),o=r(6269),a=r(8227),l=a("iterator");t.exports=function(t){if(!s(t))return i(t,l)||i(t,"@@iterator")||o[n(t)]}},1012:function(t,e,r){r(4114),r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698);var n="function"===typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=n&&i&&"function"===typeof i.get?i.get:null,o=n&&Map.prototype.forEach,a="function"===typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,h=a&&l&&"function"===typeof l.get?l.get:null,u=a&&Set.prototype.forEach,c="function"===typeof WeakMap&&WeakMap.prototype,d=c?WeakMap.prototype.has:null,f="function"===typeof WeakSet&&WeakSet.prototype,p=f?WeakSet.prototype.has:null,m="function"===typeof WeakRef&&WeakRef.prototype,g=m?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,v=Object.prototype.toString,_=Function.prototype.toString,x=String.prototype.match,b=String.prototype.slice,E=String.prototype.replace,T=String.prototype.toUpperCase,w=String.prototype.toLowerCase,A=RegExp.prototype.test,S=Array.prototype.concat,C=Array.prototype.join,R=Array.prototype.slice,I=Math.floor,P="function"===typeof BigInt?BigInt.prototype.valueOf:null,M=Object.getOwnPropertySymbols,O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,D="function"===typeof Symbol&&"object"===typeof Symbol.iterator,F="function"===typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===D||"symbol")?Symbol.toStringTag:null,B=Object.prototype.propertyIsEnumerable,N=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function L(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||A.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof t){var n=t<0?-I(-t):I(t);if(n!==t){var i=String(n),s=b.call(e,i.length+1);return E.call(i,r,"$&_")+"."+E.call(E.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return E.call(e,r,"$&_")}var k=r(2634),U=k.custom,G=Q(U)?U:null,j={__proto__:null,double:'"',single:"'"},z={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function H(t,e,r){var n=r.quoteStyle||e,i=j[n];return i+t+i}function W(t){return E.call(String(t),/"/g,"&quot;")}function X(t){return!F||!("object"===typeof t&&(F in t||"undefined"!==typeof t[F]))}function V(t){return"[object Array]"===nt(t)&&X(t)}function $(t){return"[object Date]"===nt(t)&&X(t)}function Y(t){return"[object RegExp]"===nt(t)&&X(t)}function q(t){return"[object Error]"===nt(t)&&X(t)}function K(t){return"[object String]"===nt(t)&&X(t)}function Z(t){return"[object Number]"===nt(t)&&X(t)}function J(t){return"[object Boolean]"===nt(t)&&X(t)}function Q(t){if(D)return t&&"object"===typeof t&&t instanceof Symbol;if("symbol"===typeof t)return!0;if(!t||"object"!==typeof t||!O)return!1;try{return O.call(t),!0}catch(e){}return!1}function tt(t){if(!t||"object"!==typeof t||!P)return!1;try{return P.call(t),!0}catch(e){}return!1}t.exports=function t(e,n,i,a){var l=n||{};if(rt(l,"quoteStyle")&&!rt(j,l.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(rt(l,"maxStringLength")&&("number"===typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!rt(l,"customInspect")||l.customInspect;if("boolean"!==typeof c&&"symbol"!==c)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(rt(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(rt(l,"numericSeparator")&&"boolean"!==typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var d=l.numericSeparator;if("undefined"===typeof e)return"undefined";if(null===e)return"null";if("boolean"===typeof e)return e?"true":"false";if("string"===typeof e)return dt(e,l);if("number"===typeof e){if(0===e)return 1/0/e>0?"0":"-0";var f=String(e);return d?L(e,f):f}if("bigint"===typeof e){var p=String(e)+"n";return d?L(e,p):p}var m="undefined"===typeof l.depth?5:l.depth;if("undefined"===typeof i&&(i=0),i>=m&&m>0&&"object"===typeof e)return V(e)?"[Array]":"[Object]";var g=vt(l,i);if("undefined"===typeof a)a=[];else if(st(a,e)>=0)return"[Circular]";function v(e,r,n){if(r&&(a=R.call(a),a.push(r)),n){var s={depth:l.depth};return rt(l,"quoteStyle")&&(s.quoteStyle=l.quoteStyle),t(e,s,i+1,a)}return t(e,l,i+1,a)}if("function"===typeof e&&!Y(e)){var _=it(e),x=xt(e,v);return"[Function"+(_?": "+_:" (anonymous)")+"]"+(x.length>0?" { "+C.call(x,", ")+" }":"")}if(Q(e)){var T=D?E.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):O.call(e);return"object"!==typeof e||D?T:pt(T)}if(ct(e)){for(var A="<"+w.call(String(e.nodeName)),I=e.attributes||[],M=0;M<I.length;M++)A+=" "+I[M].name+"="+H(W(I[M].value),"double",l);return A+=">",e.childNodes&&e.childNodes.length&&(A+="..."),A+="</"+w.call(String(e.nodeName))+">",A}if(V(e)){if(0===e.length)return"[]";var U=xt(e,v);return g&&!yt(U)?"["+_t(U,g)+"]":"[ "+C.call(U,", ")+" ]"}if(q(e)){var z=xt(e,v);return"cause"in Error.prototype||!("cause"in e)||B.call(e,"cause")?0===z.length?"["+String(e)+"]":"{ ["+String(e)+"] "+C.call(z,", ")+" }":"{ ["+String(e)+"] "+C.call(S.call("[cause]: "+v(e.cause),z),", ")+" }"}if("object"===typeof e&&c){if(G&&"function"===typeof e[G]&&k)return k(e,{depth:m-i});if("symbol"!==c&&"function"===typeof e.inspect)return e.inspect()}if(ot(e)){var X=[];return o&&o.call(e,function(t,r){X.push(v(r,e,!0)+" => "+v(t,e))}),gt("Map",s.call(e),X,g)}if(ht(e)){var et=[];return u&&u.call(e,function(t){et.push(v(t,e))}),gt("Set",h.call(e),et,g)}if(at(e))return mt("WeakMap");if(ut(e))return mt("WeakSet");if(lt(e))return mt("WeakRef");if(Z(e))return pt(v(Number(e)));if(tt(e))return pt(v(P.call(e)));if(J(e))return pt(y.call(e));if(K(e))return pt(v(String(e)));if("undefined"!==typeof window&&e===window)return"{ [object Window] }";if("undefined"!==typeof globalThis&&e===globalThis||"undefined"!==typeof r.g&&e===r.g)return"{ [object globalThis] }";if(!$(e)&&!Y(e)){var ft=xt(e,v),bt=N?N(e)===Object.prototype:e instanceof Object||e.constructor===Object,Et=e instanceof Object?"":"null prototype",Tt=!bt&&F&&Object(e)===e&&F in e?b.call(nt(e),8,-1):Et?"Object":"",wt=bt||"function"!==typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"",At=wt+(Tt||Et?"["+C.call(S.call([],Tt||[],Et||[]),": ")+"] ":"");return 0===ft.length?At+"{}":g?At+"{"+_t(ft,g)+"}":At+"{ "+C.call(ft,", ")+" }"}return String(e)};var et=Object.prototype.hasOwnProperty||function(t){return t in this};function rt(t,e){return et.call(t,e)}function nt(t){return v.call(t)}function it(t){if(t.name)return t.name;var e=x.call(_.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function st(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function ot(t){if(!s||!t||"object"!==typeof t)return!1;try{s.call(t);try{h.call(t)}catch(e){return!0}return t instanceof Map}catch(r){}return!1}function at(t){if(!d||!t||"object"!==typeof t)return!1;try{d.call(t,d);try{p.call(t,p)}catch(e){return!0}return t instanceof WeakMap}catch(r){}return!1}function lt(t){if(!g||!t||"object"!==typeof t)return!1;try{return g.call(t),!0}catch(e){}return!1}function ht(t){if(!h||!t||"object"!==typeof t)return!1;try{h.call(t);try{s.call(t)}catch(e){return!0}return t instanceof Set}catch(r){}return!1}function ut(t){if(!p||!t||"object"!==typeof t)return!1;try{p.call(t,p);try{d.call(t,d)}catch(e){return!0}return t instanceof WeakSet}catch(r){}return!1}function ct(t){return!(!t||"object"!==typeof t)&&("undefined"!==typeof HTMLElement&&t instanceof HTMLElement||"string"===typeof t.nodeName&&"function"===typeof t.getAttribute)}function dt(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return dt(b.call(t,0,e.maxStringLength),e)+n}var i=z[e.quoteStyle||"single"];i.lastIndex=0;var s=E.call(E.call(t,i,"\\$1"),/[\x00-\x1f]/g,ft);return H(s,"single",e)}function ft(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+T.call(e.toString(16))}function pt(t){return"Object("+t+")"}function mt(t){return t+" { ? }"}function gt(t,e,r,n){var i=n?_t(r,n):C.call(r,", ");return t+" ("+e+") {"+i+"}"}function yt(t){for(var e=0;e<t.length;e++)if(st(t[e],"\n")>=0)return!1;return!0}function vt(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"===typeof t.indent&&t.indent>0))return null;r=C.call(Array(t.indent+1)," ")}return{base:r,prev:C.call(Array(e+1),r)}}function _t(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+C.call(t,","+r)+"\n"+e.prev}function xt(t,e){var r=V(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=rt(t,i)?e(t[i],t):""}var s,o="function"===typeof M?M(t):[];if(D){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in t)rt(t,l)&&(r&&String(Number(l))===l&&l<t.length||D&&s["$"+l]instanceof Symbol||(A.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if("function"===typeof M)for(var h=0;h<o.length;h++)B.call(t,o[h])&&n.push("["+e(o[h])+"]: "+e(t[o[h]],t));return n}},1068:function(t){"use strict";t.exports=Object.getOwnPropertyDescriptor},1072:function(t,e,r){"use strict";var n=r(1828),i=r(8727);t.exports=Object.keys||function(t){return n(t,i)}},1108:function(t,e,r){"use strict";var n=r(6955);t.exports=function(t){var e=n(t);return"BigInt64Array"===e||"BigUint64Array"===e}},1148:function(t,e,r){"use strict";var n=r(6518),i=r(9565),s=r(2652),o=r(9306),a=r(8551),l=r(1767),h=r(9539),u=r(4549),c=u("every",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:c},{every:function(t){a(this);try{o(t)}catch(n){h(this,"throw",n)}if(c)return i(c,this,t);var e=l(this),r=0;return!s(e,function(e,n){if(!t(e,r++))return n()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1181:function(t,e,r){"use strict";var n,i,s,o=r(8622),a=r(4576),l=r(34),h=r(6699),u=r(9297),c=r(7629),d=r(6119),f=r(421),p="Object already initialized",m=a.TypeError,g=a.WeakMap,y=function(t){return s(t)?i(t):n(t,{})},v=function(t){return function(e){var r;if(!l(e)||(r=i(e)).type!==t)throw new m("Incompatible receiver, "+t+" required");return r}};if(o||c.state){var _=c.state||(c.state=new g);_.get=_.get,_.has=_.has,_.set=_.set,n=function(t,e){if(_.has(t))throw new m(p);return e.facade=t,_.set(t,e),e},i=function(t){return _.get(t)||{}},s=function(t){return _.has(t)}}else{var x=d("state");f[x]=!0,n=function(t,e){if(u(t,x))throw new m(p);return e.facade=t,h(t,x,e),e},i=function(t){return u(t,x)?t[x]:{}},s=function(t){return u(t,x)}}t.exports={set:n,get:i,has:s,enforce:y,getterFor:v}},1291:function(t,e,r){"use strict";var n=r(741);t.exports=function(t){var e=+t;return e!==e||0===e?0:n(e)}},1334:function(t){"use strict";t.exports=EvalError},1385:function(t,e,r){"use strict";var n=r(9539);t.exports=function(t,e,r){for(var i=t.length-1;i>=0;i--)if(void 0!==t[i])try{r=n(t[i].iterator,e,r)}catch(s){e="throw",r=s}if("throw"===e)throw r;return r}},1625:function(t,e,r){"use strict";var n=r(9504);t.exports=n({}.isPrototypeOf)},1698:function(t,e,r){"use strict";var n=r(6518),i=r(4204),s=r(9835),o=r(4916),a=!o("union")||!s("union");n({target:"Set",proto:!0,real:!0,forced:a},{union:i})},1701:function(t,e,r){"use strict";var n=r(6518),i=r(9565),s=r(9306),o=r(8551),a=r(1767),l=r(9462),h=r(6319),u=r(9539),c=r(684),d=r(4549),f=r(6395),p=!f&&!c("map",function(){}),m=!f&&!p&&d("map",TypeError),g=f||p||m,y=l(function(){var t=this.iterator,e=o(i(this.next,t)),r=this.done=!!e.done;if(!r)return h(t,this.mapper,[e.value,this.counter++],!0)});n({target:"Iterator",proto:!0,real:!0,forced:g},{map:function(t){o(this);try{s(t)}catch(e){u(this,"throw",e)}return m?i(m,this,t):new y(a(this),{mapper:t})}})},1767:function(t){"use strict";t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},1806:function(t,e,r){"use strict";var n=r(6518),i=r(8551),s=r(2652),o=r(1767),a=[].push;n({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return s(o(i(this)),a,{that:t,IS_RECORD:!0}),t}})},1828:function(t,e,r){"use strict";var n=r(9504),i=r(9297),s=r(5397),o=r(9617).indexOf,a=r(421),l=n([].push);t.exports=function(t,e){var r,n=s(t),h=0,u=[];for(r in n)!i(a,r)&&i(n,r)&&l(u,r);while(e.length>h)i(n,r=e[h++])&&(~o(u,r)||l(u,r));return u}},1866:function(t,e,r){"use strict";var n=Function.prototype.call,i=Object.prototype.hasOwnProperty,s=r(3682);t.exports=s.call(n,i)},1868:function(t){"use strict";t.exports=URIError},2106:function(t,e,r){"use strict";var n=r(283),i=r(4913);t.exports=function(t,e,r){return r.get&&n(r.get,e,{getter:!0}),r.set&&n(r.set,e,{setter:!0}),i.f(t,e,r)}},2140:function(t,e,r){"use strict";var n=r(8227),i=n("toStringTag"),s={};s[i]="z",t.exports="[object z]"===String(s)},2195:function(t,e,r){"use strict";var n=r(9504),i=n({}.toString),s=n("".slice);t.exports=function(t){return s(i(t),8,-1)}},2211:function(t,e,r){"use strict";var n=r(9039);t.exports=!n(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},2360:function(t,e,r){"use strict";var n,i=r(8551),s=r(6801),o=r(8727),a=r(421),l=r(397),h=r(4055),u=r(6119),c=">",d="<",f="prototype",p="script",m=u("IE_PROTO"),g=function(){},y=function(t){return d+p+c+t+d+"/"+p+c},v=function(t){t.write(y("")),t.close();var e=t.parentWindow.Object;return t=null,e},_=function(){var t,e=h("iframe"),r="java"+p+":";return e.style.display="none",l.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(y("document.F=Object")),t.close(),t.F},x=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}x="undefined"!=typeof document?document.domain&&n?v(n):_():v(n);var t=o.length;while(t--)delete x[f][o[t]];return x()};a[m]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(g[f]=i(t),r=new g,g[f]=null,r[m]=t):r=x(),void 0===e?r:s.f(r,e)}},2454:function(t,e,r){"use strict";r.d(e,{lgM:function(){return Q},mcf:function(){return u},U7r:function(){return E},kxk:function(){return f},EYj:function(){return Gr},gPd:function(){return n.gP},uRw:function(){return n.uR}});var n=r(3818);r(4114),r(8111),r(2489);class i{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?n.M_.EMPTY:(t=t||new n.M_(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:r,b:n,c:i,d:s,tx:o,ty:a}=t,l=r*e.x+i*e.y+o,h=n*e.x+s*e.y+a;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(t){let e=this.minX,r=this.minY,n=this.maxX,i=this.maxY,s=t[0],o=t[1];e=s<e?s:e,r=o<r?o:r,n=s>n?s:n,i=o>i?o:i,s=t[2],o=t[3],e=s<e?s:e,r=o<r?o:r,n=s>n?s:n,i=o>i?o:i,s=t[4],o=t[5],e=s<e?s:e,r=o<r?o:r,n=s>n?s:n,i=o>i?o:i,s=t[6],o=t[7],e=s<e?s:e,r=o<r?o:r,n=s>n?s:n,i=o>i?o:i,this.minX=e,this.minY=r,this.maxX=n,this.maxY=i}addFrame(t,e,r,n,i){this.addFrameMatrix(t.worldTransform,e,r,n,i)}addFrameMatrix(t,e,r,n,i){const s=t.a,o=t.b,a=t.c,l=t.d,h=t.tx,u=t.ty;let c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,m=s*e+a*r+h,g=o*e+l*r+u;c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=s*n+a*r+h,g=o*n+l*r+u,c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=s*e+a*i+h,g=o*e+l*i+u,c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=s*n+a*i+h,g=o*n+l*i+u,c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,this.minX=c,this.minY=d,this.maxX=f,this.maxY=p}addVertexData(t,e,r){let n=this.minX,i=this.minY,s=this.maxX,o=this.maxY;for(let a=e;a<r;a+=2){const e=t[a],r=t[a+1];n=e<n?e:n,i=r<i?r:i,s=e>s?e:s,o=r>o?r:o}this.minX=n,this.minY=i,this.maxX=s,this.maxY=o}addVertices(t,e,r,n){this.addVerticesMatrix(t.worldTransform,e,r,n)}addVerticesMatrix(t,e,r,n,i=0,s=i){const o=t.a,a=t.b,l=t.c,h=t.d,u=t.tx,c=t.ty;let d=this.minX,f=this.minY,p=this.maxX,m=this.maxY;for(let g=r;g<n;g+=2){const t=e[g],r=e[g+1],n=o*t+l*r+u,y=h*r+a*t+c;d=Math.min(d,n-i),p=Math.max(p,n+i),f=Math.min(f,y-s),m=Math.max(m,y+s)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addBounds(t){const e=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>i?t.maxY:i}addBoundsMask(t,e){const r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=i&&n<=s){const t=this.minX,e=this.minY,o=this.maxX,a=this.maxY;this.minX=r<t?r:t,this.minY=n<e?n:e,this.maxX=i>o?i:o,this.maxY=s>a?s:a}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=i&&n<=s){const t=this.minX,e=this.minY,o=this.maxX,a=this.maxY;this.minX=r<t?r:t,this.minY=n<e?n:e,this.maxX=i>o?i:o,this.maxY=s>a?s:a}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,r,n,i,s){t-=i,e-=s,r+=i,n+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n}}class s extends n.Wp.EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new n.dL,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new i,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let r=0;r<e.length;++r){const n=e[r];Object.defineProperty(s.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new n.M_),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new n.M_),t=this._localBoundsRect),this._localBounds||(this._localBounds=new i);const e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,o=this._boundsID;this._bounds=this._localBounds;const a=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=s,this._bounds.updateID+=this._boundsID-o,a}toGlobal(t,e,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){this.parent?.removeChild(this)}setTransform(t=0,e=0,r=1,n=1,i=0,s=0,o=0,a=0,l=0){return this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=l,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new o),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*n.bO}set angle(t){this.transform.rotation=t*n.Td}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,0===t._maskRefCount&&(t.renderable=!0,t.isMask=!1))}if(this._mask=t,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(0===t._maskRefCount&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class o extends s{constructor(){super(...arguments),this.sortDirty=null}}s.prototype.displayObjectUpdateTransform=s.prototype.updateTransform;const a=new n.uq;function l(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const h=class extends s{constructor(){super(),this.children=[],this.sortableChildren=h.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}getChildIndex(t){const e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(t);n.Wp.removeItems(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],r=this.children.indexOf(e);if(-1===r)return null;e.parent=null,e.transform._parentID=-1,n.Wp.removeItems(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this),this.emit("childRemoved",e,this,r)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,n.Wp.removeItems(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const r=t,n=e,i=n-r;let s;if(i>0&&i<=n){s=this.children.splice(r,i);for(let t=0;t<s.length;++t)s[t].parent=null,s[t].transform&&(s[t].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let t=0;t<s.length;++t)s[t].emit("removed",this),this.emit("childRemoved",s[t],this,t);return s}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,r=this.children.length;e<r;++e){const r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(l),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const e=this.children[t];e.visible&&e.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){const t=e._mask.isMaskData?e._mask.maskObject:e._mask;t?(t.calculateBounds(),this._bounds.addBoundsMask(e._bounds,t._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const r=super.getLocalBounds(t);if(!e)for(let n=0,i=this.children.length;n<i;++n){const t=this.children[n];t.visible&&t.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let r,n;this.cullArea?(r=this.cullArea,n=this.worldTransform):this._render!==h.prototype._render&&(r=this.getBounds(!0));const i=t.projection.transform;if(i&&(n?(n=a.copyFrom(n),n.prepend(i)):n=i),r&&e.intersects(r,n))this._render(t);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const e=this.children[s],r=e.cullable;e.cullable=r||!this.cullArea,e.render(t),e.cullable=r}}render(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}}renderAdvanced(t){const e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let t=0;t<e.length;t++)e[t].enabled&&this._enabledFilters.push(e[t])}const i=e&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==n.vg.NONE));if(i&&t.batch.flush(),e&&this._enabledFilters?.length&&t.filter.push(this,this._enabledFilters),r&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}i&&t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters?.length&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e="boolean"===typeof t?t:t?.children,r=this.removeChildren(0,this.children.length);if(e)for(let n=0;n<r.length;++n)r[n].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}};let u=h;u.defaultSortableChildren=!1,u.prototype.containerUpdateTransform=u.prototype.updateTransform,Object.defineProperties(n.W0,{SORTABLE_CHILDREN:{get(){return u.defaultSortableChildren},set(t){n.Wp.deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),u.defaultSortableChildren=t}}});r(9577);const c=new n.bR,d=new Uint16Array([0,1,2,0,2,3]);class f extends u{constructor(t){super(),this._anchor=new n.oA(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=n.B9.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||n.gP.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=d,this.pluginName="batch",this.isSprite=!0,this._roundPixels=n.W0.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=n.Wp.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=n.Wp.sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,r=e.a,i=e.b,s=e.c,o=e.d,a=e.tx,l=e.ty,h=this.vertexData,u=t.trim,c=t.orig,d=this._anchor;let f=0,p=0,m=0,g=0;if(u?(p=u.x-d._x*c.width,f=p+u.width,g=u.y-d._y*c.height,m=g+u.height):(p=-d._x*c.width,f=p+c.width,g=-d._y*c.height,m=g+c.height),h[0]=r*p+s*g+a,h[1]=o*g+i*p+l,h[2]=r*f+s*g+a,h[3]=o*g+i*f+l,h[4]=r*f+s*m+a,h[5]=o*m+i*f+l,h[6]=r*p+s*m+a,h[7]=o*m+i*p+l,this._roundPixels){const t=n.W0.RESOLUTION;for(let e=0;e<h.length;++e)h[e]=Math.round(h[e]*t)/t}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,r=t.orig,n=this._anchor,i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,h=i.tx,u=i.ty,c=-n._x*r.width,d=c+r.width,f=-n._y*r.height,p=f+r.height;e[0]=s*c+a*f+h,e[1]=l*f+o*c+u,e[2]=s*d+a*f+h,e[3]=l*f+o*d+u,e[4]=s*d+a*p+h,e[5]=l*p+o*d+u,e[6]=s*c+a*p+h,e[7]=l*p+o*c+u}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return 0===this.children.length?(this._localBounds||(this._localBounds=new i),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new n.M_),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,c);const e=this._texture.orig.width,r=this._texture.orig.height,n=-e*this.anchor.x;let i=0;return c.x>=n&&c.x<n+e&&(i=-r*this.anchor.y,c.y>=i&&c.y<i+r)}destroy(t){super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;const e="boolean"===typeof t?t:t?.texture;if(e){const e="boolean"===typeof t?t:t?.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const r=t instanceof n.gP?t:n.gP.from(t,e);return new f(r)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=n.Wp.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=n.Wp.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tint}set tint(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||n.gP.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const p=new n.uq;s.prototype._cacheAsBitmap=!1,s.prototype._cacheData=null,s.prototype._cacheAsBitmapResolution=null,s.prototype._cacheAsBitmapMultisample=null;class m{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(s.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;let e;this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new m),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}),s.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},s.prototype._initCachedDisplayObject=function(t){if(this._cacheData?.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const r=this.getLocalBounds(null,!0).clone();if(this.filters?.length){const t=this.filters[0].padding;r.pad(t)}r.ceil(n.W0.RESOLUTION);const i=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=n.Y7.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),h=`cacheAsBitmap_${n.Wp.uid()}`;this._cacheData.textureCacheId=h,n.t5.addToCache(l.baseTexture,h),n.gP.addToCache(l,h);const u=this.transform.localTransform.copyTo(p).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:u,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const c=new f(l);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-r.x/r.width,c.anchor.y=-r.y/r.height,c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)},s.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},s.prototype._initCachedDisplayObjectCanvas=function(t){if(this._cacheData?.sprite)return;const e=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;const i=t.canvasContext.activeContext,s=t._projTransform;e.ceil(n.W0.RESOLUTION);const o=n.Y7.create({width:e.width,height:e.height}),a=`cacheAsBitmap_${n.Wp.uid()}`;this._cacheData.textureCacheId=a,n.t5.addToCache(o.baseTexture,a),n.gP.addToCache(o,a);const l=p;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=i,t._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const h=new f(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h.alpha=r,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)},s.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},s.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},s.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,n.t5.removeFromCache(this._cacheData.textureCacheId),n.gP.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},s.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},s.prototype.name=null,u.prototype.getChildByName=function(t,e){for(let r=0,n=this.children.length;r<n;r++)if(this.children[r].name===t)return this.children[r];if(e)for(let r=0,n=this.children.length;r<n;r++){const e=this.children[r];if(!e.getChildByName)continue;const n=e.getChildByName(t,!0);if(n)return n}return null},s.prototype.getGlobalPosition=function(t=new n.bR,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};r(7588);var g=r(2460),y=r(5429),v="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n";class _ extends n.dJ{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(n.Eo,v,t),this.alpha=1}_loadMatrix(t,e=!1){let r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}tint(t,e){const r=t>>16&255,n=t>>8&255,i=255&t,s=[r/255,0,0,0,0,0,n/255,0,0,0,0,0,i/255,0,0,0,0,0,1,0];this._loadMatrix(s,e)}greyscale(t,e){const r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const r=Math.cos(t),n=Math.sin(t),i=Math.sqrt,s=1/3,o=i(s),a=r+(1-r)*s,l=s*(1-r)-o*n,h=s*(1-r)+o*n,u=s*(1-r)+o*n,c=r+s*(1-r),d=s*(1-r)-o*n,f=s*(1-r)-o*n,p=s*(1-r)+o*n,m=r+s*(1-r),g=[a,l,h,0,0,u,c,d,0,0,f,p,m,0,0,0,0,0,1,0];this._loadMatrix(g,e)}contrast(t,e){const r=(t||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,e)}saturate(t=0,e){const r=2*t/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,r,n,i){t=t||.2,e=e||.15,r=r||16770432,n=n||3375104;const s=(r>>16&255)/255,o=(r>>8&255)/255,a=(255&r)/255,l=(n>>16&255)/255,h=(n>>8&255)/255,u=(255&n)/255,c=[.3,.59,.11,0,0,s,o,a,t,0,l,h,u,e,0,s-l,o-h,a-u,0,0];this._loadMatrix(c,i)}night(t,e){t=t||.1;const r=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}predator(t,e){const r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}_.prototype.grayscale=_.prototype.greyscale;var x="varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",b="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n";class E extends n.dJ{constructor(t,e){const r=new n.uq;t.renderable=!1,super(b,x,{mapSampler:t._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=r,null!==e&&void 0!==e||(e=20),this.scale=new n.bR(e,e)}apply(t,e,r,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const i=this.maskSprite.worldTransform,s=Math.sqrt(i.a*i.a+i.b*i.b),o=Math.sqrt(i.c*i.c+i.d*i.d);0!==s&&0!==o&&(this.uniforms.rotation[0]=i.a/s,this.uniforms.rotation[1]=i.b/s,this.uniforms.rotation[2]=i.c/o,this.uniforms.rotation[3]=i.d/o),t.applyFilter(this,e,r,n)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var T='varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n',w="\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n";class A extends n.dJ{constructor(){super(w,T)}}var S="precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n";class C extends n.dJ{constructor(t=.5,e=Math.random()){super(n.Eo,S,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const R={AlphaFilter:g.Z,BlurFilter:y.e,BlurFilterPass:y.H,ColorMatrixFilter:_,DisplacementFilter:E,FXAAFilter:A,NoiseFilter:C};Object.entries(R).forEach(([t,e])=>{Object.defineProperty(R,t,{get(){return n.Wp.deprecation("7.1.0",`filters.${t} has moved to ${t}`),e}})});class I{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=I.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new n.bR,this.page=new n.bR,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,r,n,i){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class P extends I{constructor(){super(...arguments),this.client=new n.bR,this.movement=new n.bR,this.offset=new n.bR,this.global=new n.bR,this.screen=new n.bR}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,r,n,i,s,o,a,l,h,u,c,d,f,p){throw new Error("Method not implemented.")}}class M extends P{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class O extends P{constructor(){super(...arguments),this.DOM_DELTA_LINE=0,this.DOM_DELTA_PAGE=1,this.DOM_DELTA_PIXEL=2}}const D=2048,F=new n.bR,B=new n.bR;class N{constructor(t){this.dispatch=new n.Wp.EventEmitter,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((t,e)=>t.priority-e.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let r=0,n=e.length;r<n;r++)e[r].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){const r=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,F.set(t,e),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(t,e){if(!t.target)return;const r=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,i=r.length-1;n<i;n++)if(t.currentTarget=r[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){t.eventPhase=t.BUBBLING_PHASE;for(let n=r.length-2;n>=0;n--)if(t.currentTarget=r[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,r=this.rootTarget){t.eventPhase=t.BUBBLING_PHASE;const n=r.children;if(n)for(let i=0;i<n.length;i++)this.all(t,e,n[i]);t.currentTarget=r,this.notifyTarget(t,e)}propagationPath(t){const e=[t];for(let r=0;r<D&&t!==this.rootTarget;r++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestRecursive(t,e,r,n,i){if(!t||!t.visible)return null;if(i(t,r))return null;if(t.interactiveChildren&&t.children){const s=t.children;for(let o=s.length-1;o>=0;o--){const a=s[o],l=this.hitTestRecursive(a,e||a.interactive,r,n,i);if(l){if(l.length>0&&!l[l.length-1].parent)continue;return(l.length>0||t.interactive)&&l.push(t),l}}}return e&&n(t,r)?t.interactive?[t]:[]:null}hitPruneFn(t,e){if(t.hitArea&&(t.worldTransform.applyInverse(e,B),!t.hitArea.contains(B.x,B.y)))return!0;if(t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;if(r&&!r.containsPoint?.(e))return!0}return!1}hitTestFn(t,e){return!!t.hitArea||!!t.containsPoint&&t.containsPoint(e)}notifyTarget(t,e){e=e??t.type;const r=`on${e}`;t.currentTarget[r]?.(t);const n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof M))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),"touch"===e.pointerType)this.dispatchEvent(e,"touchstart");else if("mouse"===e.pointerType||"pen"===e.pointerType){const t=2===e.button;this.dispatchEvent(e,t?"rightdown":"mousedown")}const r=this.trackingData(t.pointerId);r.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){if(!(t instanceof M))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.createPointerEvent(t),r="mouse"===e.pointerType||"pen"===e.pointerType,n=this.trackingData(t.pointerId),i=this.findMountedTarget(n.overTargets);if(n.overTargets?.length>0&&i!==e.target){const n="mousemove"===t.type?"mouseout":"pointerout",s=this.createPointerEvent(t,n,i);if(this.dispatchEvent(s,"pointerout"),r&&this.dispatchEvent(s,"mouseout"),!e.composedPath().includes(i)){const n=this.createPointerEvent(t,"pointerleave",i);n.eventPhase=n.AT_TARGET;while(n.target&&!e.composedPath().includes(n.target))n.currentTarget=n.target,this.notifyTarget(n),r&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;this.freeEvent(n)}this.freeEvent(s)}if(i!==e.target){const n="mousemove"===t.type?"mouseover":"pointerover",s=this.clonePointerEvent(e,n);this.dispatchEvent(s,"pointerover"),r&&this.dispatchEvent(s,"mouseover");let o=i?.parent;while(o&&o!==this.rootTarget.parent){if(o===e.target)break;o=o.parent}const a=!o||o===this.rootTarget.parent;if(a){const t=this.clonePointerEvent(e,"pointerenter");t.eventPhase=t.AT_TARGET;while(t.target&&t.target!==i&&t.target!==this.rootTarget.parent)t.currentTarget=t.target,this.notifyTarget(t),r&&this.notifyTarget(t,"mouseenter"),t.target=t.target.parent;this.freeEvent(t)}this.freeEvent(s)}const s=this.moveOnAll?"all":"dispatchEvent";this[s](e,"pointermove"),this.all(e,"globalpointermove"),"touch"===e.pointerType&&(this[s](e,"touchmove"),this.all(e,"globaltouchmove")),r&&(this[s](e,"mousemove"),this.all(e,"globalmousemove"),this.cursor=e.target?.cursor),n.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){if(!(t instanceof M))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId),r=this.createPointerEvent(t),n="mouse"===r.pointerType||"pen"===r.pointerType;this.dispatchEvent(r,"pointerover"),n&&this.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(this.cursor=r.target?.cursor);const i=this.clonePointerEvent(r,"pointerenter");i.eventPhase=i.AT_TARGET;while(i.target&&i.target!==this.rootTarget.parent)i.currentTarget=i.target,this.notifyTarget(i),n&&this.notifyTarget(i,"mouseenter"),i.target=i.target.parent;e.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(i)}mapPointerOut(t){if(!(t instanceof M))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId);if(e.overTargets){const r="mouse"===t.pointerType||"pen"===t.pointerType,n=this.findMountedTarget(e.overTargets),i=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(i),r&&this.dispatchEvent(i,"mouseout");const s=this.createPointerEvent(t,"pointerleave",n);s.eventPhase=s.AT_TARGET;while(s.target&&s.target!==this.rootTarget.parent)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseleave"),s.target=s.target.parent;e.overTargets=null,this.freeEvent(i),this.freeEvent(s)}this.cursor=null}mapPointerUp(t){if(!(t instanceof M))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=performance.now(),r=this.createPointerEvent(t);if(this.dispatchEvent(r,"pointerup"),"touch"===r.pointerType)this.dispatchEvent(r,"touchend");else if("mouse"===r.pointerType||"pen"===r.pointerType){const t=2===r.button;this.dispatchEvent(r,t?"rightup":"mouseup")}const n=this.trackingData(t.pointerId),i=this.findMountedTarget(n.pressTargetsByButton[t.button]);let s=i;if(i&&!r.composedPath().includes(i)){let e=i;while(e&&!r.composedPath().includes(e)){if(r.currentTarget=e,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType)this.notifyTarget(r,"touchendoutside");else if("mouse"===r.pointerType||"pen"===r.pointerType){const t=2===r.button;this.notifyTarget(r,t?"rightupoutside":"mouseupoutside")}e=e.parent}delete n.pressTargetsByButton[t.button],s=e}if(s){const i=this.clonePointerEvent(r,"click");i.target=s,i.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:i.target,timeStamp:e});const o=n.clicksByButton[t.button];o.target===i.target&&e-o.timeStamp<200?++o.clickCount:o.clickCount=1,o.target=i.target,o.timeStamp=e,i.detail=o.clickCount,"mouse"===i.pointerType?this.dispatchEvent(i,"click"):"touch"===i.pointerType&&this.dispatchEvent(i,"tap"),this.dispatchEvent(i,"pointertap"),this.freeEvent(i)}this.freeEvent(r)}mapPointerUpOutside(t){if(!(t instanceof M))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId),r=this.findMountedTarget(e.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(r){let i=r;while(i)n.currentTarget=i,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType?this.notifyTarget(n,"touchendoutside"):"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.notifyTarget(n,2===n.button?"rightupoutside":"mouseupoutside"),i=i.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof O))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let r=1;r<t.length;r++){if(t[r].parent!==e)break;e=t[r]}return e}createPointerEvent(t,e,r){const n=this.allocateEvent(M);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=r??this.hitTest(n.global.x,n.global.y),"string"===typeof e&&(n.type=e),n}createWheelEvent(t){const e=this.allocateEvent(O);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const r=this.allocateEvent(M);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=e??r.type,r}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof M&&e instanceof M&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof P&&e instanceof P&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const r=t.currentTarget._events[e];if(r)if("fn"in r)r.fn.call(r.context,t);else for(let n=0,i=r.length;n<i&&!t.propagationImmediatelyStopped;n++)r[n].fn.call(r[n].context,t)}}const L=1,k={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class U{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new N(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new M(null),this.rootWheelEvent=new O(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:t,resolution:e}=this.renderer;this.setTargetElement(t),this.resolution=e}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const r=this.cursorStyles[t];if(r)switch(typeof r){case"string":e&&(this.domElement.style.cursor=r);break;case"function":r(t);break;case"object":e&&Object.assign(this.domElement.style,r);break}else e&&"string"===typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}onPointerDown(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized){const e=t.cancelable||!("cancelable"in t);e&&t.preventDefault()}for(let r=0,n=e.length;r<n;r++){const t=e[r],n=this.bootstrapEvent(this.rootPointerEvent,t);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);for(let r=0,n=e.length;r<n;r++){const t=this.bootstrapEvent(this.rootPointerEvent,e[r]);this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const r=e!==this.domElement?"outside":"",n=this.normalizeToPointerData(t);for(let i=0,s=n.length;i<s;i++){const t=this.bootstrapEvent(this.rootPointerEvent,n[i]);t.type+=r,this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);for(let r=0,n=e.length;r<n;r++){const t=this.bootstrapEvent(this.rootPointerEvent,e[r]);this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,r){let n;n=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const i=1/this.resolution;t.x=(e-n.left)*(this.domElement.width/n.width)*i,t.y=(r-n.top)*(this.domElement.height/n.height)*i}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let r=0,n=t.changedTouches.length;r<n;r++){const n=t.changedTouches[r];"undefined"===typeof n.button&&(n.button=0),"undefined"===typeof n.buttons&&(n.buttons=1),"undefined"===typeof n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),"undefined"===typeof n.width&&(n.width=n.radiusX||1),"undefined"===typeof n.height&&(n.height=n.radiusY||1),"undefined"===typeof n.tiltX&&(n.tiltX=0),"undefined"===typeof n.tiltY&&(n.tiltY=0),"undefined"===typeof n.pointerType&&(n.pointerType="touch"),"undefined"===typeof n.pointerId&&(n.pointerId=n.identifier||0),"undefined"===typeof n.pressure&&(n.pressure=n.force||.5),"undefined"===typeof n.twist&&(n.twist=0),"undefined"===typeof n.tangentialPressure&&(n.tangentialPressure=0),"undefined"===typeof n.layerX&&(n.layerX=n.offsetX=n.clientX),"undefined"===typeof n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=t.type,e.push(n)}else if(globalThis.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof globalThis.PointerEvent))e.push(t);else{const r=t;"undefined"===typeof r.isPrimary&&(r.isPrimary=!0),"undefined"===typeof r.width&&(r.width=1),"undefined"===typeof r.height&&(r.height=1),"undefined"===typeof r.tiltX&&(r.tiltX=0),"undefined"===typeof r.tiltY&&(r.tiltY=0),"undefined"===typeof r.pointerType&&(r.pointerType="mouse"),"undefined"===typeof r.pointerId&&(r.pointerId=L),"undefined"===typeof r.pressure&&(r.pressure=.5),"undefined"===typeof r.twist&&(r.twist=0),"undefined"===typeof r.tangentialPressure&&(r.tangentialPressure=0),r.isNormalized=!0,e.push(r)}return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=k[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}}U.extension={name:"events",type:[n.Ag.RendererSystem,n.Ag.CanvasRendererSystem]},n.XO.add(U);const G={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const n="boolean"===typeof r&&r||"object"===typeof r&&r.capture,i="function"===typeof e?void 0:e;t=n?`${t}capture`:t,e="function"===typeof e?e:e.handleEvent,this.on(t,e,i)},removeEventListener(t,e,r){const n="boolean"===typeof r&&r||"object"===typeof r&&r.capture,i="function"===typeof e?void 0:e;t=n?`${t}capture`:t,e="function"===typeof e?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof I))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};s.mixin(G);const j={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};s.mixin(j);const z=9,H=100,W=0,X=0,V=2,$=1,Y=-1e3,q=-1e3,K=2;class Z{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(n.Wp.isMobile.tablet||n.Wp.isMobile.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${H}px`,e.style.height=`${H}px`,e.style.position="absolute",e.style.top=`${W}px`,e.style.left=`${X}px`,e.style.zIndex=V.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${$}px`,t.style.height=`${$}px`,t.style.position="absolute",t.style.top=`${Y}px`,t.style.left=`${q}px`,t.style.zIndex=K.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}update(){const t=performance.now();if(n.Wp.isMobile.android.device&&t<this.androidUpdateCount)return;if(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen)return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:r,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,h=i/o*l,u=s/a*l;let c=this.div;c.style.left=`${e}px`,c.style.top=`${r}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const t=this.children[d];if(t.renderId!==this.renderId)t._accessibleActive=!1,n.Wp.removeItems(this.children,d,1),this.div.removeChild(t._accessibleDiv),this.pool.push(t._accessibleDiv),t._accessibleDiv=null,d--;else{c=t._accessibleDiv;let e=t.hitArea;const r=t.worldTransform;t.hitArea?(c.style.left=(r.tx+e.x*r.a)*h+"px",c.style.top=(r.ty+e.y*r.d)*u+"px",c.style.width=e.width*r.a*h+"px",c.style.height=e.height*r.d*u+"px"):(e=t.getBounds(),this.capHitArea(e),c.style.left=e.x*h+"px",c.style.top=e.y*u+"px",c.style.width=e.width*h+"px",c.style.height=e.height*u+"px",c.title!==t.accessibleTitle&&null!==t.accessibleTitle&&(c.title=t.accessibleTitle),c.getAttribute("aria-label")!==t.accessibleHint&&null!==t.accessibleHint&&c.setAttribute("aria-label",t.accessibleHint)),t.accessibleTitle===c.title&&t.tabIndex===c.tabIndex||(c.title=t.accessibleTitle,c.tabIndex=t.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:r}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>r&&(t.height=r-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${H}px`,e.style.height=`${H}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=V.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:r}=t.target,n=this.renderer.events.rootBoundary,i=Object.assign(new I(n),{target:r});n.rootTarget=this.renderer.lastObjectRendered,e.forEach(t=>n.dispatchEvent(i,t))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===z&&this.activate()}_onMouseMove(t){0===t.movementX&&0===t.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Z.extension={name:"accessibility",type:[n.Ag.RendererPlugin,n.Ag.CanvasRendererPlugin]},n.XO.add(Z);const J=class{constructor(t){this.stage=new u,t=Object.assign({forceCanvas:!1},t),this.renderer=(0,n.q5)(t),J._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const r=J._plugins.slice(0);r.reverse(),r.forEach(t=>{t.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let Q=J;Q._plugins=[],n.XO.handleByList(n.Ag.Application,Q._plugins);class tt{static init(t){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let t,e;if(this.cancelResize(),this._resizeTo===globalThis.window)t=globalThis.innerWidth,e=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:n}=this._resizeTo;t=r,e=n}this.renderer.resize(t,e),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}tt.extension=n.Ag.Application,n.XO.add(tt);const et={loader:n.Ag.LoadParser,resolver:n.Ag.ResolveParser,cache:n.Ag.CacheParser,detection:n.Ag.DetectionParser};n.XO.handle(n.Ag.Asset,t=>{const e=t.ref;Object.entries(et).filter(([t])=>!!e[t]).forEach(([t,r])=>n.XO.add(Object.assign(e[t],{extension:e[t].extension??r})))},t=>{const e=t.ref;Object.keys(et).filter(t=>!!e[t]).forEach(t=>n.XO.remove(e[t]))});r(1701);class rt{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<e;r++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function nt(t,e){const r=t.split("?")[0],i=n.Wp.path.extname(r).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}const it=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map(t=>"string"===typeof t?e(t):t):t);function st(t,e,r,n,i){const s=e[r];for(let o=0;o<s.length;o++){const a=s[o];r<e.length-1?st(t.replace(n[r],a),e,r+1,n,i):i.push(t.replace(n[r],a))}}function ot(t){const e=/\{(.*?)\}/g,r=t.match(e),n=[];if(r){const e=[];r.forEach(t=>{const r=t.substring(1,t.length-1).split(",");e.push(r)}),st(t,e,0,r,n)}else n.push(t);return n}class at{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const r=it(t);let i;for(let n=0;n<this.parsers.length;n++){const t=this.parsers[n];if(t.test(e)){i=t.getCacheableAssets(r,e);break}}i||(i={},r.forEach(t=>{i[t]=e}));const s=Object.keys(i),o={cacheKeys:s,keys:r};if(r.forEach(t=>{this._cacheMap.set(t,o)}),s.forEach(t=>{this._cache.has(t)&&this._cache.get(t)!==e&&console.warn("[Cache] already has key:",t),this._cache.set(t,i[t])}),e instanceof n.gP){const t=e;r.forEach(e=>{t.baseTexture!==n.gP.EMPTY.baseTexture&&n.t5.addToCache(t.baseTexture,e),n.gP.addToCache(t,e)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t))return void console.warn(`[Assets] Asset id ${t} was not found in the Cache`);const e=this._cacheMap.get(t),r=e.cacheKeys;r.forEach(t=>{this._cache.delete(t)}),e.keys.forEach(t=>{this._cacheMap.delete(t)})}get parsers(){return this._parsers}}const lt=new at,ht=t=>!Array.isArray(t);class ut{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(t,e){const r={promise:null,parser:null};return r.promise=(async()=>{let n=null;for(let i=0;i<this.parsers.length;i++){const s=this.parsers[i];if(s.load&&s.test?.(t,e,this)){n=await s.load(t,e,this),r.parser=s;break}}if(!r.parser)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has being added`),null;for(let t=0;t<this.parsers.length;t++){const i=this.parsers[t];i.parse&&i.parse&&await(i.testParse?.(n,e,this))&&(n=await i.parse(n,e,this)||n,r.parser=i)}return n})(),r}async load(t,e){let r=0;const i={},s=ht(t),o=it(t,t=>({src:t})),a=o.length,l=o.map(async t=>{const s=n.Wp.path.toAbsolute(t.src);if(!i[t.src])try{this.promiseCache[s]||(this.promiseCache[s]=this._getLoadPromiseAndParser(s,t)),i[t.src]=await this.promiseCache[s].promise,e&&e(++r/a)}catch(o){throw delete this.promiseCache[s],delete i[t.src],new Error(`[Loader.load] Failed to load ${s}.\n${o}`)}});return await Promise.all(l),s?i[o[0].src]:i}async unload(t){const e=it(t,t=>({src:t})),r=e.map(async t=>{const e=n.Wp.path.toAbsolute(t.src),r=this.promiseCache[e];if(r){const n=await r.promise;r.parser?.unload?.(n,t,this),delete this.promiseCache[e]}});await Promise.all(r)}get parsers(){return this._parsers}}var ct=(t=>(t[t["Low"]=0]="Low",t[t["Normal"]=1]="Normal",t[t["High"]=2]="High",t))(ct||{});const dt={extension:{type:n.Ag.LoadParser,priority:ct.Low},test(t){return".json"===n.Wp.path.extname(t).toLowerCase()},async load(t){const e=await n.W0.ADAPTER.fetch(t),r=await e.json();return r}};n.XO.add(dt);const ft={extension:{type:n.Ag.LoadParser,priority:ct.Low},test(t){return".txt"===n.Wp.path.extname(t).toLowerCase()},async load(t){const e=await n.W0.ADAPTER.fetch(t),r=await e.text();return r}};function pt(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}n.XO.add(ft);const mt=["normal","bold","100","200","300","400","500","600","700","800","900"],gt=[".ttf",".otf",".woff",".woff2"],yt=["font/ttf","font/otf","font/woff","font/woff2"];function vt(t){const e=n.Wp.path.extname(t),r=n.Wp.path.basename(t,e),i=r.replace(/(-|_)/g," "),s=i.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ");return s}const _t={extension:{type:n.Ag.LoadParser,priority:ct.Low},test(t){return pt(t,yt)||nt(t,gt)},async load(t,e){if(!globalThis.navigator.onLine)throw new Error("[loadWebFont] Cannot load font - navigator is offline");const r=n.W0.ADAPTER.getFontFaceSet();if(r){const n=[],i=e.data?.family??vt(t),s=e.data?.weights?.filter(t=>mt.includes(t))??["normal"],o=e.data??{};for(let e=0;e<s.length;e++){const a=s[e],l=new FontFace(i,`url(${encodeURI(t)})`,{...o,weight:a});await l.load(),r.add(l),n.push(l)}return 1===n.length?n[0]:n}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(t=>n.W0.ADAPTER.getFontFaceSet().delete(t))}};n.XO.add(_t);let xt,bt=0;const Et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",Tt={id:"checkImageBitmap",code:`\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('${Et}');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    `},wt={id:"loadImageBitmap",code:"\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };"};let At;class St{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(t=>{const e=URL.createObjectURL(new Blob([Tt.code],{type:"application/javascript"})),r=new Worker(e);r.addEventListener("message",n=>{r.terminate(),URL.revokeObjectURL(e),t(n.data)})})),this._isImageBitmapSupported}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){void 0===xt&&(xt=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<xt&&(At||(At=URL.createObjectURL(new Blob([wt.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(At),t.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){void 0!==t.error?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const r=new Promise((r,n)=>{this.queue.push({id:t,arguments:e,resolve:r,reject:n})});return this.next(),r}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),r=e.id;this.resolveHash[bt]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:bt++,id:r})}}const Ct=new St;function Rt(t,e,r){const i=new n.gP(t);return i.baseTexture.on("dispose",()=>{delete e.promiseCache[r]}),i}const It=[".jpeg",".jpg",".png",".webp",".avif"],Pt=["image/jpeg","image/png","image/webp","image/avif"];async function Mt(t){const e=await n.W0.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const r=await e.blob(),i=await createImageBitmap(r);return i}const Ot={extension:{type:n.Ag.LoadParser,priority:ct.High},config:{preferWorkers:!0},test(t){return pt(t,Pt)||nt(t,It)},async load(t,e,r){let i=null;i=globalThis.createImageBitmap?this.config.preferWorkers&&await Ct.isImageBitmapSupported()?await Ct.loadImageBitmap(t):await Mt(t):await new Promise(e=>{i=new Image,i.crossOrigin="anonymous",i.src=t,i.complete?e(i):i.onload=()=>{e(i)}});const s=new n.t5(i,{resolution:n.Wp.getResolutionOfUrl(t),...e.data});return s.resource.src=t,Rt(s,r,t)},unload(t){t.destroy(!0)}};n.XO.add(Ot);const Dt={extension:{type:n.Ag.LoadParser,priority:ct.High},test(t){return".svg"===n.Wp.path.extname(t).toLowerCase()},async testParse(t){return n.$f.test(t)},async parse(t,e,r){const i=new n.$f(t,e?.data?.resourceOptions),s=new n.t5(i,{resolution:n.Wp.getResolutionOfUrl(t),...e?.data});s.resource.src=t;const o=Rt(s,r,t);return e?.data?.resourceOptions?.autoLoad||await i.load(),o},async load(t,e){const r=await n.W0.ADAPTER.fetch(t);return r.text()},unload:Ot.unload};n.XO.add(Dt);r(116);class Ft{constructor(){this._bundleIdConnector="-",this._createBundleAssetId=(t,e)=>`${t}${this._bundleIdConnector}${e}`,this._extractAssetIdFromBundle=(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,""),this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this._preferredOrder=[],this._resolverHash={},this._assetMap={},this._rootPath=null,this._basePath=null,this._manifest=null}setDefaultSearchParams(t){if("string"===typeof t)this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(t,e){const r=[];Array.isArray(e)?e.forEach(e=>{if("string"===typeof e.name){const n=this._createBundleAssetId(t,e.name);r.push(n),this.add([e.name,n],e.srcs,e.data)}else{const n=e.name.map(e=>this._createBundleAssetId(t,e));n.forEach(t=>{r.push(t)}),this.add([...e.name,...n],e.srcs)}}):Object.keys(e).forEach(n=>{r.push(this._createBundleAssetId(t,n)),this.add([n,this._createBundleAssetId(t,n)],e[n])}),this._bundles[t]=r}add(t,e,r){const i=it(t);i.forEach(t=>{this._assetMap[t]&&console.warn(`[Resolver] already has key: ${t} overwriting`)}),Array.isArray(e)||(e="string"===typeof e?ot(e):[e]);const s=e.map(t=>{let e=t;if("string"===typeof t){let r=!1;for(let n=0;n<this._parsers.length;n++){const i=this._parsers[n];if(i.test(t)){e=i.parse(t),r=!0;break}}r||(e={src:t})}return e.format||(e.format=e.src.split(".").pop()),e.alias||(e.alias=i),(this._basePath||this._rootPath)&&(e.src=n.Wp.path.toAbsolute(e.src,this._basePath,this._rootPath)),e.src=this._appendDefaultSearchParams(e.src),e.data=e.data??r,e});i.forEach(t=>{this._assetMap[t]=s})}resolveBundle(t){const e=ht(t);t=it(t);const r={};return t.forEach(t=>{const e=this._bundles[t];if(e){const n=this.resolve(e),i={};for(const e in n){const r=n[e];i[this._extractAssetIdFromBundle(t,e)]=r}r[t]=i}}),e?r[t[0]]:r}resolveUrl(t){const e=this.resolve(t);if("string"!==typeof t){const t={};for(const r in e)t[r]=e[r].src;return t}return e.src}resolve(t){const e=ht(t);t=it(t);const r={};return t.forEach(t=>{if(!this._resolverHash[t])if(this._assetMap[t]){let e=this._assetMap[t];const r=this._getPreferredOrder(e),n=e[0];r?.priority.forEach(t=>{r.params[t].forEach(r=>{const n=e.filter(e=>!!e[t]&&e[t]===r);n.length&&(e=n)})}),this._resolverHash[t]=e[0]??n}else{let e=t;(this._basePath||this._rootPath)&&(e=n.Wp.path.toAbsolute(e,this._basePath,this._rootPath)),e=this._appendDefaultSearchParams(e),this._resolverHash[t]={src:e}}r[t]=this._resolverHash[t]}),e?r[t[0]]:r}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const e=t[0],r=this._preferredOrder.find(t=>t.params.format.includes(e.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}}class Bt{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Ft,this.loader=new ut,this.cache=lt,this._backgroundLoader=new rt(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let e=t.manifest;"string"===typeof e&&(e=await this.load(e)),this.resolver.addManifest(e)}const e=t.texturePreference?.resolution??1,r="number"===typeof e?[e]:e;let n=[];if(t.texturePreference?.format){const e=t.texturePreference?.format;n="string"===typeof e?[e]:e;for(const t of this._detections)await t.test()||(n=await t.remove(n))}else for(const i of this._detections)await i.test()&&(n=await i.add(n));this.resolver.prefer({params:{format:n,resolution:r}})}add(t,e,r){this.resolver.add(t,e,r)}async load(t,e){this._initialized||await this.init();const r=ht(t),n=it(t).map(t=>"string"!==typeof t?(this.resolver.add(t.src,t),t.src):t),i=this.resolver.resolve(n),s=await this._mapLoadToResolve(i,e);return r?s[n[0]]:s}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let r=!1;"string"===typeof t&&(r=!0,t=[t]);const n=this.resolver.resolveBundle(t),i={},s=Object.keys(n);let o=0,a=0;const l=()=>{e?.(++o/a)},h=s.map(t=>{const e=n[t];return a+=Object.keys(e).length,this._mapLoadToResolve(e,l).then(e=>{i[t]=e})});return await Promise.all(h),r?i[t[0]]:i}async backgroundLoad(t){this._initialized||await this.init(),"string"===typeof t&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),"string"===typeof t&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(t=>{this._backgroundLoader.add(Object.values(t))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if("string"===typeof t)return lt.get(t);const e={};for(let r=0;r<t.length;r++)e[r]=lt.get(t[r]);return e}async _mapLoadToResolve(t,e){const r=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const i=await this.loader.load(r,e);this._backgroundLoader.active=!0;const s={};return r.forEach((t,e)=>{const r=i[t.src],o=[t.src];t.alias&&o.push(...t.alias),s[n[e]]=r,lt.set(o,r)}),s}async unload(t){this._initialized||await this.init();const e=it(t).map(t=>"string"!==typeof t?t.src:t),r=this.resolver.resolve(e);await this._unloadFromResolved(r)}async unloadBundle(t){this._initialized||await this.init(),t=it(t);const e=this.resolver.resolveBundle(t),r=Object.keys(e).map(t=>this._unloadFromResolved(e[t]));await Promise.all(r)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(t=>{lt.remove(t.src)}),await this.loader.unload(e)}get detections(){return this._detections}get preferWorkers(){return Ot.config.preferWorkers}set preferWorkers(t){Ot.config.preferWorkers=t}}const Nt=new Bt;n.XO.handleByList(n.Ag.LoadParser,Nt.loader.parsers).handleByList(n.Ag.ResolveParser,Nt.resolver.parsers).handleByList(n.Ag.CacheParser,Nt.cache.parsers).handleByList(n.Ag.DetectionParser,Nt.detections);r(1148);const Lt={extension:n.Ag.CacheParser,test:t=>Array.isArray(t)&&t.every(t=>t instanceof n.gP),getCacheableAssets:(t,e)=>{const r={};return t.forEach(t=>{e.forEach((e,n)=>{r[t+(0===n?"":n+1)]=e})}),r}};n.XO.add(Lt);const kt={extension:{type:n.Ag.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",e=await n.W0.ADAPTER.fetch(t).then(t=>t.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"avif"],remove:async t=>t.filter(t=>"avif"!==t)};n.XO.add(kt);const Ut={extension:{type:n.Ag.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",e=await n.W0.ADAPTER.fetch(t).then(t=>t.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"webp"],remove:async t=>t.filter(t=>"webp"!==t)};n.XO.add(Ut);const Gt=["png","jpg","jpeg"],jt={extension:{type:n.Ag.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...Gt],remove:async t=>t.filter(t=>!Gt.includes(t))};n.XO.add(jt);const zt={extension:n.Ag.ResolveParser,test:Ot.test,parse:t=>({resolution:parseFloat(n.W0.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})};n.XO.add(zt);const Ht=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t};var Wt=(t=>(t[t["COMPRESSED_RGB_S3TC_DXT1_EXT"]=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t["COMPRESSED_RGBA_S3TC_DXT1_EXT"]=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t["COMPRESSED_RGBA_S3TC_DXT3_EXT"]=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t["COMPRESSED_RGBA_S3TC_DXT5_EXT"]=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t["COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT"]=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t["COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT"]=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t["COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT"]=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t["COMPRESSED_SRGB_S3TC_DXT1_EXT"]=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t["COMPRESSED_R11_EAC"]=37488]="COMPRESSED_R11_EAC",t[t["COMPRESSED_SIGNED_R11_EAC"]=37489]="COMPRESSED_SIGNED_R11_EAC",t[t["COMPRESSED_RG11_EAC"]=37490]="COMPRESSED_RG11_EAC",t[t["COMPRESSED_SIGNED_RG11_EAC"]=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t["COMPRESSED_RGB8_ETC2"]=37492]="COMPRESSED_RGB8_ETC2",t[t["COMPRESSED_RGBA8_ETC2_EAC"]=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t["COMPRESSED_SRGB8_ETC2"]=37493]="COMPRESSED_SRGB8_ETC2",t[t["COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"]=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t["COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2"]=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t["COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2"]=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t["COMPRESSED_RGB_PVRTC_4BPPV1_IMG"]=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t["COMPRESSED_RGBA_PVRTC_4BPPV1_IMG"]=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t["COMPRESSED_RGB_PVRTC_2BPPV1_IMG"]=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t["COMPRESSED_RGBA_PVRTC_2BPPV1_IMG"]=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t["COMPRESSED_RGB_ETC1_WEBGL"]=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t["COMPRESSED_RGB_ATC_WEBGL"]=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t["COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL"]=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t["COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"]=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t["COMPRESSED_RGBA_ASTC_4x4_KHR"]=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(Wt||{});const Xt={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let Vt,$t;function Yt(){$t={s3tc:Vt.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Vt.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Vt.getExtension("WEBGL_compressed_texture_etc"),etc1:Vt.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Vt.getExtension("WEBGL_compressed_texture_pvrtc")||Vt.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Vt.getExtension("WEBGL_compressed_texture_atc"),astc:Vt.getExtension("WEBGL_compressed_texture_astc")}}const qt={extension:{type:n.Ag.DetectionParser,priority:2},test:async()=>{const t=n.W0.ADAPTER.createCanvas(),e=t.getContext("webgl");return e?(Vt=e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{$t||Yt();const e=[];for(const r in $t){const t=$t[r];t&&e.push(r)}return[...e,...t]},remove:async t=>($t||Yt(),t.filter(t=>!(t in $t)))};n.XO.add(qt);class Kt extends n.dZ{constructor(t,e={width:1,height:1,autoLoad:!0}){let r,i;"string"===typeof t?(r=t,i=new Uint8Array):(r=null,i=t),super(i,e),this.origin=r,this.buffer=i?new n.u3(i):null,this.origin&&!1!==e.autoLoad&&this.load(),i?.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}async load(){const t=await fetch(this.origin),e=await t.blob(),r=await e.arrayBuffer();return this.data=new Uint32Array(r),this.buffer=new n.u3(r),this.loaded=!0,this.onBlobLoaded(r),this.update(),this}}class Zt extends Kt{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=Zt._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||Zt._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,r){const n=t.gl,i=t.context.extensions[this._extension];if(!i)throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let s=0,o=this.levels;s<o;s++){const{levelID:t,levelWidth:e,levelHeight:r,levelBuffer:i}=this._levelBuffers[s];n.compressedTexImage2D(n.TEXTURE_2D,t,this.format,e,r,0,i)}return!0}onBlobLoaded(){this._levelBuffers=Zt._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,e,r,n,i,s,o){const a=new Array(r);let l=t.byteOffset,h=s,u=o,c=h+n-1&~(n-1),d=u+i-1&~(i-1),f=c*d*Xt[e];for(let p=0;p<r;p++)a[p]={levelID:p,levelWidth:r>1?h:c,levelHeight:r>1?u:d,levelBuffer:new Uint8Array(t.buffer,l,f)},l+=f,h=h>>1||1,u=u>>1||1,c=h+n-1&~(n-1),d=u+i-1&~(i-1),f=c*d*Xt[e];return a}}const Jt=4,Qt=124,te=32,ee=20,re=542327876,ne={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},ie={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},se={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4};const oe=1,ae=2,le=4,he=64,ue=512,ce=131072,de=827611204,fe=861165636,pe=894720068,me=808540228,ge=4,ye={[de]:Wt.COMPRESSED_RGBA_S3TC_DXT1_EXT,[fe]:Wt.COMPRESSED_RGBA_S3TC_DXT3_EXT,[pe]:Wt.COMPRESSED_RGBA_S3TC_DXT5_EXT},ve={[70]:Wt.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:Wt.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:Wt.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:Wt.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:Wt.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:Wt.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:Wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:Wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:Wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function _e(t){const e=new Uint32Array(t),r=e[0];if(r!==re)throw new Error("Invalid DDS file magic word");const n=new Uint32Array(t,0,Qt/Uint32Array.BYTES_PER_ELEMENT),i=n[ne.HEIGHT],s=n[ne.WIDTH],o=n[ne.MIPMAP_COUNT],a=new Uint32Array(t,ne.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,te/Uint32Array.BYTES_PER_ELEMENT),l=a[oe];if(l&le){const r=a[ie.FOURCC];if(r!==me){const e=ye[r],n=Jt+Qt,a=new Uint8Array(t,n),l=new Zt(a,{format:e,width:s,height:i,levels:o});return[l]}const n=Jt+Qt,l=new Uint32Array(e.buffer,n,ee/Uint32Array.BYTES_PER_ELEMENT),h=l[se.DXGI_FORMAT],u=l[se.RESOURCE_DIMENSION],c=l[se.MISC_FLAG],d=l[se.ARRAY_SIZE],f=ve[h];if(void 0===f)throw new Error(`DDSParser cannot parse texture data with DXGI format ${h}`);if(c===ge)throw new Error("DDSParser does not support cubemap textures");if(6===u)throw new Error("DDSParser does not supported 3D texture data");const p=new Array,m=Jt+Qt+ee;if(1===d)p.push(new Uint8Array(t,m));else{const e=Xt[f];let r=0,n=s,a=i;for(let t=0;t<o;t++){const t=Math.max(1,n+3&-4),i=Math.max(1,a+3&-4),s=t*i*e;r+=s,n>>>=1,a>>>=1}let l=m;for(let i=0;i<d;i++)p.push(new Uint8Array(t,l,r)),l+=r}return p.map(t=>new Zt(t,{format:f,width:s,height:i,levels:o}))}if(l&he)throw new Error("DDSParser does not support uncompressed texture data.");if(l&ue)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(l&ce)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(l&ae)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}const xe=[171,75,84,88,32,49,49,187,13,10,26,10],be=67305985,Ee={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Te=64,we={[n.QE.UNSIGNED_BYTE]:1,[n.QE.UNSIGNED_SHORT]:2,[n.QE.INT]:4,[n.QE.UNSIGNED_INT]:4,[n.QE.FLOAT]:4,[n.QE.HALF_FLOAT]:8},Ae={[n.hR.RGBA]:4,[n.hR.RGB]:3,[n.hR.RG]:2,[n.hR.RED]:1,[n.hR.LUMINANCE]:1,[n.hR.LUMINANCE_ALPHA]:2,[n.hR.ALPHA]:1},Se={[n.QE.UNSIGNED_SHORT_4_4_4_4]:2,[n.QE.UNSIGNED_SHORT_5_5_5_1]:2,[n.QE.UNSIGNED_SHORT_5_6_5]:2};function Ce(t,e,r=!1){const i=new DataView(e);if(!Re(t,i))return null;const s=i.getUint32(Ee.ENDIANNESS,!0)===be,o=i.getUint32(Ee.GL_TYPE,s),a=i.getUint32(Ee.GL_FORMAT,s),l=i.getUint32(Ee.GL_INTERNAL_FORMAT,s),h=i.getUint32(Ee.PIXEL_WIDTH,s),u=i.getUint32(Ee.PIXEL_HEIGHT,s)||1,c=i.getUint32(Ee.PIXEL_DEPTH,s)||1,d=i.getUint32(Ee.NUMBER_OF_ARRAY_ELEMENTS,s)||1,f=i.getUint32(Ee.NUMBER_OF_FACES,s),p=i.getUint32(Ee.NUMBER_OF_MIPMAP_LEVELS,s),m=i.getUint32(Ee.BYTES_OF_KEY_VALUE_DATA,s);if(0===u||1!==c)throw new Error("Only 2D textures are supported");if(1!==f)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==d)throw new Error("WebGL does not support array textures");const g=4,y=4,v=h+3&-4,_=u+3&-4,x=new Array(d);let b,E=h*u;if(0===o&&(E=v*_),b=0!==o?we[o]?we[o]*Ae[a]:Se[o]:Xt[l],void 0===b)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const T=r?Pe(i,m,s):null,w=E*b;let A=w,S=h,C=u,R=v,I=_,P=Te+m;for(let n=0;n<p;n++){const t=i.getUint32(P,s);let r=P+4;for(let i=0;i<d;i++){let t=x[i];t||(t=x[i]=new Array(p)),t[n]={levelID:n,levelWidth:p>1||0!==o?S:R,levelHeight:p>1||0!==o?C:I,levelBuffer:new Uint8Array(e,r,A)},r+=A}P+=t+4,P=P%4!==0?P+4-P%4:P,S=S>>1||1,C=C>>1||1,R=S+g-1&~(g-1),I=C+y-1&~(y-1),A=R*I*b}return 0!==o?{uncompressed:x.map(t=>{let e=t[0].levelBuffer,r=!1;return o===n.QE.FLOAT?e=new Float32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4):o===n.QE.UNSIGNED_INT?(r=!0,e=new Uint32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)):o===n.QE.INT&&(r=!0,e=new Int32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)),{resource:new n.dZ(e,{width:t[0].levelWidth,height:t[0].levelHeight}),type:o,format:r?Ie(a):a}}),kvData:T}:{compressed:x.map(t=>new Zt(null,{format:l,width:h,height:u,levels:p,levelBuffers:t})),kvData:T}}function Re(t,e){for(let r=0;r<xe.length;r++)if(e.getUint8(r)!==xe[r])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function Ie(t){switch(t){case n.hR.RGBA:return n.hR.RGBA_INTEGER;case n.hR.RGB:return n.hR.RGB_INTEGER;case n.hR.RG:return n.hR.RG_INTEGER;case n.hR.RED:return n.hR.RED_INTEGER;default:return t}}function Pe(t,e,r){const n=new Map;let i=0;while(i<e){const s=t.getUint32(Te+i,r),o=Te+i+4,a=3-(s+3)%4;if(0===s||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s;l++)if(0===t.getUint8(o+l))break;if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=(new TextDecoder).decode(new Uint8Array(t.buffer,o,l)),u=new DataView(t.buffer,o+l+1,s-l-1);n.set(h,u),i+=4+s+a}return n}const Me={extension:{type:n.Ag.LoadParser,priority:ct.High},test(t){return nt(t,".dds")},async load(t,e,r){const i=await n.W0.ADAPTER.fetch(t),s=await i.arrayBuffer(),o=_e(s),a=o.map(i=>{const s=new n.t5(i,{mipmap:n.E8.OFF,alphaMode:n.Gk.NO_PREMULTIPLIED_ALPHA,resolution:n.Wp.getResolutionOfUrl(t),...e.data});return Rt(s,r,t)});return 1===a.length?a[0]:a},unload(t){Array.isArray(t)?t.forEach(t=>t.destroy(!0)):t.destroy(!0)}};n.XO.add(Me);const Oe={extension:{type:n.Ag.LoadParser,priority:ct.High},test(t){return nt(t,".ktx")},async load(t,e,r){const i=await n.W0.ADAPTER.fetch(t),s=await i.arrayBuffer(),{compressed:o,uncompressed:a,kvData:l}=Ce(t,s),h=o??a,u={mipmap:n.E8.OFF,alphaMode:n.Gk.NO_PREMULTIPLIED_ALPHA,resolution:n.Wp.getResolutionOfUrl(t),...e.data},c=h.map(e=>{h===a&&Object.assign(u,{type:e.type,format:e.format});const i=new n.t5(e,u);return i.ktxKeyValueData=l,Rt(i,r,t)});return 1===c.length?c[0]:c},unload(t){Array.isArray(t)?t.forEach(t=>t.destroy(!0)):t.destroy(!0)}};n.XO.add(Oe);const De={extension:n.Ag.ResolveParser,test:t=>{const e=t.split("?")[0],r=e.split(".").pop();return["basis","ktx","dds"].includes(r)},parse:t=>{const e=t.split("?")[0],r=e.split(".").pop();if("ktx"===r){const e=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(e.some(e=>t.endsWith(e)))return{resolution:parseFloat(n.W0.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e.find(e=>t.endsWith(e)),src:t}}return{resolution:parseFloat(n.W0.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t}}};n.XO.add(De);const Fe=new n.M_,Be=4,Ne=class{constructor(t){this.renderer=t}async image(t,e,r){const n=new Image;return n.src=await this.base64(t,e,r),n}async base64(t,e,r){const n=this.canvas(t);if(void 0!==n.toDataURL)return n.toDataURL(e,r);if(void 0!==n.convertToBlob){const t=await n.convertToBlob({type:e,quality:r});return await new Promise(e=>{const r=new FileReader;r.onload=()=>e(r.result),r.readAsDataURL(t)})}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")}canvas(t,e){const r=this.renderer;let i,s,o=!1,a=!1;t&&(t instanceof n.Y7?s=t:(s=this.renderer.generateTexture(t),a=!0)),s?(i=s.baseTexture.resolution,e=e??s.frame,o=!1,r.renderTexture.bind(s)):(i=r.resolution,e||(e=Fe,e.width=r.width,e.height=r.height),o=!0,r.renderTexture.bind(null));const l=Math.round(e.width*i),h=Math.round(e.height*i);let u=new n.Wp.CanvasRenderTarget(l,h,1);const c=new Uint8Array(Be*l*h),d=r.gl;d.readPixels(Math.round(e.x*i),Math.round(e.y*i),l,h,d.RGBA,d.UNSIGNED_BYTE,c);const f=u.context.getImageData(0,0,l,h);if(Ne.arrayPostDivide(c,f.data),u.context.putImageData(f,0,0),o){const t=new n.Wp.CanvasRenderTarget(u.width,u.height,1);t.context.scale(1,-1),t.context.drawImage(u.canvas,0,-h),u.destroy(),u=t}return a&&s.destroy(!0),u.canvas}pixels(t,e){const r=this.renderer;let i,s,o=!1;t&&(t instanceof n.Y7?s=t:(s=this.renderer.generateTexture(t),o=!0)),s?(i=s.baseTexture.resolution,e=e??s.frame,r.renderTexture.bind(s)):(i=r.resolution,e||(e=Fe,e.width=r.width,e.height=r.height),r.renderTexture.bind(null));const a=Math.round(e.width*i),l=Math.round(e.height*i),h=new Uint8Array(Be*a*l),u=r.gl;return u.readPixels(Math.round(e.x*i),Math.round(e.y*i),a,l,u.RGBA,u.UNSIGNED_BYTE,h),o&&s.destroy(!0),Ne.arrayPostDivide(h,h),h}destroy(){this.renderer=null}static arrayPostDivide(t,e){for(let r=0;r<t.length;r+=4){const n=e[r+3]=t[r+3];0!==n?(e[r]=Math.round(Math.min(255*t[r]/n,255)),e[r+1]=Math.round(Math.min(255*t[r+1]/n,255)),e[r+2]=Math.round(Math.min(255*t[r+2]/n,255))):(e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2])}}};let Le=Ne;Le.extension={name:"extract",type:n.Ag.RendererSystem},n.XO.add(Le);const ke={build(t){const e=t.points;let r,i,s,o,a,l;if(t.type===n.HY.CIRC){const e=t.shape;r=e.x,i=e.y,a=l=e.radius,s=o=0}else if(t.type===n.HY.ELIP){const e=t.shape;r=e.x,i=e.y,a=e.width,l=e.height,s=o=0}else{const e=t.shape,n=e.width/2,h=e.height/2;r=e.x+n,i=e.y+h,a=l=Math.max(0,Math.min(e.radius,Math.min(n,h))),s=n-a,o=h-l}if(!(a>=0&&l>=0&&s>=0&&o>=0))return void(e.length=0);const h=Math.ceil(2.3*Math.sqrt(a+l)),u=8*h+(s?4:0)+(o?4:0);if(e.length=u,0===u)return;if(0===h)return e.length=8,e[0]=e[6]=r+s,e[1]=e[3]=i+o,e[2]=e[4]=r-s,void(e[5]=e[7]=i-o);let c=0,d=4*h+(s?2:0)+2,f=d,p=u;{const t=s+a,n=o,l=r+t,h=r-t,u=i+n;if(e[c++]=l,e[c++]=u,e[--d]=u,e[--d]=h,o){const t=i-n;e[f++]=h,e[f++]=t,e[--p]=t,e[--p]=l}}for(let n=1;n<h;n++){const t=Math.PI/2*(n/h),u=s+Math.cos(t)*a,m=o+Math.sin(t)*l,g=r+u,y=r-u,v=i+m,_=i-m;e[c++]=g,e[c++]=v,e[--d]=v,e[--d]=y,e[f++]=y,e[f++]=_,e[--p]=_,e[--p]=g}{const t=s,n=o+l,a=r+t,h=r-t,u=i+n,d=i-n;e[c++]=a,e[c++]=u,e[--p]=d,e[--p]=a,s&&(e[c++]=h,e[c++]=u,e[--p]=d,e[--p]=h)}},triangulate(t,e){const r=t.points,i=e.points,s=e.indices;if(0===r.length)return;let o=i.length/2;const a=o;let l,h;if(t.type!==n.HY.RREC){const e=t.shape;l=e.x,h=e.y}else{const e=t.shape;l=e.x+e.width/2,h=e.y+e.height/2}const u=t.matrix;i.push(t.matrix?u.a*l+u.c*h+u.tx:l,t.matrix?u.b*l+u.d*h+u.ty:h),o++,i.push(r[0],r[1]);for(let n=2;n<r.length;n+=2)i.push(r[n],r[n+1]),s.push(o++,a,o);s.push(a+1,a,o)}};function Ue(t,e=!1){const r=t.length;if(r<6)return;let n=0;for(let i=0,s=t[r-2],o=t[r-1];i<r;i+=2){const e=t[i],r=t[i+1];n+=(e-s)*(r+o),s=e,o=r}if(!e&&n>0||e&&n<=0){const e=r/2;for(let n=e+e%2;n<r;n+=2){const e=r-n-2,i=r-n-1,s=n,o=n+1;[t[e],t[s]]=[t[s],t[e]],[t[i],t[o]]=[t[o],t[i]]}}}const Ge={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let r=t.points;const i=t.holes,s=e.points,o=e.indices;if(r.length>=6){Ue(r,!1);const t=[];for(let n=0;n<i.length;n++){const e=i[n];Ue(e.points,!0),t.push(r.length/2),r=r.concat(e.points)}const e=n.Wp.earcut(r,t,2);if(!e)return;const a=s.length/2;for(let r=0;r<e.length;r+=3)o.push(e[r]+a),o.push(e[r+1]+a),o.push(e[r+2]+a);for(let n=0;n<r.length;n++)s.push(r[n])}}},je={build(t){const e=t.shape,r=e.x,n=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(r,n,r+i,n,r+i,n+s,r,n+s)},triangulate(t,e){const r=t.points,n=e.points;if(0===r.length)return;const i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},ze={build(t){ke.build(t)},triangulate(t,e){ke.triangulate(t,e)}};var He=(t=>(t["MITER"]="miter",t["BEVEL"]="bevel",t["ROUND"]="round",t))(He||{}),We=(t=>(t["BUTT"]="butt",t["ROUND"]="round",t["SQUARE"]="square",t))(We||{});const Xe={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class Ve{static curveTo(t,e,r,n,i,s){const o=s[s.length-2],a=s[s.length-1],l=a-e,h=o-t,u=n-e,c=r-t,d=Math.abs(l*c-h*u);if(d<1e-8||0===i)return s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e),null;const f=l*l+h*h,p=u*u+c*c,m=l*u+h*c,g=i*Math.sqrt(f)/d,y=i*Math.sqrt(p)/d,v=g*m/f,_=y*m/p,x=g*c+y*h,b=g*u+y*l,E=h*(y+v),T=l*(y+v),w=c*(g+_),A=u*(g+_),S=Math.atan2(T-b,E-x),C=Math.atan2(A-b,w-x);return{cx:x+t,cy:b+e,radius:i,startAngle:S,endAngle:C,anticlockwise:h*u>c*l}}static arc(t,e,r,i,s,o,a,l,h){const u=a-o,c=Xe._segmentsCount(Math.abs(u)*s,40*Math.ceil(Math.abs(u)/n.TO)),d=u/(2*c),f=2*d,p=Math.cos(d),m=Math.sin(d),g=c-1,y=g%1/g;for(let n=0;n<=g;++n){const t=n+y*n,e=d+o+f*t,a=Math.cos(e),l=-Math.sin(e);h.push((p*a+m*l)*s+r,(p*-l+m*a)*s+i)}}}class $e{static curveLength(t,e,r,n,i,s,o,a){const l=10;let h=0,u=0,c=0,d=0,f=0,p=0,m=0,g=0,y=0,v=0,_=0,x=t,b=e;for(let E=1;E<=l;++E)u=E/l,c=u*u,d=c*u,f=1-u,p=f*f,m=p*f,g=m*t+3*p*u*r+3*f*c*i+d*o,y=m*e+3*p*u*n+3*f*c*s+d*a,v=x-g,_=b-y,x=g,b=y,h+=Math.sqrt(v*v+_*_);return h}static curveTo(t,e,r,n,i,s,o){const a=o[o.length-2],l=o[o.length-1];o.length-=2;const h=Xe._segmentsCount($e.curveLength(a,l,t,e,r,n,i,s));let u=0,c=0,d=0,f=0,p=0;o.push(a,l);for(let m=1,g=0;m<=h;++m)g=m/h,u=1-g,c=u*u,d=c*u,f=g*g,p=f*g,o.push(d*a+3*c*g*t+3*u*f*r+p*i,d*l+3*c*g*e+3*u*f*n+p*s)}}function Ye(t,e,r,n,i,s,o,a){const l=t-r*i,h=e-n*i,u=t+r*s,c=e+n*s;let d,f;o?(d=n,f=-r):(d=-n,f=r);const p=l+d,m=h+f,g=u+d,y=c+f;return a.push(p,m),a.push(g,y),2}function qe(t,e,r,n,i,s,o,a){const l=r-t,h=n-e;let u=Math.atan2(l,h),c=Math.atan2(i-t,s-e);a&&u<c?u+=2*Math.PI:!a&&u>c&&(c+=2*Math.PI);let d=u;const f=c-u,p=Math.abs(f),m=Math.sqrt(l*l+h*h),g=1+(15*p*Math.sqrt(m)/Math.PI|0),y=f/g;if(d+=y,a){o.push(t,e),o.push(r,n);for(let r=1,n=d;r<g;r++,n+=y)o.push(t,e),o.push(t+Math.sin(n)*m,e+Math.cos(n)*m);o.push(t,e),o.push(i,s)}else{o.push(r,n),o.push(t,e);for(let r=1,n=d;r<g;r++,n+=y)o.push(t+Math.sin(n)*m,e+Math.cos(n)*m),o.push(t,e);o.push(i,s),o.push(t,e)}return 2*g}function Ke(t,e){const r=t.shape;let i=t.points||r.points.slice();const s=e.closePointEps;if(0===i.length)return;const o=t.lineStyle,a=new n.bR(i[0],i[1]),l=new n.bR(i[i.length-2],i[i.length-1]),h=r.type!==n.HY.POLY||r.closeStroke,u=Math.abs(a.x-l.x)<s&&Math.abs(a.y-l.y)<s;if(h){i=i.slice(),u&&(i.pop(),i.pop(),l.set(i[i.length-2],i[i.length-1]));const t=.5*(a.x+l.x),e=.5*(l.y+a.y);i.unshift(t,e),i.push(t,e)}const c=e.points,d=i.length/2;let f=i.length;const p=c.length/2,m=o.width/2,g=m*m,y=o.miterLimit*o.miterLimit;let v=i[0],_=i[1],x=i[2],b=i[3],E=0,T=0,w=-(_-b),A=v-x,S=0,C=0,R=Math.sqrt(w*w+A*A);w/=R,A/=R,w*=m,A*=m;const I=o.alignment,P=2*(1-I),M=2*I;h||(o.cap===We.ROUND?f+=qe(v-w*(P-M)*.5,_-A*(P-M)*.5,v-w*P,_-A*P,v+w*M,_+A*M,c,!0)+2:o.cap===We.SQUARE&&(f+=Ye(v,_,w,A,P,M,!0,c))),c.push(v-w*P,_-A*P),c.push(v+w*M,_+A*M);for(let n=1;n<d-1;++n){v=i[2*(n-1)],_=i[2*(n-1)+1],x=i[2*n],b=i[2*n+1],E=i[2*(n+1)],T=i[2*(n+1)+1],w=-(_-b),A=v-x,R=Math.sqrt(w*w+A*A),w/=R,A/=R,w*=m,A*=m,S=-(b-T),C=x-E,R=Math.sqrt(S*S+C*C),S/=R,C/=R,S*=m,C*=m;const t=x-v,e=_-b,r=x-E,s=T-b,a=t*r+e*s,l=e*r-s*t,h=l<0;if(Math.abs(l)<.001*Math.abs(a)){c.push(x-w*P,b-A*P),c.push(x+w*M,b+A*M),a>=0&&(o.join===He.ROUND?f+=qe(x,b,x-w*P,b-A*P,x-S*P,b-C*P,c,!1)+4:f+=2,c.push(x-S*M,b-C*M),c.push(x+S*P,b+C*P));continue}const u=(-w+v)*(-A+b)-(-w+x)*(-A+_),d=(-S+E)*(-C+b)-(-S+x)*(-C+T),p=(t*d-r*u)/l,I=(s*u-e*d)/l,O=(p-x)*(p-x)+(I-b)*(I-b),D=x+(p-x)*P,F=b+(I-b)*P,B=x-(p-x)*M,N=b-(I-b)*M,L=Math.min(t*t+e*e,r*r+s*s),k=h?P:M,U=L+k*k*g,G=O<=U;G?o.join===He.BEVEL||O/g>y?(h?(c.push(D,F),c.push(x+w*M,b+A*M),c.push(D,F),c.push(x+S*M,b+C*M)):(c.push(x-w*P,b-A*P),c.push(B,N),c.push(x-S*P,b-C*P),c.push(B,N)),f+=2):o.join===He.ROUND?h?(c.push(D,F),c.push(x+w*M,b+A*M),f+=qe(x,b,x+w*M,b+A*M,x+S*M,b+C*M,c,!0)+4,c.push(D,F),c.push(x+S*M,b+C*M)):(c.push(x-w*P,b-A*P),c.push(B,N),f+=qe(x,b,x-w*P,b-A*P,x-S*P,b-C*P,c,!1)+4,c.push(x-S*P,b-C*P),c.push(B,N)):(c.push(D,F),c.push(B,N)):(c.push(x-w*P,b-A*P),c.push(x+w*M,b+A*M),o.join===He.ROUND?f+=h?qe(x,b,x+w*M,b+A*M,x+S*M,b+C*M,c,!0)+2:qe(x,b,x-w*P,b-A*P,x-S*P,b-C*P,c,!1)+2:o.join===He.MITER&&O/g<=y&&(h?(c.push(B,N),c.push(B,N)):(c.push(D,F),c.push(D,F)),f+=2),c.push(x-S*P,b-C*P),c.push(x+S*M,b+C*M),f+=2)}v=i[2*(d-2)],_=i[2*(d-2)+1],x=i[2*(d-1)],b=i[2*(d-1)+1],w=-(_-b),A=v-x,R=Math.sqrt(w*w+A*A),w/=R,A/=R,w*=m,A*=m,c.push(x-w*P,b-A*P),c.push(x+w*M,b+A*M),h||(o.cap===We.ROUND?f+=qe(x-w*(P-M)*.5,b-A*(P-M)*.5,x-w*P,b-A*P,x+w*M,b+A*M,c,!1)+2:o.cap===We.SQUARE&&(f+=Ye(x,b,w,A,P,M,!1,c)));const O=e.indices,D=Xe.epsilon*Xe.epsilon;for(let n=p;n<f+p-2;++n)v=c[2*n],_=c[2*n+1],x=c[2*(n+1)],b=c[2*(n+1)+1],E=c[2*(n+2)],T=c[2*(n+2)+1],Math.abs(v*(b-T)+x*(T-_)+E*(_-b))<D||O.push(n,n+1,n+2)}function Ze(t,e){let r=0;const i=t.shape,s=t.points||i.points,o=i.type!==n.HY.POLY||i.closeStroke;if(0===s.length)return;const a=e.points,l=e.indices,h=s.length/2,u=a.length/2;let c=u;for(a.push(s[0],s[1]),r=1;r<h;r++)a.push(s[2*r],s[2*r+1]),l.push(c,c+1),c++;o&&l.push(c,u)}function Je(t,e){t.lineStyle.native?Ze(t,e):Ke(t,e)}class Qe{static curveLength(t,e,r,n,i,s){const o=t-2*r+i,a=e-2*n+s,l=2*r-2*t,h=2*n-2*e,u=4*(o*o+a*a),c=4*(o*l+a*h),d=l*l+h*h,f=2*Math.sqrt(u+c+d),p=Math.sqrt(u),m=2*u*p,g=2*Math.sqrt(d),y=c/p;return(m*f+p*c*(f-g)+(4*d*u-c*c)*Math.log((2*p+y+f)/(y+g)))/(4*m)}static curveTo(t,e,r,n,i){const s=i[i.length-2],o=i[i.length-1],a=Xe._segmentsCount(Qe.curveLength(s,o,t,e,r,n));let l=0,h=0;for(let u=1;u<=a;++u){const c=u/a;l=s+(t-s)*c,h=o+(e-o)*c,i.push(l+(t+(r-t)*c-l)*c,h+(e+(n-e)*c-h)*c)}}}const tr={[n.HY.POLY]:Ge,[n.HY.CIRC]:ke,[n.HY.ELIP]:ke,[n.HY.RECT]:je,[n.HY.RREC]:ze},er=[],rr=[];class nr{constructor(t,e=null,r=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=n,this.type=t.type}clone(){return new nr(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class ir{constructor(){this.reset()}begin(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const sr=new n.bR,or=class extends n.JH{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new i,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),rr.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),er.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,r=null,n=null){const i=new nr(t,e,r,n);return this.graphicsData.push(i),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const r=new nr(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let r=0;r<e.length;++r){const n=e[r];if(n.fillStyle.visible&&(n.shape&&(n.matrix?n.matrix.applyInverse(t,sr):sr.copyFrom(t),n.shape.contains(sr.x,sr.y)))){let t=!1;if(n.holes)for(let e=0;e<n.holes.length;e++){const r=n.holes[e];if(r.shape.contains(sr.x,sr.y)){t=!0;break}}if(!t)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let r=null,i=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],i=r.style);for(let l=this.shapeIndex;l<e.length;l++){this.shapeIndex++;const s=e[l],o=s.fillStyle,a=s.lineStyle,h=tr[s.type];h.build(s),s.matrix&&this.transformPoints(s.points,s.matrix),(o.visible||a.visible)&&this.processHoles(s.holes);for(let e=0;e<2;e++){const l=0===e?o:a;if(!l.visible)continue;const h=l.texture.baseTexture,u=this.indices.length,c=this.points.length/2;h.wrapMode=n.uR.REPEAT,0===e?this.processFill(s):this.processLine(s);const d=this.points.length/2-c;0!==d&&(r&&!this._compareStyles(i,l)&&(r.end(u,c),r=null),r||(r=er.pop()||new ir,r.begin(l,u,c),this.batches.push(r),i=l),this.addUvs(this.points,t,l.texture,c,d,l.matrix))}}const s=this.indices.length,o=this.points.length/2;if(r&&r.end(s,o),0===this.batches.length)return void(this.batchable=!0);const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native===!!e.native))}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const e=this.graphicsData[t],r=e.fillStyle,n=e.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,r=t.length;e<r;e++){const r=t[e];for(let t=0;t<r.size;t++){const e=r.start+t;this.indicesUint16[e]=this.indicesUint16[e]-r.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*or.BATCHABLE_SIZE}buildDrawCalls(){let t=++n.t5._globalBatch;for(let n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),rr.push(this.drawCalls[n]);this.drawCalls.length=0;const e=this.colors,r=this.textureIds;let i=rr.pop();i||(i=new n.hq,i.texArray=new n.cc),i.texArray.count=0,i.start=0,i.size=0,i.type=n._4.TRIANGLES;let s=0,o=null,a=0,l=!1,h=n._4.TRIANGLES,u=0;this.drawCalls.push(i);for(let c=0;c<this.batches.length;c++){const d=this.batches[c],f=8,p=d.style,m=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,h=l?n._4.LINES:n._4.TRIANGLES,o=null,s=f,t++),o!==m&&(o=m,m._batchEnabled!==t&&(s===f&&(t++,s=0,i.size>0&&(i=rr.pop(),i||(i=new n.hq,i.texArray=new n.cc),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=h),m.touched=1,m._batchEnabled=t,m._batchLocation=s,m.wrapMode=n.uR.REPEAT,i.texArray.elements[i.texArray.count++]=m,s++)),i.size+=d.size,u+=d.size,a=m._batchLocation,this.addColors(e,p.color,p.alpha,d.attribSize,d.attribStart),this.addTextureIds(r,a,d.attribSize,d.attribStart)}n.t5._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,r=this.colors,n=this.textureIds,i=new ArrayBuffer(3*t.length*4),s=new Float32Array(i),o=new Uint32Array(i);let a=0;for(let l=0;l<t.length/2;l++)s[a++]=t[2*l],s[a++]=t[2*l+1],s[a++]=e[2*l],s[a++]=e[2*l+1],o[a++]=r[l],s[a++]=n[l];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(t){if(t.holes.length)Ge.triangulate(t,this);else{const e=tr[t.type];e.triangulate(t,this)}}processLine(t){Je(t,this);for(let e=0;e<t.holes.length;e++)Je(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const r=t[e],n=tr[r.type];n.build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let r=0;r<t.length/2;r++){const n=t[2*r],i=t[2*r+1];t[2*r]=e.a*n+e.c*i+e.tx,t[2*r+1]=e.b*n+e.d*i+e.ty}}addColors(t,e,r,i,s=0){const o=(e>>16)+(65280&e)+((255&e)<<16),a=n.Wp.premultiplyTint(o,r);t.length=Math.max(t.length,s+i);for(let n=0;n<i;n++)t[s+n]=a}addTextureIds(t,e,r,n=0){t.length=Math.max(t.length,n+r);for(let i=0;i<r;i++)t[n+i]=e}addUvs(t,e,r,n,i,s=null){let o=0;const a=e.length,l=r.frame;while(o<i){let r=t[2*(n+o)],i=t[2*(n+o)+1];if(s){const t=s.a*r+s.c*i+s.tx;i=s.b*r+s.d*i+s.ty,r=t}o++,e.push(r/l.width,i/l.height)}const h=r.baseTexture;(l.width<h.width||l.height<h.height)&&this.adjustUvs(e,r,a,i)}adjustUvs(t,e,r,n){const i=e.baseTexture,s=1e-6,o=r+2*n,a=e.frame,l=a.width/i.width,h=a.height/i.height;let u=a.x/a.width,c=a.y/a.height,d=Math.floor(t[r]+s),f=Math.floor(t[r+1]+s);for(let p=r+2;p<o;p+=2)d=Math.min(d,Math.floor(t[p]+s)),f=Math.min(f,Math.floor(t[p+1]+s));u-=d,c-=f;for(let p=r;p<o;p+=2)t[p]=(t[p]+u)*l,t[p+1]=(t[p+1]+c)*h}};let ar=or;ar.BATCHABLE_SIZE=100;class lr{constructor(){this.color=16777215,this.alpha=1,this.texture=n.gP.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new lr;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=n.gP.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class hr extends lr{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=We.BUTT,this.join=He.MITER,this.miterLimit=10}clone(){const t=new hr;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const ur=new Float32Array(3),cr={},dr=class extends u{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new lr,this._lineStyle=new hr,this._matrix=null,this._holeMode=!1,this.state=n.Uw.for2d(),this._geometry=t||new ar,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=n.B9.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new dr(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(t){this._tint=t}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,r=1,n=.5,i=!1){return"number"===typeof t&&(t={width:t,color:e,alpha:r,alignment:n,native:i}),this.lineTextureStyle(t)}lineTextureStyle(t){t=Object.assign({width:0,texture:n.gP.WHITE,color:t?.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:We.BUTT,join:He.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();const e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new n.tS,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new n.tS,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,n=r[r.length-2],i=r[r.length-1];return n===t&&i===e||r.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,r,n){this._initCurve();const i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),Qe.curveTo(t,e,r,n,i),this}bezierCurveTo(t,e,r,n,i,s){return this._initCurve(),$e.curveTo(t,e,r,n,i,s,this.currentPath.points),this}arcTo(t,e,r,n,i){this._initCurve(t,e);const s=this.currentPath.points,o=Ve.curveTo(t,e,r,n,i,s);if(o){const{cx:t,cy:e,radius:r,startAngle:n,endAngle:i,anticlockwise:s}=o;this.arc(t,e,r,n,i,s)}return this}arc(t,e,r,i,s,o=!1){if(i===s)return this;!o&&s<=i?s+=n.TO:o&&i<=s&&(i+=n.TO);const a=s-i;if(0===a)return this;const l=t+Math.cos(i)*r,h=e+Math.sin(i)*r,u=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const t=Math.abs(c[c.length-2]-l),e=Math.abs(c[c.length-1]-h);t<u&&e<u||c.push(l,h)}else this.moveTo(l,h),c=this.currentPath.points;return Ve.arc(l,h,t,e,r,i,s,o,c),this}beginFill(t=0,e=1){return this.beginTextureFill({texture:n.gP.WHITE,color:t,alpha:e})}beginTextureFill(t){t=Object.assign({texture:n.gP.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();const e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,r,i){return this.drawShape(new n.M_(t,e,r,i))}drawRoundedRect(t,e,r,i,s){return this.drawShape(new n.TE(t,e,r,i,s))}drawCircle(t,e,r){return this.drawShape(new n.jl(t,e,r))}drawEllipse(t,e,r,i){return this.drawShape(new n.Pp(t,e,r,i))}drawPolygon(...t){let e,r=!0;const i=t[0];i.points?(r=i.closeStroke,e=i.points):e=Array.isArray(t[0])?t[0]:t;const s=new n.tS(e);return s.closeStroke=r,this.drawShape(s),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return 1===t.length&&t[0].shape.type===n.HY.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(let i=0;i<r;i++){const r=t.batches[i],s=r.style.color,o=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),l=new Uint16Array(t.indicesUint16.buffer,2*r.start,r.size),h={vertexData:o,blendMode:e,indices:l,uvs:a,_batchRGB:n.Wp.hex2rgb(s),_tintRGB:s,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[i]=h}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,r=this.batches.length;e<r;e++){const r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}}_renderDirect(t){const e=this._resolveDirectShader(t),r=this._geometry,n=this.tint,i=this.worldAlpha,s=e.uniforms,o=r.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(n>>16&255)/255*i,s.tint[1]=(n>>8&255)/255*i,s.tint[2]=(255&n)/255*i,s.tint[3]=i,t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(t,r.drawCalls[a])}_renderDrawCallDirect(t,e){const{texArray:r,type:n,size:i,start:s}=e,o=r.count;for(let a=0;a<o;a++)t.texture.bind(r.elements[a],a);t.geometry.draw(n,i,s)}_resolveDirectShader(t){let e=this.shader;const r=this.pluginName;if(!e){if(!cr[r]){const{maxTextures:e}=t.plugins[r],i=new Int32Array(e);for(let t=0;t<e;t++)i[t]=t;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new n.uq,default:n.k2.from({uSamplers:i},!0)},o=t.plugins[r]._shader.program;cr[r]=new n.Mt(o,s)}e=cr[r]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:r,maxX:n,maxY:i}=t.bounds;this._bounds.addFrame(this.transform,e,r,n,i)}containsPoint(t){return this.worldTransform.applyInverse(t,dr._TEMP_POINT),this._geometry.containsPoint(dr._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const t=n.Wp.hex2rgb(this.tint,ur);for(let e=0;e<this.batches.length;e++){const r=this.batches[e],n=r._batchRGB,i=t[0]*n[0]*255,s=t[1]*n[1]*255,o=t[2]*n[2]*255,a=(i<<16)+(s<<8)+(0|o);r._tintRGB=(a>>16)+(65280&a)+((255&a)<<16)}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,s=e.d,o=e.tx,a=e.ty,l=this._geometry.points,h=this.vertexData;let u=0;for(let c=0;c<l.length;c+=2){const t=l[c],e=l[c+1];h[u++]=r*t+i*e+o,h[u++]=s*e+n*t+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let fr=dr;fr.curves=Xe,fr._TEMP_POINT=new n.bR;r(1806);class pr{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const mr=new n.bR,gr=new n.tS,yr=class extends u{constructor(t,e,r,i=n._4.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=r||n.Uw.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=n.W0.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data,r=this.shader;r.batchable&&this.drawMode===n._4.TRIANGLES&&e.length<2*yr.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)}calculateVertices(){const t=this.geometry,e=t.buffers[0],r=e.data,i=e._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,h=s.d,u=s.tx,c=s.ty,d=this.vertexData;for(let n=0;n<d.length/2;n++){const t=r[2*n],e=r[2*n+1];d[2*n]=o*t+l*e+u,d[2*n+1]=a*t+h*e+c}if(this._roundPixels){const t=n.W0.RESOLUTION;for(let e=0;e<d.length;++e)d[e]=Math.round(d[e]*t)/t}this.vertexDirty=i}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new pr(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,mr);const e=this.geometry.getBuffer("aVertexPosition").data,r=gr.points,n=this.geometry.getIndex().data,i=n.length,s=4===this.drawMode?3:1;for(let o=0;o+2<i;o+=s){const t=2*n[o],i=2*n[o+1],s=2*n[o+2];if(r[0]=e[t],r[1]=e[t+1],r[2]=e[i],r[3]=e[i+1],r[4]=e[s],r[5]=e[s+1],gr.contains(mr.x,mr.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let vr=yr;vr.BATCHABLE_SIZE=100;class _r extends n.V2{constructor(t,e,r){super();const i=new n.hp(t),s=new n.hp(e,!0),o=new n.hp(r,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,n.QE.FLOAT).addAttribute("aTextureCoord",s,2,!1,n.QE.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var xr="varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n",br="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n";class Er extends n.Mt{constructor(t,e){const r={uSampler:t,alpha:1,uTextureMatrix:n.uq.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(r,e.uniforms),super(e.program||n.BP.from(br,xr),r),this._colorDirty=!1,this.uvMatrix=new n.NW(t),this.batchable=void 0===e.program,this.pluginName=e.pluginName,this.tint=e.tint,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!==!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture;n.Wp.premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class Tr{constructor(t,e,r){this.geometry=new n.V2,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<t.length;++i){let r=t[i];r={attributeName:r.attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||n.QE.FLOAT,offset:r.offset},e[i]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new n.hp(n.Wp.createIndicesForQuads(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let n=0;n<this.dynamicProperties.length;++n){const t=this.dynamicProperties[n];t.offset=e,e+=t.size,this.dynamicStride+=t.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new n.hp(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let n=0;n<this.staticProperties.length;++n){const t=this.staticProperties[n];t.offset=i,i+=t.size,this.staticStride+=t.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new n.hp(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const e=this.dynamicProperties[o];t.addAttribute(e.attributeName,this.dynamicBuffer,0,e.type===n.QE.UNSIGNED_BYTE,e.type,4*this.dynamicStride,4*e.offset)}for(let o=0;o<this.staticProperties.length;++o){const e=this.staticProperties[o];t.addAttribute(e.attributeName,this.staticBuffer,0,e.type===n.QE.UNSIGNED_BYTE,e.type,4*this.staticStride,4*e.offset)}}uploadDynamic(t,e,r){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(t,e,r,s.type===n.QE.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,r){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(t,e,r,s.type===n.QE.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var wr="varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",Ar="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n";class Sr extends n.Pt{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new n.uq,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:n.QE.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=n.Mt.from(Ar,wr,{}),this.state=n.Uw.for2d()}render(t){const e=t.children,r=t._maxSize,i=t._batchSize,s=this.renderer;let o=e.length;if(0===o)return;o>r&&!t.autoResize&&(o=r);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=e[0]._texture.baseTexture,h=l.alphaMode>0;this.state.blendMode=n.Wp.correctBlendMode(t.blendMode,h),s.state.set(this.state);const u=s.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=n.Wp.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let n=0,f=0;n<o;n+=i,f+=1){let r=o-n;r>i&&(r=i),f>=a.length&&a.push(this._generateOneMoreBuffer(t));const l=a[f];l.uploadDynamic(e,n,r);const h=t._bufferUpdateIDs[f]||0;d=d||l._updateID<h,d&&(l._updateID=t._updateID,l.uploadStatic(e,n,r)),s.geometry.bind(l.geometry),u.drawElements(u.TRIANGLES,6*r,u.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],r=t._maxSize,n=t._batchSize,i=t._properties;for(let s=0;s<r;s+=n)e.push(new Tr(this.properties,i,n));return e}_generateOneMoreBuffer(t){const e=t._batchSize,r=t._properties;return new Tr(this.properties,r,e)}uploadVertices(t,e,r,n,i,s){let o=0,a=0,l=0,h=0;for(let u=0;u<r;++u){const r=t[e+u],c=r._texture,d=r.scale.x,f=r.scale.y,p=c.trim,m=c.orig;p?(a=p.x-r.anchor.x*m.width,o=a+p.width,h=p.y-r.anchor.y*m.height,l=h+p.height):(o=m.width*(1-r.anchor.x),a=m.width*-r.anchor.x,l=m.height*(1-r.anchor.y),h=m.height*-r.anchor.y),n[s]=a*d,n[s+1]=h*f,n[s+i]=o*d,n[s+i+1]=h*f,n[s+2*i]=o*d,n[s+2*i+1]=l*f,n[s+3*i]=a*d,n[s+3*i+1]=l*f,s+=4*i}}uploadPosition(t,e,r,n,i,s){for(let o=0;o<r;o++){const r=t[e+o].position;n[s]=r.x,n[s+1]=r.y,n[s+i]=r.x,n[s+i+1]=r.y,n[s+2*i]=r.x,n[s+2*i+1]=r.y,n[s+3*i]=r.x,n[s+3*i+1]=r.y,s+=4*i}}uploadRotation(t,e,r,n,i,s){for(let o=0;o<r;o++){const r=t[e+o].rotation;n[s]=r,n[s+i]=r,n[s+2*i]=r,n[s+3*i]=r,s+=4*i}}uploadUvs(t,e,r,n,i,s){for(let o=0;o<r;++o){const r=t[e+o]._texture._uvs;r?(n[s]=r.x0,n[s+1]=r.y0,n[s+i]=r.x1,n[s+i+1]=r.y1,n[s+2*i]=r.x2,n[s+2*i+1]=r.y2,n[s+3*i]=r.x3,n[s+3*i+1]=r.y3,s+=4*i):(n[s]=0,n[s+1]=0,n[s+i]=0,n[s+i+1]=0,n[s+2*i]=0,n[s+2*i+1]=0,n[s+3*i]=0,n[s+3*i+1]=0,s+=4*i)}}uploadTint(t,e,r,i,s,o){for(let a=0;a<r;++a){const r=t[e+a],l=r._texture.baseTexture.alphaMode>0,h=r.alpha,u=h<1&&l?n.Wp.premultiplyTint(r._tintRGB,h):r._tintRGB+(255*h<<24);i[o]=u,i[o+s]=u,i[o+2*s]=u,i[o+3*s]=u,o+=4*s}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Sr.extension={name:"particle",type:n.Ag.RendererPlugin},n.XO.add(Sr);var Cr=(t=>(t[t["LINEAR_VERTICAL"]=0]="LINEAR_VERTICAL",t[t["LINEAR_HORIZONTAL"]=1]="LINEAR_HORIZONTAL",t))(Cr||{});const Rr={willReadFrequently:!0},Ir=class{static get experimentalLetterSpacingSupported(){let t=Ir._experimentalLetterSpacingSupported;if(void 0!==t){const e=n.W0.ADAPTER.getCanvasRenderingContext2D().prototype;t=Ir._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,r,n,i,s,o,a,l){this.text=t,this.style=e,this.width=r,this.height=n,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(t,e,r,n=Ir._canvas){r=void 0===r||null===r?e.wordWrap:r;const i=e.toFontString(),s=Ir.measureFont(i);0===s.fontSize&&(s.fontSize=e.fontSize,s.ascent=e.fontSize);const o=n.getContext("2d",Rr);o.font=i;const a=r?Ir.wordWrap(t,e,n):t,l=a.split(/(?:\r\n|\r|\n)/),h=new Array(l.length);let u=0;for(let p=0;p<l.length;p++){const t=Ir._measureText(l[p],e.letterSpacing,o);h[p]=t,u=Math.max(u,t)}let c=u+e.strokeThickness;e.dropShadow&&(c+=e.dropShadowDistance);const d=e.lineHeight||s.fontSize+e.strokeThickness;let f=Math.max(d,s.fontSize+2*e.strokeThickness)+(l.length-1)*(d+e.leading);return e.dropShadow&&(f+=e.dropShadowDistance),new Ir(t,e,c,f,l,h,d+e.leading,u,s)}static _measureText(t,e,r){let n=!1;Ir.experimentalLetterSpacingSupported&&(Ir.experimentalLetterSpacing?(r.letterSpacing=`${e}px`,r.textLetterSpacing=`${e}px`,n=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let i=r.measureText(t).width;return i>0&&(n?i-=e:i+=(Ir.graphemeSegmenter(t).length-1)*e),i}static wordWrap(t,e,r=Ir._canvas){const n=r.getContext("2d",Rr);let i=0,s="",o="";const a=Object.create(null),{letterSpacing:l,whiteSpace:h}=e,u=Ir.collapseSpaces(h),c=Ir.collapseNewlines(h);let d=!u;const f=e.wordWrapWidth+l,p=Ir.tokenize(t);for(let m=0;m<p.length;m++){let t=p[m];if(Ir.isNewline(t)){if(!c){o+=Ir.addLine(s),d=!u,s="",i=0;continue}t=" "}if(u){const e=Ir.isBreakingSpace(t),r=Ir.isBreakingSpace(s[s.length-1]);if(e&&r)continue}const r=Ir.getFromCache(t,l,a,n);if(r>f)if(""!==s&&(o+=Ir.addLine(s),s="",i=0),Ir.canBreakWords(t,e.breakWords)){const r=Ir.wordWrapSplit(t);for(let h=0;h<r.length;h++){let u=r[h],c=u,p=1;while(r[h+p]){const n=r[h+p];if(Ir.canBreakChars(c,n,t,h,e.breakWords))break;u+=n,c=n,p++}h+=p-1;const m=Ir.getFromCache(u,l,a,n);m+i>f&&(o+=Ir.addLine(s),d=!1,s="",i=0),s+=u,i+=m}}else{s.length>0&&(o+=Ir.addLine(s),s="",i=0);const e=m===p.length-1;o+=Ir.addLine(t,!e),d=!1,s="",i=0}else r+i>f&&(d=!1,o+=Ir.addLine(s),s="",i=0),(s.length>0||!Ir.isBreakingSpace(t)||d)&&(s+=t,i+=r)}return o+=Ir.addLine(s,!1),o}static addLine(t,e=!0){return t=Ir.trimRight(t),t=e?`${t}\n`:t,t}static getFromCache(t,e,r,n){let i=r[t];return"number"!==typeof i&&(i=Ir._measureText(t,e,n)+e,r[t]=i),i}static collapseSpaces(t){return"normal"===t||"pre-line"===t}static collapseNewlines(t){return"normal"===t}static trimRight(t){if("string"!==typeof t)return"";for(let e=t.length-1;e>=0;e--){const r=t[e];if(!Ir.isBreakingSpace(r))break;t=t.slice(0,-1)}return t}static isNewline(t){return"string"===typeof t&&Ir._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return"string"===typeof t&&Ir._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let r="";if("string"!==typeof t)return e;for(let n=0;n<t.length;n++){const i=t[n],s=t[n+1];Ir.isBreakingSpace(i,s)||Ir.isNewline(i)?(""!==r&&(e.push(r),r=""),e.push(i)):r+=i}return""!==r&&e.push(r),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,r,n,i){return!0}static wordWrapSplit(t){return Ir.graphemeSegmenter(t)}static measureFont(t){if(Ir._fonts[t])return Ir._fonts[t];const e={ascent:0,descent:0,fontSize:0},r=Ir._canvas,n=Ir._context;n.font=t;const i=Ir.METRICS_STRING+Ir.BASELINE_SYMBOL,s=Math.ceil(n.measureText(i).width);let o=Math.ceil(n.measureText(Ir.BASELINE_SYMBOL).width);const a=Math.ceil(Ir.HEIGHT_MULTIPLIER*o);if(o=o*Ir.BASELINE_MULTIPLIER|0,0===s||0===a)return Ir._fonts[t]=e,e;r.width=s,r.height=a,n.fillStyle="#f00",n.fillRect(0,0,s,a),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(i,0,o);const l=n.getImageData(0,0,s,a).data,h=l.length,u=4*s;let c=0,d=0,f=!1;for(c=0;c<o;++c){for(let t=0;t<u;t+=4)if(255!==l[d+t]){f=!0;break}if(f)break;d+=u}for(e.ascent=o-c,d=h-u,f=!1,c=a;c>o;--c){for(let t=0;t<u;t+=4)if(255!==l[d+t]){f=!0;break}if(f)break;d-=u}return e.descent=c-o,e.fontSize=e.ascent+e.descent,Ir._fonts[t]=e,e}static clearMetrics(t=""){t?delete Ir._fonts[t]:Ir._fonts={}}static get _canvas(){if(!Ir.__canvas){let e;try{const t=new OffscreenCanvas(0,0),r=t.getContext("2d",Rr);if(r?.measureText)return Ir.__canvas=t,t;e=n.W0.ADAPTER.createCanvas()}catch(t){e=n.W0.ADAPTER.createCanvas()}e.width=e.height=10,Ir.__canvas=e}return Ir.__canvas}static get _context(){return Ir.__context||(Ir.__context=Ir._canvas.getContext("2d",Rr)),Ir.__context}};let Pr=Ir;Pr.METRICS_STRING="|q",Pr.BASELINE_SYMBOL="M",Pr.BASELINE_MULTIPLIER=1.4,Pr.HEIGHT_MULTIPLIER=2,Pr.graphemeSegmenter=(()=>{if("function"===typeof Intl?.Segmenter){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(t=>t.segment)}return t=>[...t]})(),Pr.experimentalLetterSpacing=!1,Pr._fonts={},Pr._newlines=[10,13],Pr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const Mr=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Or=class{constructor(t){this.styleID=0,this.reset(),Lr(this,t,t)}clone(){const t={};return Lr(t,this,Or.defaultStyle),new Or(t)}reset(){Lr(this,Or.defaultStyle,Or.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=Br(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=Br(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){Nr(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=Br(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t="number"===typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let r=e.length-1;r>=0;r--){let t=e[r].trim();/([\"\'])[^\'\"]+\1/.test(t)||Mr.includes(t)||(t=`"${t}"`),e[r]=t}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};let Dr=Or;function Fr(t){return"number"===typeof t?n.Wp.hex2string(t):("string"===typeof t&&t.startsWith("0x")&&(t=t.replace("0x","#")),t)}function Br(t){if(Array.isArray(t)){for(let e=0;e<t.length;++e)t[e]=Fr(t[e]);return t}return Fr(t)}function Nr(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function Lr(t,e,r){for(const n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}Dr.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Cr.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};const kr={texture:!0,children:!1,baseTexture:!0},Ur=class extends f{constructor(t,e,r){let i=!1;r||(r=n.W0.ADAPTER.createCanvas(),i=!0),r.width=3,r.height=3;const s=n.gP.from(r);s.orig=new n.M_,s.trim=new n.M_,super(s),this._ownCanvas=i,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=Ur.defaultResolution??n.W0.RESOLUTION,this._autoResolution=Ur.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return Pr.experimentalLetterSpacing}static set experimentalLetterSpacing(t){n.Wp.deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Pr.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const r=this.context,i=Pr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,l=i.lineHeight,h=i.lineWidths,u=i.maxLineWidth,c=i.fontProperties;let d,f;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+2*e.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;const p=e.dropShadow?2:1;for(let m=0;m<p;++m){const t=e.dropShadow&&0===m,s=t?Math.ceil(Math.max(1,o)+2*e.padding):0,p=s*this._resolution;if(t){r.fillStyle="black",r.strokeStyle="black";const t=e.dropShadowColor,i=n.Wp.hex2rgb("number"===typeof t?t:n.Wp.string2hex(t)),s=e.dropShadowBlur*this._resolution,o=e.dropShadowDistance*this._resolution;r.shadowColor=`rgba(${255*i[0]},${255*i[1]},${255*i[2]},${e.dropShadowAlpha})`,r.shadowBlur=s,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*o,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*o+p}else r.fillStyle=this._generateFillStyle(e,a,i),r.strokeStyle=e.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let g=(l-c.fontSize)/2;l-c.fontSize<0&&(g=0);for(let r=0;r<a.length;r++)d=e.strokeThickness/2,f=e.strokeThickness/2+r*l+c.ascent+g,"right"===e.align?d+=u-h[r]:"center"===e.align&&(d+=(u-h[r])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[r],d+e.padding,f+e.padding-s,!0),e.fill&&this.drawLetterSpacing(a[r],d+e.padding,f+e.padding-s)}this.updateTexture()}drawLetterSpacing(t,e,r,n=!1){const i=this._style,s=i.letterSpacing;let o=!1;if(Pr.experimentalLetterSpacingSupported&&(Pr.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===s||o)return void(n?this.context.strokeText(t,e,r):this.context.fillText(t,e,r));let a=e;const l=Pr.graphemeSegmenter(t);let h=this.context.measureText(t).width,u=0;for(let c=0;c<l.length;++c){const t=l[c];n?this.context.strokeText(t,a,r):this.context.fillText(t,a,r);let e="";for(let r=c+1;r<l.length;++r)e+=l[r];u=this.context.measureText(e).width,a+=h-u+s,h=u}}updateTexture(){const t=this.canvas;if(this._style.trim){const e=n.Wp.trimCanvas(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}const e=this._texture,r=this._style,i=r.trim?0:r.padding,s=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-i,e.trim.y=-i,e.orig.width=e._frame.width-2*i,e.orig.height=e._frame.height-2*i,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),-1===this._textureID&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,r){const n=t.fill;if(!Array.isArray(n))return n;if(1===n.length)return n[0];let i;const s=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=this.canvas.width/this._resolution-s-2*o,l=this.canvas.height/this._resolution-s-2*o,h=n.slice(),u=t.fillGradientStops.slice();if(!u.length){const t=h.length+1;for(let e=1;e<t;++e)u.push(e/t)}if(h.unshift(n[0]),u.unshift(0),h.push(n[n.length-1]),u.push(1),t.fillGradientType===Cr.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,o,a/2,l+o);const n=r.fontProperties.fontSize+t.strokeThickness;for(let t=0;t<e.length;t++){const s=r.lineHeight*(t-1)+n,o=r.lineHeight*t;let a=o;t>0&&s>o&&(a=(o+s)/2);const c=o+n,d=r.lineHeight*(t+1);let f=c;t+1<e.length&&d<c&&(f=(c+d)/2);const p=(f-a)/l;for(let t=0;t<h.length;t++){let e=0;e="number"===typeof u[t]?u[t]:t/h.length;let r=Math.min(1,Math.max(0,a/l+e*p));r=Number(r.toFixed(5)),i.addColorStop(r,h[t])}}}else{i=this.context.createLinearGradient(o,l/2,a+o,l/2);const t=h.length+1;let e=1;for(let r=0;r<h.length;r++){let n;n="number"===typeof u[r]?u[r]:e/t,i.addColorStop(n,h[r]),e++}}return i}destroy(t){"boolean"===typeof t&&(t={children:t}),t=Object.assign({},kr,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=n.Wp.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=n.Wp.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},this._style=t instanceof Dr?t:new Dr(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(null===t||void 0===t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let Gr=Ur;Gr.defaultAutoResolution=!0;class jr{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function zr(t,e){let r=!1;if(t?._textures?.length)for(let i=0;i<t._textures.length;i++)if(t._textures[i]instanceof n.gP){const n=t._textures[i].baseTexture;e.includes(n)||(e.push(n),r=!0)}return r}function Hr(t,e){if(t.baseTexture instanceof n.t5){const r=t.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function Wr(t,e){if(t._texture&&t._texture instanceof n.gP){const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function Xr(t,e){return e instanceof Gr&&(e.updateText(!0),!0)}function Vr(t,e){if(e instanceof Dr){const t=e.toFontString();return Pr.measureFont(t),!0}return!1}function $r(t,e){if(t instanceof Gr){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function Yr(t,e){return t instanceof Dr&&(e.includes(t)||e.push(t),!0)}const qr=class{constructor(t){this.limiter=new jr(qr.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook($r),this.registerFindHook(Yr),this.registerFindHook(zr),this.registerFindHook(Hr),this.registerFindHook(Wr),this.registerUploadHook(Xr),this.registerUploadHook(Vr)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,n.Rv.system.addOnce(this.tick,this,n.dQ.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){this.limiter.beginFrame();while(this.queue.length&&this.limiter.allowedToUpload()){const t=this.queue[0];let e=!1;if(t&&!t._destroyed)for(let r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)n.Rv.system.addOnce(this.tick,this,n.dQ.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,r=t.length;e<r;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,r=this.addHooks.length;e<r;e++)if(this.addHooks[e](t,this.queue))break;if(t instanceof u)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&n.Rv.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Kr=qr;function Zr(t,e){return e instanceof n.t5&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function Jr(t,e){if(!(e instanceof fr))return!1;const{geometry:r}=e;e.finishPoly(),r.updateBatches();const{batches:n}=r;for(let i=0;i<n.length;i++){const{texture:e}=n[i].style;e&&Zr(t,e.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function Qr(t,e){return t instanceof fr&&(e.push(t),!0)}Kr.uploadsPerFrame=4,Object.defineProperties(n.W0,{UPLOADS_PER_FRAME:{get(){return Kr.uploadsPerFrame},set(t){n.Wp.deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Kr.uploadsPerFrame=t}}});class tn extends Kr{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(Qr),this.registerUploadHook(Zr),this.registerUploadHook(Jr)}}tn.extension={name:"prepare",type:n.Ag.RendererSystem},n.XO.add(tn);new n.bR;var en="#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",rn="#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",nn="#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",sn="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",on="#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n";const an=new n.uq;class ln extends n.Pt{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new n.X1,this.state=n.Uw.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=n.Mt.from(sn,on,e),this.shader=t.context.webGLVersion>1?n.Mt.from(rn,en,e):n.Mt.from(sn,nn,e)}render(t){const e=this.renderer,r=this.quad;let i=r.vertices;i[0]=i[6]=t._width*-t.anchor.x,i[1]=i[3]=t._height*-t.anchor.y,i[2]=i[4]=t._width*(1-t.anchor.x),i[5]=i[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;i=r.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,r.invalidate();const a=t._texture,l=a.baseTexture,h=l.alphaMode>0,u=t.tileTransform.localTransform,c=t.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[e.CONTEXT_UID]?d=l.wrapMode!==n.uR.CLAMP:l.wrapMode===n.uR.CLAMP&&(l.wrapMode=n.uR.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,m=a.height,g=t._width,y=t._height;an.set(u.a*p/g,u.b*p/y,u.c*m/g,u.d*m/y,u.tx/g,u.ty/y),an.invert(),d?an.prepend(c.mapCoord):(f.uniforms.uMapCoord=c.mapCoord.toArray(!0),f.uniforms.uClampFrame=c.uClampFrame,f.uniforms.uClampOffset=c.uClampOffset),f.uniforms.uTransform=an.toArray(!0),f.uniforms.uColor=n.Wp.premultiplyTintToRgba(t.tint,t.worldAlpha,f.uniforms.uColor,h),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,e.shader.bind(f),e.geometry.bind(r),this.state.blendMode=n.Wp.correctBlendMode(t.blendMode,h),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}ln.extension={name:"tilingSprite",type:n.Ag.RendererPlugin},n.XO.add(ln);const hn=class{constructor(t,e,r=null){this.linkedSheets=[],this._texture=t instanceof n.gP?t:null,this.baseTexture=t instanceof n.t5?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const i=this.baseTexture.resource;this.resolution=this._updateResolution(r||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let r=n.Wp.getResolutionOfUrl(t,null);return null===r&&(r=parseFloat(e??"1")),1!==r&&this.baseTexture.setResolution(r),r}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=hn.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const r=hn.BATCH_SIZE;while(e-t<r&&e<this._frameKeys.length){const t=this._frameKeys[e],r=this._frames[t],i=r.frame;if(i){let e=null,s=null;const o=!1!==r.trimmed&&r.sourceSize?r.sourceSize:r.frame,a=new n.M_(0,0,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution);e=r.rotated?new n.M_(Math.floor(i.x)/this.resolution,Math.floor(i.y)/this.resolution,Math.floor(i.h)/this.resolution,Math.floor(i.w)/this.resolution):new n.M_(Math.floor(i.x)/this.resolution,Math.floor(i.y)/this.resolution,Math.floor(i.w)/this.resolution,Math.floor(i.h)/this.resolution),!1!==r.trimmed&&r.spriteSourceSize&&(s=new n.M_(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(i.w)/this.resolution,Math.floor(i.h)/this.resolution)),this.textures[t]=new n.gP(this.baseTexture,e,a,s,r.rotated?2:0,r.anchor),n.gP.addToCache(this.textures[t],t)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let r=0;r<t[e].length;r++){const n=t[e][r];this.animations[e].push(this.textures[n])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*hn.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*hn.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let un=hn;un.BATCH_SIZE=1e3;const cn=["jpg","png","jpeg","avif","webp"];function dn(t,e,r){const i={};if(t.forEach(t=>{i[t]=e}),Object.keys(e.textures).forEach(t=>{i[t]=e.textures[t]}),!r){const r=n.Wp.path.dirname(t[0]);e.linkedSheets.forEach((t,n)=>{const s=dn([`${r}/${e.data.meta.related_multi_packs[n]}`],t,!0);Object.assign(i,s)})}return i}const fn={extension:n.Ag.Asset,cache:{test:t=>t instanceof un,getCacheableAssets:(t,e)=>dn(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0],r=e.split("."),n=r.pop(),i=r.pop();return"json"===n&&cn.includes(i)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(n.W0.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{extension:{type:n.Ag.LoadParser,priority:ct.Normal},async testParse(t,e){return".json"===n.Wp.path.extname(e.src).toLowerCase()&&!!t.frames},async parse(t,e,r){let i=n.Wp.path.dirname(e.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");let s=i+t.meta.image;s=Ht(s,e.src);const o=await r.load([s]),a=o[s],l=new un(a.baseTexture,t,e.src);await l.parse();const h=t?.meta?.related_multi_packs;if(Array.isArray(h)){const t=[];for(const s of h){if("string"!==typeof s)continue;let n=i+s;e.data?.ignoreMultiPack||(n=Ht(n,e.src),t.push(r.load({src:n,data:{ignoreMultiPack:!0}})))}const n=await Promise.all(t);l.linkedSheets=n,n.forEach(t=>{t.linkedSheets=[l].concat(l.linkedSheets.filter(e=>e!==t))})}return l},unload(t){t.destroy(!0)}}};n.XO.add(fn);class pn{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class mn{static test(t){return"string"===typeof t&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const i in e){const t=e[i].match(/^[a-z]+/gm)[0],n=e[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(const e in n){const t=n[e].split("="),r=t[0],i=t[1].replace(/"/gm,""),o=parseFloat(i),a=isNaN(o)?i:o;s[r]=a}r[t].push(s)}const n=new pn;return r.info.forEach(t=>n.info.push({face:t.face,size:parseInt(t.size,10)})),r.common.forEach(t=>n.common.push({lineHeight:parseInt(t.lineHeight,10)})),r.page.forEach(t=>n.page.push({id:parseInt(t.id,10),file:t.file})),r.char.forEach(t=>n.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})),r.kerning.forEach(t=>n.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})),r.distanceField.forEach(t=>n.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType})),n}}class gn{static test(t){const e=t;return"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")}static parse(t){const e=new pn,r=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),i=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning"),a=t.getElementsByTagName("distanceField");for(let l=0;l<r.length;l++)e.info.push({face:r[l].getAttribute("face"),size:parseInt(r[l].getAttribute("size"),10)});for(let l=0;l<n.length;l++)e.common.push({lineHeight:parseInt(n[l].getAttribute("lineHeight"),10)});for(let l=0;l<i.length;l++)e.page.push({id:parseInt(i[l].getAttribute("id"),10)||0,file:i[l].getAttribute("file")});for(let l=0;l<s.length;l++){const t=s[l];e.char.push({id:parseInt(t.getAttribute("id"),10),page:parseInt(t.getAttribute("page"),10)||0,x:parseInt(t.getAttribute("x"),10),y:parseInt(t.getAttribute("y"),10),width:parseInt(t.getAttribute("width"),10),height:parseInt(t.getAttribute("height"),10),xoffset:parseInt(t.getAttribute("xoffset"),10),yoffset:parseInt(t.getAttribute("yoffset"),10),xadvance:parseInt(t.getAttribute("xadvance"),10)})}for(let l=0;l<o.length;l++)e.kerning.push({first:parseInt(o[l].getAttribute("first"),10),second:parseInt(o[l].getAttribute("second"),10),amount:parseInt(o[l].getAttribute("amount"),10)});for(let l=0;l<a.length;l++)e.distanceField.push({fieldType:a[l].getAttribute("fieldType"),distanceRange:parseInt(a[l].getAttribute("distanceRange"),10)});return e}}class yn{static test(t){return!("string"!==typeof t||!t.includes("<font>"))&&gn.test(n.W0.ADAPTER.parseXML(t))}static parse(t){return gn.parse(n.W0.ADAPTER.parseXML(t))}}const vn=[mn,gn,yn];function _n(t){for(let e=0;e<vn.length;e++)if(vn[e].test(t))return vn[e];return null}function xn(t,e,r,n,i,s){const o=r.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];let a;const l=r.dropShadow?r.dropShadowDistance:0,h=r.padding||0,u=t.width/n-l-2*h,c=t.height/n-l-2*h,d=o.slice(),f=r.fillGradientStops.slice();if(!f.length){const t=d.length+1;for(let e=1;e<t;++e)f.push(e/t)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),r.fillGradientType===Cr.LINEAR_VERTICAL){a=e.createLinearGradient(u/2,h,u/2,c+h);let t=0;const n=s.fontProperties.fontSize+r.strokeThickness,o=n/c;for(let e=0;e<i.length;e++){const r=s.lineHeight*e;for(let e=0;e<d.length;e++){let n=0;n="number"===typeof f[e]?f[e]:e/d.length;const i=r/c+n*o;let s=Math.max(t,i);s=Math.min(s,1),a.addColorStop(s,d[e]),t=s}}}else{a=e.createLinearGradient(h,c/2,u+h,c/2);const t=d.length+1;let r=1;for(let e=0;e<d.length;e++){let n;n="number"===typeof f[e]?f[e]:r/t,a.addColorStop(n,d[e]),r++}}return a}function bn(t,e,r,i,s,o,a){const l=r.text,h=r.fontProperties;e.translate(i,s),e.scale(o,o);const u=a.strokeThickness/2,c=-a.strokeThickness/2;if(e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=xn(t,e,a,o,[l],r),e.strokeStyle=a.stroke,a.dropShadow){const t=a.dropShadowColor,r=n.Wp.hex2rgb("number"===typeof t?t:n.Wp.string2hex(t)),i=a.dropShadowBlur*o,s=a.dropShadowDistance*o;e.shadowColor=`rgba(${255*r[0]},${255*r[1]},${255*r[2]},${a.dropShadowAlpha})`,e.shadowBlur=i,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*s,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*s}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;a.stroke&&a.strokeThickness&&e.strokeText(l,u,c+r.lineHeight-h.descent),a.fill&&e.fillText(l,u,c+r.lineHeight-h.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function En(t){return Array.from?Array.from(t):t.split("")}function Tn(t){"string"===typeof t&&(t=[t]);const e=[];for(let r=0,n=t.length;r<n;r++){const n=t[r];if(Array.isArray(n)){if(2!==n.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const t=n[0].charCodeAt(0),r=n[1].charCodeAt(0);if(r<t)throw new Error("[BitmapFont]: Invalid character range.");for(let n=t,i=r;n<=i;n++)e.push(String.fromCharCode(n))}else e.push(...En(n))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}function wn(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}const An=class{constructor(t,e,r){const[i]=t.info,[s]=t.common,[o]=t.page,[a]=t.distanceField,l=n.Wp.getResolutionOfUrl(o.file),h={};this._ownsTextures=r,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=h;for(let u=0;u<t.page.length;u++){const{id:r,file:i}=t.page[u];h[r]=e instanceof Array?e[u]:e[i],a?.fieldType&&"none"!==a.fieldType&&(h[r].baseTexture.alphaMode=n.Gk.NO_PREMULTIPLIED_ALPHA,h[r].baseTexture.mipmap=n.E8.OFF)}for(let u=0;u<t.char.length;u++){const{id:e,page:r}=t.char[u];let{x:i,y:s,width:o,height:a,xoffset:c,yoffset:d,xadvance:f}=t.char[u];i/=l,s/=l,o/=l,a/=l,c/=l,d/=l,f/=l;const p=new n.M_(i+h[r].frame.x/l,s+h[r].frame.y/l,o,a);this.chars[e]={xOffset:c,yOffset:d,xAdvance:f,kerning:{},texture:new n.gP(h[r].baseTexture,p),page:r}}for(let n=0;n<t.kerning.length;n++){let{first:e,second:r,amount:i}=t.kerning[n];e/=l,r/=l,i/=l,this.chars[r]&&(this.chars[r].kerning[e]=i)}this.distanceFieldRange=a?.distanceRange,this.distanceFieldType=a?.fieldType?.toLowerCase()??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,r){let i;if(t instanceof pn)i=t;else{const e=_n(t);if(!e)throw new Error("Unrecognized data format for font.");i=e.parse(t)}e instanceof n.gP&&(e=[e]);const s=new An(i,e,r);return An.available[s.font]=s,s}static uninstall(t){const e=An.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete An.available[t]}static from(t,e,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:l,...h}=Object.assign({},An.defaultOptions,r),u=Tn(i),c=e instanceof Dr?e:new Dr(e),d=a,f=new pn;f.info[0]={face:c.fontFamily,size:c.fontSize},f.common[0]={lineHeight:c.fontSize};let p,m,g,y=0,v=0,_=0;const x=[],b=[];for(let T=0;T<u.length;T++){p||(p=n.W0.ADAPTER.createCanvas(),p.width=a,p.height=l,m=p.getContext("2d"),g=new n.t5(p,{resolution:o,...h}),x.push(g),b.push(new n.gP(g)),f.page.push({id:b.length-1,file:""}));const t=u[T],e=Pr.measureText(t,c,!1,p),r=e.width,i=Math.ceil(e.height),E=Math.ceil(("italic"===c.fontStyle?2:1)*r);if(v>=l-i*o){if(0===v)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${t}')`);--T,p=null,m=null,g=null,v=0,y=0,_=0;continue}if(_=Math.max(i+e.fontProperties.descent,_),E*o+y>=d){if(0===y)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${t}')`);--T,v+=_*o,v=Math.ceil(v),y=0,_=0;continue}bn(p,m,e,y,v,o,c);const w=wn(e.text);f.char.push({id:w,page:b.length-1,x:y/o,y:v/o,width:E,height:i,xoffset:0,yoffset:0,xadvance:r-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),y+=(E+2*s)*o,y=Math.ceil(y)}for(let n=0,T=u.length;n<T;n++){const t=u[n];for(let e=0;e<T;e++){const r=u[e],n=m.measureText(t).width,i=m.measureText(r).width,s=m.measureText(t+r).width,o=s-(n+i);o&&f.kerning.push({first:wn(t),second:wn(r),amount:o})}}const E=new An(f,b,!0);return void 0!==An.available[t]&&An.uninstall(t),An.available[t]=E,E}};let Sn=An;Sn.ALPHA=[["a","z"],["A","Z"]," "],Sn.NUMERIC=[["0","9"]],Sn.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Sn.ASCII=[[" ","~"]],Sn.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:An.ALPHANUMERIC},Sn.available={};var Cn="// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n",Rn="// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n";const In=[],Pn=[],Mn=[],On=class extends u{constructor(t,e={}){super(),this._tint=16777215;const{align:r,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},On.styleDefaults,e);if(!Sn.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tint=i,this._font=void 0,this._fontName=a,this._fontSize=l,this.text=t,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new n.oA(()=>{this.dirty=!0},this,0,0),this._roundPixels=n.W0.ROUND_PIXELS,this.dirty=!0,this._resolution=n.W0.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const t=Sn.available[this._fontName],e=this.fontSize,r=e/t.size,i=new n.bR,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",h=En(l),u=this._maxWidth*t.size/e,c="none"===t.distanceFieldType?In:Pn;let d=null,f=0,p=0,m=0,g=-1,y=0,v=0,_=0,x=0;for(let C=0;C<h.length;C++){const e=h[C],r=wn(e);if(/(?:\s)/.test(e)&&(g=C,y=f,x++),"\r"===e||"\n"===e){o.push(f),a.push(-1),p=Math.max(p,f),++m,++v,i.x=0,i.y+=t.lineHeight,d=null,x=0;continue}const l=t.chars[r];if(!l)continue;d&&l.kerning[d]&&(i.x+=l.kerning[d]);const c=Mn.pop()||{texture:n.gP.EMPTY,line:0,charCode:0,prevSpaces:0,position:new n.bR};c.texture=l.texture,c.line=m,c.charCode=r,c.position.x=Math.round(i.x+l.xOffset+this._letterSpacing/2),c.position.y=Math.round(i.y+l.yOffset),c.prevSpaces=x,s.push(c),f=c.position.x+Math.max(l.xAdvance-l.xOffset,l.texture.orig.width),i.x+=l.xAdvance+this._letterSpacing,_=Math.max(_,l.yOffset+l.texture.height),d=r,-1!==g&&u>0&&i.x>u&&(++v,n.Wp.removeItems(s,1+g-v,1+C-g),C=g,g=-1,o.push(y),a.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,y),m++,i.x=0,i.y+=t.lineHeight,d=null,x=0)}const b=h[h.length-1];"\r"!==b&&"\n"!==b&&(/(?:\s)/.test(b)&&(f=y),o.push(f),p=Math.max(p,f),a.push(-1));const E=[];for(let n=0;n<=m;n++){let t=0;"right"===this._align?t=p-o[n]:"center"===this._align?t=(p-o[n])/2:"justify"===this._align&&(t=a[n]<0?0:(p-o[n])/a[n]),E.push(t)}const T=s.length,w={},A=[],S=this._activePagesMeshData;c.push(...S);for(let C=0;C<T;C++){const e=s[C].texture,r=e.baseTexture.uid;if(!w[r]){let i=c.pop();if(!i){const e=new _r;let r,s;"none"===t.distanceFieldType?(r=new Er(n.gP.EMPTY),s=n.B9.NORMAL):(r=new Er(n.gP.EMPTY,{program:n.BP.from(Rn,Cn),uniforms:{uFWidth:0}}),s=n.B9.NORMAL_NPM);const o=new vr(e,r);o.blendMode=s,i={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:o,vertices:null,uvs:null,indices:null}}i.index=0,i.indexCount=0,i.vertexCount=0,i.uvsCount=0,i.total=0;const{_textureCache:s}=this;s[r]=s[r]||new n.gP(e.baseTexture),i.mesh.texture=s[r],i.mesh.tint=this._tint,A.push(i),w[r]=i}w[r].total++}for(let n=0;n<S.length;n++)A.includes(S[n])||this.removeChild(S[n].mesh);for(let n=0;n<A.length;n++)A[n].mesh.parent!==this&&this.addChild(A[n].mesh);this._activePagesMeshData=A;for(const n in w){const t=w[n],e=t.total;if(!(t.indices?.length>6*e)||t.vertices.length<2*vr.BATCHABLE_SIZE)t.vertices=new Float32Array(8*e),t.uvs=new Float32Array(8*e),t.indices=new Uint16Array(6*e);else{const e=t.total,r=t.vertices;for(let t=4*e*2;t<r.length;t++)r[t]=0}t.mesh.size=6*e}for(let n=0;n<T;n++){const t=s[n];let e=t.position.x+E[t.line]*("justify"===this._align?t.prevSpaces:1);this._roundPixels&&(e=Math.round(e));const i=e*r,o=t.position.y*r,a=t.texture,l=w[a.baseTexture.uid],h=a.frame,u=a._uvs,c=l.index++;l.indices[6*c+0]=0+4*c,l.indices[6*c+1]=1+4*c,l.indices[6*c+2]=2+4*c,l.indices[6*c+3]=0+4*c,l.indices[6*c+4]=2+4*c,l.indices[6*c+5]=3+4*c,l.vertices[8*c+0]=i,l.vertices[8*c+1]=o,l.vertices[8*c+2]=i+h.width*r,l.vertices[8*c+3]=o,l.vertices[8*c+4]=i+h.width*r,l.vertices[8*c+5]=o+h.height*r,l.vertices[8*c+6]=i,l.vertices[8*c+7]=o+h.height*r,l.uvs[8*c+0]=u.x0,l.uvs[8*c+1]=u.y0,l.uvs[8*c+2]=u.x1,l.uvs[8*c+3]=u.y1,l.uvs[8*c+4]=u.x2,l.uvs[8*c+5]=u.y2,l.uvs[8*c+6]=u.x3,l.uvs[8*c+7]=u.y3}this._textWidth=p*r,this._textHeight=(i.y+t.lineHeight)*r;for(const n in w){const t=w[n];if(0!==this.anchor.x||0!==this.anchor.y){let e=0;const r=this._textWidth*this.anchor.x,n=this._textHeight*this.anchor.y;for(let i=0;i<t.total;i++)t.vertices[e++]-=r,t.vertices[e++]-=n,t.vertices[e++]-=r,t.vertices[e++]-=n,t.vertices[e++]-=r,t.vertices[e++]-=n,t.vertices[e++]-=r,t.vertices[e++]-=n}this._maxLineHeight=_*r;const e=t.mesh.geometry.getBuffer("aVertexPosition"),i=t.mesh.geometry.getBuffer("aTextureCoord"),s=t.mesh.geometry.getIndex();e.data=t.vertices,i.data=t.uvs,s.data=t.indices,e.update(),i.update(),s.update()}for(let n=0;n<s.length;n++)Mn.push(s[n]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:r,size:n}=Sn.available[this._fontName];if("none"!==r){const{a:r,b:i,c:s,d:o}=this.worldTransform,a=Math.sqrt(r*r+i*i),l=Math.sqrt(s*s+o*o),h=(Math.abs(a)+Math.abs(l))/2,u=this.fontSize/n,c=t._view.resolution;for(const t of this._activePagesMeshData)t.mesh.shader.uniforms.uFWidth=h*e*u*c}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=Sn.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(t){if(this._tint!==t){this._tint=t;for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!Sn.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??Sn.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){"number"===typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(null===t||void 0===t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,r=Sn.available[this._fontName],i="none"===r.distanceFieldType?In:Pn;i.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],i.filter(t=>e[t.mesh.texture.baseTexture.uid]).forEach(t=>{t.mesh.texture=n.gP.EMPTY});for(const n in e){const t=e[n];t.destroy(),delete e[n]}this._font=null,this._textureCache=null,super.destroy(t)}};let Dn=On;Dn.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const Fn=[".xml",".fnt"],Bn={extension:{type:n.Ag.LoadParser,priority:ct.Normal},test(t){return Fn.includes(n.Wp.path.extname(t).toLowerCase())},async testParse(t){return mn.test(t)||yn.test(t)},async parse(t,e,r){const i=mn.test(t)?mn.parse(t):yn.parse(t),{src:s}=e,{page:o}=i,a=[];for(let u=0;u<o.length;++u){const t=o[u].file;let e=n.Wp.path.join(n.Wp.path.dirname(s),t);e=Ht(e,s),a.push(e)}const l=await r.load(a),h=a.map(t=>l[t]);return Sn.install(i,h,!0)},async load(t,e){const r=await n.W0.ADAPTER.fetch(t);return r.text()},unload(t){t.destroy()}};n.XO.add(Bn)},2460:function(t,e,r){"use strict";r.d(e,{Z:function(){return s}});var n=r(3818),i="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n";class s extends n.dJ{constructor(t=1){super(n.MT,i,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}},2475:function(t,e,r){"use strict";var n=r(6518),i=r(8527),s=r(4916),o=!s("isSupersetOf",function(t){return!t});n({target:"Set",proto:!0,real:!0,forced:o},{isSupersetOf:i})},2489:function(t,e,r){"use strict";var n=r(6518),i=r(9565),s=r(9306),o=r(8551),a=r(1767),l=r(9462),h=r(6319),u=r(6395),c=r(9539),d=r(684),f=r(4549),p=!u&&!d("filter",function(){}),m=!u&&!p&&f("filter",TypeError),g=u||p||m,y=l(function(){var t,e,r,n=this.iterator,s=this.predicate,a=this.next;while(1){if(t=o(i(a,n)),e=this.done=!!t.done,e)return;if(r=t.value,h(n,s,[r,this.counter++],!0))return r}});n({target:"Iterator",proto:!0,real:!0,forced:g},{filter:function(t){o(this);try{s(t)}catch(e){c(this,"throw",e)}return m?i(m,this,t):new y(a(this),{predicate:t})}})},2509:function(t){"use strict";t.exports=Object},2529:function(t){"use strict";t.exports=function(t,e){return{value:t,done:e}}},2531:function(t){"use strict";t.exports=Function.prototype.call},2602:function(t){"use strict";var e="Function.prototype.bind called on incompatible ",r=Object.prototype.toString,n=Math.max,i="[object Function]",s=function(t,e){for(var r=[],n=0;n<t.length;n+=1)r[n]=t[n];for(var i=0;i<e.length;i+=1)r[i+t.length]=e[i];return r},o=function(t,e){for(var r=[],n=e||0,i=0;n<t.length;n+=1,i+=1)r[i]=t[n];return r},a=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};t.exports=function(t){var l=this;if("function"!==typeof l||r.apply(l)!==i)throw new TypeError(e+l);for(var h,u=o(arguments,1),c=function(){if(this instanceof h){var e=l.apply(this,s(u,arguments));return Object(e)===e?e:this}return l.apply(t,s(u,arguments))},d=n(0,l.length-u.length),f=[],p=0;p<d;p++)f[p]="$"+p;if(h=Function("binder","return function ("+a(f,",")+"){ return binder.apply(this,arguments); }")(c),l.prototype){var m=function(){};m.prototype=l.prototype,h.prototype=new m,m.prototype=null}return h}},2603:function(t,e,r){"use strict";var n=r(655);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:n(t)}},2652:function(t,e,r){"use strict";var n=r(6080),i=r(9565),s=r(8551),o=r(6823),a=r(4209),l=r(6198),h=r(1625),u=r(81),c=r(851),d=r(9539),f=TypeError,p=function(t,e){this.stopped=t,this.result=e},m=p.prototype;t.exports=function(t,e,r){var g,y,v,_,x,b,E,T=r&&r.that,w=!(!r||!r.AS_ENTRIES),A=!(!r||!r.IS_RECORD),S=!(!r||!r.IS_ITERATOR),C=!(!r||!r.INTERRUPTED),R=n(e,T),I=function(t){return g&&d(g,"normal"),new p(!0,t)},P=function(t){return w?(s(t),C?R(t[0],t[1],I):R(t[0],t[1])):C?R(t,I):R(t)};if(A)g=t.iterator;else if(S)g=t;else{if(y=c(t),!y)throw new f(o(t)+" is not iterable");if(a(y)){for(v=0,_=l(t);_>v;v++)if(x=P(t[v]),x&&h(m,x))return x;return new p(!1)}g=u(t,y)}b=A?t.next:g.next;while(!(E=i(b,g)).done){try{x=P(E.value)}catch(M){d(g,"throw",M)}if("object"==typeof x&&x&&h(m,x))return x}return new p(!1)}},2673:function(t){"use strict";t.exports=Math.max},2777:function(t,e,r){"use strict";var n=r(9565),i=r(34),s=r(757),o=r(5966),a=r(4270),l=r(8227),h=TypeError,u=l("toPrimitive");t.exports=function(t,e){if(!i(t)||s(t))return t;var r,l=o(t,u);if(l){if(void 0===e&&(e="default"),r=n(l,t,e),!i(r)||s(r))return r;throw new h("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},2787:function(t,e,r){"use strict";var n=r(9297),i=r(4901),s=r(8981),o=r(6119),a=r(2211),l=o("IE_PROTO"),h=Object,u=h.prototype;t.exports=a?h.getPrototypeOf:function(t){var e=s(t);if(n(e,l))return e[l];var r=e.constructor;return i(r)&&e instanceof r?r.prototype:e instanceof h?u:null}},2796:function(t,e,r){"use strict";var n=r(9039),i=r(4901),s=/#|\.prototype\./,o=function(t,e){var r=l[a(t)];return r===u||r!==h&&(i(e)?n(e):!!e)},a=o.normalize=function(t){return String(t).replace(s,".").toLowerCase()},l=o.data={},h=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},2839:function(t,e,r){"use strict";var n=r(4576),i=n.navigator,s=i&&i.userAgent;t.exports=s?String(s):""},2958:function(t,e,r){"use strict";r(4114),r(8111),r(7588),r(8237);var n=r(5767),i=Object.prototype.hasOwnProperty,s=Array.isArray,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t){while(t.length>1){var e=t.pop(),r=e.obj[e.prop];if(s(r)){for(var n=[],i=0;i<r.length;++i)"undefined"!==typeof r[i]&&n.push(r[i]);e.obj[e.prop]=n}}},l=function(t,e){for(var r=e&&e.plainObjects?{__proto__:null}:{},n=0;n<t.length;++n)"undefined"!==typeof t[n]&&(r[n]=t[n]);return r},h=function t(e,r,n){if(!r)return e;if("object"!==typeof r&&"function"!==typeof r){if(s(e))e.push(r);else{if(!e||"object"!==typeof e)return[e,r];(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r))&&(e[r]=!0)}return e}if(!e||"object"!==typeof e)return[e].concat(r);var o=e;return s(e)&&!s(r)&&(o=l(e,n)),s(e)&&s(r)?(r.forEach(function(r,s){if(i.call(e,s)){var o=e[s];o&&"object"===typeof o&&r&&"object"===typeof r?e[s]=t(o,r,n):e.push(r)}else e[s]=r}),e):Object.keys(r).reduce(function(e,s){var o=r[s];return i.call(e,s)?e[s]=t(e[s],o,n):e[s]=o,e},o)},u=function(t,e){return Object.keys(e).reduce(function(t,r){return t[r]=e[r],t},t)},c=function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(i){return n}},d=1024,f=function(t,e,r,i,s){if(0===t.length)return t;var a=t;if("symbol"===typeof t?a=Symbol.prototype.toString.call(t):"string"!==typeof t&&(a=String(t)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"});for(var l="",h=0;h<a.length;h+=d){for(var u=a.length>=d?a.slice(h,h+d):a,c=[],f=0;f<u.length;++f){var p=u.charCodeAt(f);45===p||46===p||95===p||126===p||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===n.RFC1738&&(40===p||41===p)?c[c.length]=u.charAt(f):p<128?c[c.length]=o[p]:p<2048?c[c.length]=o[192|p>>6]+o[128|63&p]:p<55296||p>=57344?c[c.length]=o[224|p>>12]+o[128|p>>6&63]+o[128|63&p]:(f+=1,p=65536+((1023&p)<<10|1023&u.charCodeAt(f)),c[c.length]=o[240|p>>18]+o[128|p>>12&63]+o[128|p>>6&63]+o[128|63&p])}l+=c.join("")}return l},p=function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var i=e[n],s=i.obj[i.prop],o=Object.keys(s),l=0;l<o.length;++l){var h=o[l],u=s[h];"object"===typeof u&&null!==u&&-1===r.indexOf(u)&&(e.push({obj:s,prop:h}),r.push(u))}return a(e),t},m=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},g=function(t){return!(!t||"object"!==typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},y=function(t,e){return[].concat(t,e)},v=function(t,e){if(s(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)};t.exports={arrayToObject:l,assign:u,combine:y,compact:p,decode:c,encode:f,isBuffer:g,isRegExp:m,maybeMap:v,merge:h}},2967:function(t,e,r){"use strict";var n=r(6706),i=r(34),s=r(7750),o=r(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{t=n(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch(a){}return function(r,n){return s(r),o(n),i(r)?(e?t(r,n):r.__proto__=n,r):r}}():void 0)},3023:function(t){"use strict";t.exports=Math.abs},3071:function(t,e,r){"use strict";var n=r(5072),i=r(5631),s=i([n("%String.prototype.indexOf%")]);t.exports=function(t,e){var r=n(t,!!e);return"function"===typeof r&&s(t,".prototype.")>-1?i([r]):r}},3167:function(t,e,r){"use strict";var n=r(4901),i=r(34),s=r(2967);t.exports=function(t,e,r){var o,a;return s&&n(o=e.constructor)&&o!==r&&i(a=o.prototype)&&a!==r.prototype&&s(t,a),t}},3392:function(t,e,r){"use strict";var n=r(9504),i=0,s=Math.random(),o=n(1.1.toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++i+s,36)}},3436:function(t,e,r){"use strict";var n=r(5072),i=r(3071),s=r(1012),o=r(28),a=r(9340),l=n("%WeakMap%",!0),h=i("WeakMap.prototype.get",!0),u=i("WeakMap.prototype.set",!0),c=i("WeakMap.prototype.has",!0),d=i("WeakMap.prototype.delete",!0);t.exports=l?function(){var t,e,r={assert:function(t){if(!r.has(t))throw new a("Side channel does not contain "+s(t))},delete:function(r){if(l&&r&&("object"===typeof r||"function"===typeof r)){if(t)return d(t,r)}else if(o&&e)return e["delete"](r);return!1},get:function(r){return l&&r&&("object"===typeof r||"function"===typeof r)&&t?h(t,r):e&&e.get(r)},has:function(r){return l&&r&&("object"===typeof r||"function"===typeof r)&&t?c(t,r):!!e&&e.has(r)},set:function(r,n){l&&r&&("object"===typeof r||"function"===typeof r)?(t||(t=new l),u(t,r,n)):o&&(e||(e=o()),e.set(r,n))}};return r}:o},3440:function(t,e,r){"use strict";var n=r(7080),i=r(4402),s=r(9286),o=r(5170),a=r(3789),l=r(8469),h=r(507),u=i.has,c=i.remove;t.exports=function(t){var e=n(this),r=a(t),i=s(e);return o(e)<=r.size?l(e,function(t){r.includes(t)&&c(i,t)}):h(r.getIterator(),function(t){u(i,t)&&c(i,t)}),i}},3506:function(t,e,r){"use strict";var n=r(3925),i=String,s=TypeError;t.exports=function(t){if(n(t))return t;throw new s("Can't set "+i(t)+" as a prototype")}},3529:function(t,e,r){"use strict";r(4114);var n=Object.prototype.hasOwnProperty,i="~";function s(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,r,n,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new o(r,n||t,s),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function l(t,e){0===--t._eventsCount?t._events=new s:delete t._events[e]}function h(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),h.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},h.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=new Array(s);n<s;n++)o[n]=r[n].fn;return o},h.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},h.prototype.emit=function(t,e,r,n,s,o){var a=i?i+t:t;if(!this._events[a])return!1;var l,h,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,n),!0;case 5:return u.fn.call(u.context,e,r,n,s),!0;case 6:return u.fn.call(u.context,e,r,n,s,o),!0}for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];u.fn.apply(u.context,l)}else{var d,f=u.length;for(h=0;h<f;h++)switch(u[h].once&&this.removeListener(t,u[h].fn,void 0,!0),c){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,e);break;case 3:u[h].fn.call(u[h].context,e,r);break;case 4:u[h].fn.call(u[h].context,e,r,n);break;default:if(!l)for(d=1,l=new Array(c-1);d<c;d++)l[d-1]=arguments[d];u[h].fn.apply(u[h].context,l)}}return!0},h.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},h.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},h.prototype.removeListener=function(t,e,r,n){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return l(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||n&&!o.once||r&&o.context!==r||l(this,s);else{for(var a=0,h=[],u=o.length;a<u;a++)(o[a].fn!==e||n&&!o[a].once||r&&o[a].context!==r)&&h.push(o[a]);h.length?this._events[s]=1===h.length?h[0]:h:l(this,s)}return this},h.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&l(this,e)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=i,h.EventEmitter=h,t.exports=h},3579:function(t,e,r){"use strict";var n=r(6518),i=r(9565),s=r(2652),o=r(9306),a=r(8551),l=r(1767),h=r(9539),u=r(4549),c=u("some",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:c},{some:function(t){a(this);try{o(t)}catch(n){h(this,"throw",n)}if(c)return i(c,this,t);var e=l(this),r=0;return s(e,function(e,n){if(t(e,r++))return n()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},3650:function(t,e,r){"use strict";var n=r(7080),i=r(4402),s=r(9286),o=r(3789),a=r(507),l=i.add,h=i.has,u=i.remove;t.exports=function(t){var e=n(this),r=o(t).getIterator(),i=s(e);return a(r,function(t){h(e,t)?u(i,t):l(i,t)}),i}},3682:function(t,e,r){"use strict";var n=r(2602);t.exports=Function.prototype.bind||n},3706:function(t,e,r){"use strict";var n=r(9504),i=r(4901),s=r(7629),o=n(Function.toString);i(s.inspectSource)||(s.inspectSource=function(t){return o(t)}),t.exports=s.inspectSource},3717:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},3724:function(t,e,r){"use strict";var n=r(9039);t.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},3789:function(t,e,r){"use strict";var n=r(9306),i=r(8551),s=r(9565),o=r(1291),a=r(1767),l="Invalid size",h=RangeError,u=TypeError,c=Math.max,d=function(t,e){this.set=t,this.size=c(e,0),this.has=n(t.has),this.keys=n(t.keys)};d.prototype={getIterator:function(){return a(i(s(this.keys,this.set)))},includes:function(t){return s(this.has,this.set,t)}},t.exports=function(t){i(t);var e=+t.size;if(e!==e)throw new u(l);var r=o(e);if(r<0)throw new h(l);return new d(t,r)}},3818:function(t,e,r){"use strict";r.d(e,{Gk:function(){return m},B9:function(){return o},t5:function(){return Qn},hq:function(){return ti},JH:function(){return ui},cc:function(){return us},hp:function(){return ri},dZ:function(){return Kn},fr:function(){return g},jl:function(){return vi},Td:function(){return fi},_4:function(){return a},Pp:function(){return _i},Ag:function(){return Mn},hR:function(){return l},dJ:function(){return bs},V2:function(){return hi},vg:function(){return _},E8:function(){return p},uq:function(){return Ei},Pt:function(){return fs},oA:function(){return Oi},TO:function(){return ci},bR:function(){return mi},tS:function(){return xi},BP:function(){return ss},X1:function(){return ks},bO:function(){return di},M_:function(){return yi},Y7:function(){return Bs},TE:function(){return bi},M6:function(){return d},HY:function(){return pi},$f:function(){return _a},Mt:function(){return ls},Uw:function(){return Xn},QE:function(){return u},gP:function(){return Fs},NW:function(){return qs},Rv:function(){return Jo},dL:function(){return Fi},dQ:function(){return qo},k2:function(){return as},u3:function(){return Bn},uR:function(){return f},q5:function(){return ea},Eo:function(){return sa},MT:function(){return ia},XO:function(){return Fn},W0:function(){return T},Wp:function(){return n}});var n={};r.r(n),r.d(n,{BaseTextureCache:function(){return _n},BoundingBox:function(){return gn},CanvasRenderTarget:function(){return En},DATA_URI:function(){return rn},EventEmitter:function(){return H},ProgramCache:function(){return yn},TextureCache:function(){return vn},clearTextureCache:function(){return bn},correctBlendMode:function(){return Jr},createIndicesForQuads:function(){return nn},decomposeDataUri:function(){return Cn},deprecation:function(){return tt},destroyTextureCache:function(){return xn},determineCrossOrigin:function(){return In},earcut:function(){return W},getBufferType:function(){return sn},getCanvasBoundingBox:function(){return An},getResolutionOfUrl:function(){return Pn},hex2rgb:function(){return Vr},hex2string:function(){return $r},interleaveTypedArrays:function(){return an},isMobile:function(){return z},isPow2:function(){return hn},isWebGLSupported:function(){return it},log2:function(){return un},nextPow2:function(){return ln},path:function(){return J},premultiplyBlendMode:function(){return Zr},premultiplyRgba:function(){return Qr},premultiplyTint:function(){return tn},premultiplyTintToRgba:function(){return en},removeItems:function(){return cn},rgb2hex:function(){return qr},sayHello:function(){return rt},sign:function(){return dn},skipHello:function(){return et},string2hex:function(){return Yr},trimCanvas:function(){return Sn},uid:function(){return pn},url:function(){return V}});var i=(t=>(t[t["WEBGL_LEGACY"]=0]="WEBGL_LEGACY",t[t["WEBGL"]=1]="WEBGL",t[t["WEBGL2"]=2]="WEBGL2",t))(i||{}),s=(t=>(t[t["COLOR"]=16384]="COLOR",t[t["DEPTH"]=256]="DEPTH",t[t["STENCIL"]=1024]="STENCIL",t))(s||{}),o=(t=>(t[t["NORMAL"]=0]="NORMAL",t[t["ADD"]=1]="ADD",t[t["MULTIPLY"]=2]="MULTIPLY",t[t["SCREEN"]=3]="SCREEN",t[t["OVERLAY"]=4]="OVERLAY",t[t["DARKEN"]=5]="DARKEN",t[t["LIGHTEN"]=6]="LIGHTEN",t[t["COLOR_DODGE"]=7]="COLOR_DODGE",t[t["COLOR_BURN"]=8]="COLOR_BURN",t[t["HARD_LIGHT"]=9]="HARD_LIGHT",t[t["SOFT_LIGHT"]=10]="SOFT_LIGHT",t[t["DIFFERENCE"]=11]="DIFFERENCE",t[t["EXCLUSION"]=12]="EXCLUSION",t[t["HUE"]=13]="HUE",t[t["SATURATION"]=14]="SATURATION",t[t["COLOR"]=15]="COLOR",t[t["LUMINOSITY"]=16]="LUMINOSITY",t[t["NORMAL_NPM"]=17]="NORMAL_NPM",t[t["ADD_NPM"]=18]="ADD_NPM",t[t["SCREEN_NPM"]=19]="SCREEN_NPM",t[t["NONE"]=20]="NONE",t[t["SRC_OVER"]=0]="SRC_OVER",t[t["SRC_IN"]=21]="SRC_IN",t[t["SRC_OUT"]=22]="SRC_OUT",t[t["SRC_ATOP"]=23]="SRC_ATOP",t[t["DST_OVER"]=24]="DST_OVER",t[t["DST_IN"]=25]="DST_IN",t[t["DST_OUT"]=26]="DST_OUT",t[t["DST_ATOP"]=27]="DST_ATOP",t[t["ERASE"]=26]="ERASE",t[t["SUBTRACT"]=28]="SUBTRACT",t[t["XOR"]=29]="XOR",t))(o||{}),a=(t=>(t[t["POINTS"]=0]="POINTS",t[t["LINES"]=1]="LINES",t[t["LINE_LOOP"]=2]="LINE_LOOP",t[t["LINE_STRIP"]=3]="LINE_STRIP",t[t["TRIANGLES"]=4]="TRIANGLES",t[t["TRIANGLE_STRIP"]=5]="TRIANGLE_STRIP",t[t["TRIANGLE_FAN"]=6]="TRIANGLE_FAN",t))(a||{}),l=(t=>(t[t["RGBA"]=6408]="RGBA",t[t["RGB"]=6407]="RGB",t[t["RG"]=33319]="RG",t[t["RED"]=6403]="RED",t[t["RGBA_INTEGER"]=36249]="RGBA_INTEGER",t[t["RGB_INTEGER"]=36248]="RGB_INTEGER",t[t["RG_INTEGER"]=33320]="RG_INTEGER",t[t["RED_INTEGER"]=36244]="RED_INTEGER",t[t["ALPHA"]=6406]="ALPHA",t[t["LUMINANCE"]=6409]="LUMINANCE",t[t["LUMINANCE_ALPHA"]=6410]="LUMINANCE_ALPHA",t[t["DEPTH_COMPONENT"]=6402]="DEPTH_COMPONENT",t[t["DEPTH_STENCIL"]=34041]="DEPTH_STENCIL",t))(l||{}),h=(t=>(t[t["TEXTURE_2D"]=3553]="TEXTURE_2D",t[t["TEXTURE_CUBE_MAP"]=34067]="TEXTURE_CUBE_MAP",t[t["TEXTURE_2D_ARRAY"]=35866]="TEXTURE_2D_ARRAY",t[t["TEXTURE_CUBE_MAP_POSITIVE_X"]=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t["TEXTURE_CUBE_MAP_NEGATIVE_X"]=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t["TEXTURE_CUBE_MAP_POSITIVE_Y"]=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t["TEXTURE_CUBE_MAP_NEGATIVE_Y"]=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t["TEXTURE_CUBE_MAP_POSITIVE_Z"]=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t["TEXTURE_CUBE_MAP_NEGATIVE_Z"]=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(h||{}),u=(t=>(t[t["UNSIGNED_BYTE"]=5121]="UNSIGNED_BYTE",t[t["UNSIGNED_SHORT"]=5123]="UNSIGNED_SHORT",t[t["UNSIGNED_SHORT_5_6_5"]=33635]="UNSIGNED_SHORT_5_6_5",t[t["UNSIGNED_SHORT_4_4_4_4"]=32819]="UNSIGNED_SHORT_4_4_4_4",t[t["UNSIGNED_SHORT_5_5_5_1"]=32820]="UNSIGNED_SHORT_5_5_5_1",t[t["UNSIGNED_INT"]=5125]="UNSIGNED_INT",t[t["UNSIGNED_INT_10F_11F_11F_REV"]=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t["UNSIGNED_INT_2_10_10_10_REV"]=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t["UNSIGNED_INT_24_8"]=34042]="UNSIGNED_INT_24_8",t[t["UNSIGNED_INT_5_9_9_9_REV"]=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t["BYTE"]=5120]="BYTE",t[t["SHORT"]=5122]="SHORT",t[t["INT"]=5124]="INT",t[t["FLOAT"]=5126]="FLOAT",t[t["FLOAT_32_UNSIGNED_INT_24_8_REV"]=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t["HALF_FLOAT"]=36193]="HALF_FLOAT",t))(u||{}),c=(t=>(t[t["FLOAT"]=0]="FLOAT",t[t["INT"]=1]="INT",t[t["UINT"]=2]="UINT",t))(c||{}),d=(t=>(t[t["NEAREST"]=0]="NEAREST",t[t["LINEAR"]=1]="LINEAR",t))(d||{}),f=(t=>(t[t["CLAMP"]=33071]="CLAMP",t[t["REPEAT"]=10497]="REPEAT",t[t["MIRRORED_REPEAT"]=33648]="MIRRORED_REPEAT",t))(f||{}),p=(t=>(t[t["OFF"]=0]="OFF",t[t["POW2"]=1]="POW2",t[t["ON"]=2]="ON",t[t["ON_MANUAL"]=3]="ON_MANUAL",t))(p||{}),m=(t=>(t[t["NPM"]=0]="NPM",t[t["UNPACK"]=1]="UNPACK",t[t["PMA"]=2]="PMA",t[t["NO_PREMULTIPLIED_ALPHA"]=0]="NO_PREMULTIPLIED_ALPHA",t[t["PREMULTIPLY_ON_UPLOAD"]=1]="PREMULTIPLY_ON_UPLOAD",t[t["PREMULTIPLIED_ALPHA"]=2]="PREMULTIPLIED_ALPHA",t))(m||{}),g=(t=>(t[t["NO"]=0]="NO",t[t["YES"]=1]="YES",t[t["AUTO"]=2]="AUTO",t[t["BLEND"]=0]="BLEND",t[t["CLEAR"]=1]="CLEAR",t[t["BLIT"]=2]="BLIT",t))(g||{}),y=(t=>(t[t["AUTO"]=0]="AUTO",t[t["MANUAL"]=1]="MANUAL",t))(y||{}),v=(t=>(t["LOW"]="lowp",t["MEDIUM"]="mediump",t["HIGH"]="highp",t))(v||{}),_=(t=>(t[t["NONE"]=0]="NONE",t[t["SCISSOR"]=1]="SCISSOR",t[t["STENCIL"]=2]="STENCIL",t[t["SPRITE"]=3]="SPRITE",t[t["COLOR"]=4]="COLOR",t))(_||{}),x=(t=>(t[t["NONE"]=0]="NONE",t[t["LOW"]=2]="LOW",t[t["MEDIUM"]=4]="MEDIUM",t[t["HIGH"]=8]="HIGH",t))(x||{}),b=(t=>(t[t["ELEMENT_ARRAY_BUFFER"]=34963]="ELEMENT_ARRAY_BUFFER",t[t["ARRAY_BUFFER"]=34962]="ARRAY_BUFFER",t[t["UNIFORM_BUFFER"]=35345]="UNIFORM_BUFFER",t))(b||{});const E={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>{const e=new DOMParser;return e.parseFromString(t,"text/xml")}},T={ADAPTER:E,RESOLUTION:1,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,premultipliedAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1,hello:!1},CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var w=/iPhone/i,A=/iPod/i,S=/iPad/i,C=/\biOS-universal(?:.+)Mac\b/i,R=/\bAndroid(?:.+)Mobile\b/i,I=/Android/i,P=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,M=/Silk/i,O=/Windows Phone/i,D=/\bWindows(?:.+)ARM\b/i,F=/BlackBerry/i,B=/BB10/i,N=/Opera Mini/i,L=/\b(CriOS|Chrome)(?:.+)Mobile/i,k=/Mobile(?:.+)Firefox\b/i,U=function(t){return"undefined"!==typeof t&&"MacIntel"===t.platform&&"number"===typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"===typeof MSStream};function G(t){return function(e){return e.test(t)}}function j(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"===typeof navigator?"string"===typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=e.userAgent,n=r.split("[FBAN");"undefined"!==typeof n[1]&&(r=n[0]),n=r.split("Twitter"),"undefined"!==typeof n[1]&&(r=n[0]);var i=G(r),s={apple:{phone:i(w)&&!i(O),ipod:i(A),tablet:!i(w)&&(i(S)||U(e))&&!i(O),universal:i(C),device:(i(w)||i(A)||i(S)||i(C)||U(e))&&!i(O)},amazon:{phone:i(P),tablet:!i(P)&&i(M),device:i(P)||i(M)},android:{phone:!i(O)&&i(P)||!i(O)&&i(R),tablet:!i(O)&&!i(P)&&!i(R)&&(i(M)||i(I)),device:!i(O)&&(i(P)||i(M)||i(R)||i(I))||i(/\bokhttp\b/i)},windows:{phone:i(O),tablet:i(D),device:i(O)||i(D)},other:{blackberry:i(F),blackberry10:i(B),opera:i(N),firefox:i(k),chrome:i(L),device:i(F)||i(B)||i(N)||i(k)||i(L)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const z=j(globalThis.navigator);T.RETINA_PREFIX=/@([0-9\.]+)x/,T.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var H=r(3529),W=r(6583),X=r(5106);const V={parse:X.qg,format:X.GP,resolve:X.hd};function $(t){if("string"!==typeof t)throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function Y(t){const e=t.split("?")[0];return e.split("#")[0]}function q(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function K(t,e,r){return t.replace(new RegExp(q(e),"g"),r)}function Z(t,e){let r="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(47===o)break;o=47}if(47===o){if(i===a-1||1===s);else if(i!==a-1&&2===s){if(r.length<2||2!==n||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){const t=r.lastIndexOf("/");if(t!==r.length-1){-1===t?(r="",n=0):(r=r.slice(0,t),n=r.length-1-r.lastIndexOf("/")),i=a,s=0;continue}}else if(2===r.length||1===r.length){r="",n=0,i=a,s=0;continue}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+=`/${t.slice(i+1,a)}`:r=t.slice(i+1,a),n=a-i-1;i=a,s=0}else 46===o&&-1!==s?++s:s=-1}return r}const J={toPosix(t){return K(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){$(t),t=this.toPosix(t);let e="";const r=/^file:\/\/\//.exec(t),n=/^[^/:]+:\/\//.exec(t),i=/^[^/:]+:\//.exec(t);if(r||n||i){const s=r?.[0]||n?.[0]||i?.[0];e=s,t=t.slice(s.length)}return e},toAbsolute(t,e,r){if(this.isDataUrl(t))return t;const n=Y(this.toPosix(e??T.ADAPTER.getBaseUrl())),i=Y(this.toPosix(r??this.rootname(n)));if($(t),t=this.toPosix(t),t.startsWith("/"))return J.join(i,t.slice(1));const s=this.isAbsolute(t)?t:this.join(n,t);return s},normalize(t){if(t=this.toPosix(t),$(t),0===t.length)return".";let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return t=Z(t,!1),t.length>0&&n&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return $(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(...t){if(0===t.length)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];if($(n),n.length>0)if(void 0===e)e=n;else{const i=t[r-1]??"";this.extname(i)?e+=`/../${n}`:e+=`/${n}`}}return void 0===e?".":this.normalize(e)},dirname(t){if($(t),0===t.length)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=47===e;let n=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),47===e){if(!i){n=a;break}}else i=!1;return-1===n?r?"/":this.isUrl(o)?s+t:s:r&&1===n?"//":s+t.slice(0,n)},rootname(t){$(t),t=this.toPosix(t);let e="";if(e=t.startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);e=-1!==r?t.slice(0,r):t,e.endsWith("/")||(e+="/")}return e},basename(t,e){$(t),e&&$(e),t=Y(this.toPosix(t));let r,n=0,i=-1,s=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(r=t.length-1;r>=0;--r){const l=t.charCodeAt(r);if(47===l){if(!s){n=r+1;break}}else-1===a&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?-1===--o&&(i=r):(o=-1,i=a))}return n===i?i=a:-1===i&&(i=t.length),t.slice(n,i)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!s){n=r+1;break}}else-1===i&&(s=!1,i=r+1);return-1===i?"":t.slice(n,i)},extname(t){$(t),t=Y(this.toPosix(t));let e=-1,r=0,n=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(47!==a)-1===n&&(i=!1,n=o+1),46===a?-1===e?e=o:1!==s&&(s=1):-1!==e&&(s=-1);else if(!i){r=o+1;break}}return-1===e||-1===n||0===s||1===s&&e===n-1&&e===r+1?"":t.slice(e,n)},parse(t){$(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;t=Y(this.toPosix(t));let r=t.charCodeAt(0);const n=this.isAbsolute(t);let i;const s="";e.root=this.rootname(t),i=n||this.hasProtocol(t)?1:0;let o=-1,a=0,l=-1,h=!0,u=t.length-1,c=0;for(;u>=i;--u)if(r=t.charCodeAt(u),47!==r)-1===l&&(h=!1,l=u+1),46===r?-1===o?o=u:1!==c&&(c=1):-1!==o&&(c=-1);else if(!h){a=u+1;break}return-1===o||-1===l||0===c||1===c&&o===l-1&&o===a+1?-1!==l&&(e.base=e.name=0===a&&n?t.slice(1,l):t.slice(a,l)):(0===a&&n?(e.name=t.slice(1,o),e.base=t.slice(1,l)):(e.name=t.slice(a,o),e.base=t.slice(a,l)),e.ext=t.slice(o,l)),e.dir=this.dirname(t),s&&(e.dir=s+e.dir),e},sep:"/",delimiter:":"},Q={};function tt(t,e,r=3){if(Q[e])return;let n=(new Error).stack;"undefined"===typeof n?console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`):(n=n.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}\nDeprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`),console.warn(n))),Q[e]=!0}function et(){tt("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function rt(){tt("7.0.0",'sayHello is deprecated, please use Renderer\'s "hello" option')}let nt;function it(){return"undefined"===typeof nt&&(nt=function(){const t={stencil:!0,failIfMajorPerformanceCaveat:T.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!T.ADAPTER.getWebGLRenderingContext())return!1;const e=T.ADAPTER.createCanvas();let r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);const n=!!r?.getContextAttributes()?.stencil;if(r){const t=r.getExtension("WEBGL_lose_context");t&&t.loseContext()}return r=null,n}catch(e){return!1}}()),nt}var st="#f0f8ff",ot="#faebd7",at="#00ffff",lt="#7fffd4",ht="#f0ffff",ut="#f5f5dc",ct="#ffe4c4",dt="#000000",ft="#ffebcd",pt="#0000ff",mt="#8a2be2",gt="#a52a2a",yt="#deb887",vt="#5f9ea0",_t="#7fff00",xt="#d2691e",bt="#ff7f50",Et="#6495ed",Tt="#fff8dc",wt="#dc143c",At="#00ffff",St="#00008b",Ct="#008b8b",Rt="#b8860b",It="#a9a9a9",Pt="#006400",Mt="#a9a9a9",Ot="#bdb76b",Dt="#8b008b",Ft="#556b2f",Bt="#ff8c00",Nt="#9932cc",Lt="#8b0000",kt="#e9967a",Ut="#8fbc8f",Gt="#483d8b",jt="#2f4f4f",zt="#2f4f4f",Ht="#00ced1",Wt="#9400d3",Xt="#ff1493",Vt="#00bfff",$t="#696969",Yt="#696969",qt="#1e90ff",Kt="#b22222",Zt="#fffaf0",Jt="#228b22",Qt="#ff00ff",te="#dcdcdc",ee="#f8f8ff",re="#daa520",ne="#ffd700",ie="#808080",se="#008000",oe="#adff2f",ae="#808080",le="#f0fff0",he="#ff69b4",ue="#cd5c5c",ce="#4b0082",de="#fffff0",fe="#f0e68c",pe="#fff0f5",me="#e6e6fa",ge="#7cfc00",ye="#fffacd",ve="#add8e6",_e="#f08080",xe="#e0ffff",be="#fafad2",Ee="#d3d3d3",Te="#90ee90",we="#d3d3d3",Ae="#ffb6c1",Se="#ffa07a",Ce="#20b2aa",Re="#87cefa",Ie="#778899",Pe="#778899",Me="#b0c4de",Oe="#ffffe0",De="#00ff00",Fe="#32cd32",Be="#faf0e6",Ne="#ff00ff",Le="#800000",ke="#66cdaa",Ue="#0000cd",Ge="#ba55d3",je="#9370db",ze="#3cb371",He="#7b68ee",We="#00fa9a",Xe="#48d1cc",Ve="#c71585",$e="#191970",Ye="#f5fffa",qe="#ffe4e1",Ke="#ffe4b5",Ze="#ffdead",Je="#000080",Qe="#fdf5e6",tr="#808000",er="#6b8e23",rr="#ffa500",nr="#ff4500",ir="#da70d6",sr="#eee8aa",or="#98fb98",ar="#afeeee",lr="#db7093",hr="#ffefd5",ur="#ffdab9",cr="#cd853f",dr="#ffc0cb",fr="#dda0dd",pr="#b0e0e6",mr="#800080",gr="#663399",yr="#ff0000",vr="#bc8f8f",_r="#4169e1",xr="#8b4513",br="#fa8072",Er="#f4a460",Tr="#2e8b57",wr="#fff5ee",Ar="#a0522d",Sr="#c0c0c0",Cr="#87ceeb",Rr="#6a5acd",Ir="#708090",Pr="#708090",Mr="#fffafa",Or="#00ff7f",Dr="#4682b4",Fr="#d2b48c",Br="#008080",Nr="#d8bfd8",Lr="#ff6347",kr="#40e0d0",Ur="#ee82ee",Gr="#f5deb3",jr="#ffffff",zr="#f5f5f5",Hr="#ffff00",Wr="#9acd32",Xr={aliceblue:st,antiquewhite:ot,aqua:at,aquamarine:lt,azure:ht,beige:ut,bisque:ct,black:dt,blanchedalmond:ft,blue:pt,blueviolet:mt,brown:gt,burlywood:yt,cadetblue:vt,chartreuse:_t,chocolate:xt,coral:bt,cornflowerblue:Et,cornsilk:Tt,crimson:wt,cyan:At,darkblue:St,darkcyan:Ct,darkgoldenrod:Rt,darkgray:It,darkgreen:Pt,darkgrey:Mt,darkkhaki:Ot,darkmagenta:Dt,darkolivegreen:Ft,darkorange:Bt,darkorchid:Nt,darkred:Lt,darksalmon:kt,darkseagreen:Ut,darkslateblue:Gt,darkslategray:jt,darkslategrey:zt,darkturquoise:Ht,darkviolet:Wt,deeppink:Xt,deepskyblue:Vt,dimgray:$t,dimgrey:Yt,dodgerblue:qt,firebrick:Kt,floralwhite:Zt,forestgreen:Jt,fuchsia:Qt,gainsboro:te,ghostwhite:ee,goldenrod:re,gold:ne,gray:ie,green:se,greenyellow:oe,grey:ae,honeydew:le,hotpink:he,indianred:ue,indigo:ce,ivory:de,khaki:fe,lavenderblush:pe,lavender:me,lawngreen:ge,lemonchiffon:ye,lightblue:ve,lightcoral:_e,lightcyan:xe,lightgoldenrodyellow:be,lightgray:Ee,lightgreen:Te,lightgrey:we,lightpink:Ae,lightsalmon:Se,lightseagreen:Ce,lightskyblue:Re,lightslategray:Ie,lightslategrey:Pe,lightsteelblue:Me,lightyellow:Oe,lime:De,limegreen:Fe,linen:Be,magenta:Ne,maroon:Le,mediumaquamarine:ke,mediumblue:Ue,mediumorchid:Ge,mediumpurple:je,mediumseagreen:ze,mediumslateblue:He,mediumspringgreen:We,mediumturquoise:Xe,mediumvioletred:Ve,midnightblue:$e,mintcream:Ye,mistyrose:qe,moccasin:Ke,navajowhite:Ze,navy:Je,oldlace:Qe,olive:tr,olivedrab:er,orange:rr,orangered:nr,orchid:ir,palegoldenrod:sr,palegreen:or,paleturquoise:ar,palevioletred:lr,papayawhip:hr,peachpuff:ur,peru:cr,pink:dr,plum:fr,powderblue:pr,purple:mr,rebeccapurple:gr,red:yr,rosybrown:vr,royalblue:_r,saddlebrown:xr,salmon:br,sandybrown:Er,seagreen:Tr,seashell:wr,sienna:Ar,silver:Sr,skyblue:Cr,slateblue:Rr,slategray:Ir,slategrey:Pr,snow:Mr,springgreen:Or,steelblue:Dr,tan:Fr,teal:Br,thistle:Nr,tomato:Lr,turquoise:kr,violet:Ur,wheat:Gr,white:jr,whitesmoke:zr,yellow:Hr,yellowgreen:Wr};function Vr(t,e=[]){return e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function $r(t){let e=t.toString(16);return e="000000".substring(0,6-e.length)+e,`#${e}`}function Yr(t){if("string"===typeof t&&(t=Xr[t.toLowerCase()]||t,"#"===t[0]&&(t=t.slice(1)),3===t.length)){const[e,r,n]=t;t=e+e+r+r+n+n}return parseInt(t,16)}function qr(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}r(4114),r(9577);function Kr(){const t=[],e=[];for(let n=0;n<32;n++)t[n]=n,e[n]=n;t[o.NORMAL_NPM]=o.NORMAL,t[o.ADD_NPM]=o.ADD,t[o.SCREEN_NPM]=o.SCREEN,e[o.NORMAL]=o.NORMAL_NPM,e[o.ADD]=o.ADD_NPM,e[o.SCREEN]=o.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}const Zr=Kr();function Jr(t,e){return Zr[e?1:0][t]}function Qr(t,e,r,n){return r=r||new Float32Array(4),n||void 0===n?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function tn(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;let r=t>>16&255,n=t>>8&255,i=255&t;return r=r*e+.5|0,n=n*e+.5|0,i=i*e+.5|0,(255*e<<24)+(r<<16)+(n<<8)+i}function en(t,e,r,n){return r=r||new Float32Array(4),r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,(n||void 0===n)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}const rn=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function nn(t,e=null){const r=6*t;if(e=e||new Uint16Array(r),e.length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let n=0,i=0;n<r;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function sn(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}const on={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function an(t,e){let r=0,n=0;const i={};for(let l=0;l<t.length;l++)n+=e[l],r+=t[l].length;const s=new ArrayBuffer(4*r);let o=null,a=0;for(let l=0;l<t.length;l++){const r=e[l],h=t[l],u=sn(h);i[u]||(i[u]=new on[u](s)),o=i[u];for(let t=0;t<h.length;t++){const e=(t/r|0)*n+a,i=t%r;o[e+i]=h[t]}a+=r}return new Float32Array(s)}function ln(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function hn(t){return!(t&t-1)&&!!t}function un(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function cn(t,e,r){const n=t.length;let i;if(e>=n||0===r)return;r=e+r>n?n-e:r;const s=n-r;for(i=e;i<s;++i)t[i]=t[i+r];t.length=s}function dn(t){return 0===t?0:t<0?-1:1}let fn=0;function pn(){return++fn}const mn=class{constructor(t,e,r,n){this.left=t,this.top=e,this.right=r,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let gn=mn;gn.EMPTY=new mn(0,0,0,0);const yn={},vn=Object.create(null),_n=Object.create(null);function xn(){let t;for(t in vn)vn[t].destroy();for(t in _n)_n[t].destroy()}function bn(){let t;for(t in vn)delete vn[t];for(t in _n)delete _n[t]}class En{constructor(t,e,r){this._canvas=T.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||T.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Tn(t,e,r){for(let n=0,i=4*r*e;n<e;++n,i+=4)if(0!==t[i+3])return!1;return!0}function wn(t,e,r,n,i){const s=4*e;for(let o=n,a=n*s+4*r;o<=i;++o,a+=s)if(0!==t[a+3])return!1;return!0}function An(t){const{width:e,height:r}=t,n=t.getContext("2d",{willReadFrequently:!0});if(null===n)throw new TypeError("Failed to get canvas 2D context");const i=n.getImageData(0,0,e,r),s=i.data;let o=0,a=0,l=e-1,h=r-1;while(a<r&&Tn(s,e,a))++a;if(a===r)return gn.EMPTY;while(Tn(s,e,h))--h;while(wn(s,e,o,a,h))++o;while(wn(s,e,l,a,h))--l;return++l,++h,new gn(o,a,l,h)}function Sn(t){const e=An(t),{width:r,height:n}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(null===s)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,r,n)}return{width:r,height:n,data:i}}function Cn(t){const e=rn.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}let Rn;function In(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,Rn||(Rn=document.createElement("a")),Rn.href=t;const r=V.parse(Rn.href),n=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&n&&r.protocol===e.protocol?"":"anonymous"}function Pn(t,e=1){const r=T.RETINA_PREFIX?.exec(t);return r?parseFloat(r[1]):e}r(8111),r(7588),r(1701);var Mn=(t=>(t["Renderer"]="renderer",t["Application"]="application",t["RendererSystem"]="renderer-webgl-system",t["RendererPlugin"]="renderer-webgl-plugin",t["CanvasRendererSystem"]="renderer-canvas-system",t["CanvasRendererPlugin"]="renderer-canvas-plugin",t["Asset"]="asset",t["LoadParser"]="load-parser",t["ResolveParser"]="resolve-parser",t["CacheParser"]="cache-parser",t["DetectionParser"]="detection-parser",t))(Mn||{});const On=t=>{if("function"===typeof t||"object"===typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");const e="object"!==typeof t.extension?{type:t.extension}:t.extension;t={...e,ref:t}}if("object"!==typeof t)throw new Error("Invalid extension type");return t={...t},"string"===typeof t.type&&(t.type=[t.type]),t},Dn=(t,e)=>On(t).priority??e,Fn={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(On).forEach(t=>{t.type.forEach(e=>this._removeHandlers[e]?.(t))}),this},add(...t){return t.map(On).forEach(t=>{t.type.forEach(e=>{const r=this._addHandlers,n=this._queue;r[e]?r[e](t):(n[e]=n[e]||[],n[e].push(t))})}),this},handle(t,e,r){const n=this._addHandlers,i=this._removeHandlers;if(n[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,i[t]=r;const s=this._queue;return s[t]&&(s[t].forEach(t=>e(t)),delete s[t]),this},handleByMap(t,e){return this.handle(t,t=>{e[t.name]=t.ref},t=>{delete e[t.name]})},handleByList(t,e,r=-1){return this.handle(t,t=>{e.includes(t.ref)||(e.push(t.ref),e.sort((t,e)=>Dn(e,r)-Dn(t,r)))},t=>{const r=e.indexOf(t.ref);-1!==r&&e.splice(r,1)})}};class Bn{constructor(t){"number"===typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const Nn=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Ln(t){let e="";for(let r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function kn(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);while(1){const n=Nn.replace(/%forloop%/gi,Ln(t));if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}const Un=0,Gn=1,jn=2,zn=3,Hn=4,Wn=5;class Xn{constructor(){this.data=0,this.blendMode=o.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Un)}set blend(t){!!(this.data&1<<Un)!==t&&(this.data^=1<<Un)}get offsets(){return!!(this.data&1<<Gn)}set offsets(t){!!(this.data&1<<Gn)!==t&&(this.data^=1<<Gn)}get culling(){return!!(this.data&1<<jn)}set culling(t){!!(this.data&1<<jn)!==t&&(this.data^=1<<jn)}get depthTest(){return!!(this.data&1<<zn)}set depthTest(t){!!(this.data&1<<zn)!==t&&(this.data^=1<<zn)}get depthMask(){return!!(this.data&1<<Wn)}set depthMask(t){!!(this.data&1<<Wn)!==t&&(this.data^=1<<Wn)}get clockwiseFrontFace(){return!!(this.data&1<<Hn)}set clockwiseFrontFace(t){!!(this.data&1<<Hn)!==t&&(this.data^=1<<Hn)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==o.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new Xn;return t.depthTest=!1,t.blend=!0,t}}const Vn=[];function $n(t,e){if(!t)return null;let r="";if("string"===typeof t){const e=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);e&&(r=e[1].toLowerCase())}for(let n=Vn.length-1;n>=0;--n){const i=Vn[n];if(i.test&&i.test(t,r))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Yn{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,r,n,i,s,o,a){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:h}=this;this._aliasCount++;for(let u=0,c=h.length;u<c;u++)h[u][l](t,e,r,n,i,s,o,a);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(Yn.prototype,{dispatch:{value:Yn.prototype.emit},run:{value:Yn.prototype.emit}});class qn{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Yn("setRealSize"),this.onUpdate=new Yn("update"),this.onError=new Yn("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class Kn extends qn{constructor(t,e){const{width:r,height:n}=e||{};if(!r||!n)throw new Error("BufferResource width or height invalid");super(r,n),this.data=t}upload(t,e,r){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===m.UNPACK);const i=e.realWidth,s=e.realHeight;return r.width===i&&r.height===s?n.texSubImage2D(e.target,0,0,0,i,s,e.format,r.type,this.data):(r.width=i,r.height=s,n.texImage2D(e.target,0,r.internalFormat,i,s,0,e.format,r.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const Zn={scaleMode:d.NEAREST,format:l.RGBA,alphaMode:m.NPM},Jn=class extends H{constructor(t=null,e=null){super(),e=Object.assign({},Jn.defaultOptions,e);const{alphaMode:r,mipmap:n,anisotropicLevel:i,scaleMode:s,width:o,height:a,wrapMode:l,format:h,type:u,target:c,resolution:d,resourceOptions:f}=e;!t||t instanceof qn||(t=$n(t,f),t.internal=!0),this.resolution=d||T.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=i,this._wrapMode=l,this._scaleMode=s,this.format=h,this.type=u,this.target=c,this.alphaMode=r,this.uid=pn(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this}setSize(t,e,r){return r=r||this.resolution,this.setRealSize(t*r,e*r,r)}setRealSize(t,e,r){return this.resolution=r||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=hn(this.realWidth)&&hn(this.realHeight)}setResolution(t){const e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete _n[this.cacheId],delete vn[this.cacheId],this.cacheId=null),this.dispose(),Jn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,r=T.STRICT_TEXTURE_CACHE){const n="string"===typeof t;let i=null;if(n)i=t;else{if(!t._pixiId){const r=e?.pixiIdPrefix||"pixiid";t._pixiId=`${r}_${pn()}`}i=t._pixiId}let s=_n[i];if(n&&r&&!s)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return s||(s=new Jn(t,e),s.cacheId=i,Jn.addToCache(s,i)),s}static fromBuffer(t,e,r,n){t=t||new Float32Array(e*r*4);const i=new Kn(t,{width:e,height:r}),s=t instanceof Float32Array?u.FLOAT:u.UNSIGNED_BYTE;return new Jn(i,Object.assign({},Zn,n||{width:e,height:r,type:s}))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),_n[e]&&_n[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),_n[e]=t)}static removeFromCache(t){if("string"===typeof t){const e=_n[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete _n[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete _n[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let Qn=Jn;Qn.defaultOptions={mipmap:p.POW2,anisotropicLevel:0,scaleMode:d.LINEAR,wrapMode:f.CLAMP,alphaMode:m.UNPACK,target:h.TEXTURE_2D,format:l.RGBA,type:u.UNSIGNED_BYTE},Qn._globalBatch=0;class ti{constructor(){this.texArray=null,this.blend=0,this.type=a.TRIANGLES,this.start=0,this.size=0,this.data=null}}let ei=0;class ri{constructor(t,e=!0,r=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=ei++,this.disposeRunner=new Yn("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?b.ELEMENT_ARRAY_BUFFER:b.ARRAY_BUFFER}get index(){return this.type===b.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new ri(t)}}class ni{constructor(t,e=0,r=!1,n=u.FLOAT,i,s,o,a=1){this.buffer=t,this.size=e,this.normalized=r,this.type=n,this.stride=i,this.start=s,this.instance=o,this.divisor=a}destroy(){this.buffer=null}static from(t,e,r,n,i){return new ni(t,e,r,n,i)}}const ii={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function si(t,e){let r=0,n=0;const i={};for(let l=0;l<t.length;l++)n+=e[l],r+=t[l].length;const s=new ArrayBuffer(4*r);let o=null,a=0;for(let l=0;l<t.length;l++){const r=e[l],h=t[l],u=sn(h);i[u]||(i[u]=new ii[u](s)),o=i[u];for(let t=0;t<h.length;t++){const e=(t/r|0)*n+a,i=t%r;o[e+i]=h[t]}a+=r}return new Float32Array(s)}const oi={5126:4,5123:2,5121:1};let ai=0;const li={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array};class hi{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=ai++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Yn("disposeGeometry"),this.refCount=0}addAttribute(t,e,r=0,n=!1,i,s,o,a=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof ri||(e instanceof Array&&(e=new Float32Array(e)),e=new ri(e));const l=t.split("|");if(l.length>1){for(let t=0;t<l.length;t++)this.addAttribute(l[t],e,r,n,i);return this}let h=this.buffers.indexOf(e);return-1===h&&(this.buffers.push(e),h=this.buffers.length-1),this.attributes[t]=new ni(h,r,n,i,s,o,a),this.instanced=this.instanced||a,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof ri||(t instanceof Array&&(t=new Uint16Array(t)),t=new ri(t)),t.type=b.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const t=[],e=[],r=new ri;let n;for(n in this.attributes){const r=this.attributes[n],i=this.buffers[r.buffer];t.push(i.data),e.push(r.size*oi[r.type]/4),r.buffer=0}for(r.data=si(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t],r=this.buffers[e.buffer];return r.data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new hi;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new ri(this.buffers[e].data.slice(0));for(const e in this.attributes){const r=this.attributes[e];t.attributes[e]=new ni(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=b.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new hi,r=[],n=[],i=[];let s;for(let o=0;o<t.length;o++){s=t[o];for(let t=0;t<s.buffers.length;t++)n[t]=n[t]||0,n[t]+=s.buffers[t].data.length,i[t]=0}for(let o=0;o<s.buffers.length;o++)r[o]=new(li[sn(s.buffers[o].data)])(n[o]),e.buffers[o]=new ri(r[o]);for(let o=0;o<t.length;o++){s=t[o];for(let t=0;t<s.buffers.length;t++)r[t].set(s.buffers[t].data,i[t]),i[t]+=s.buffers[t].data.length}if(e.attributes=s.attributes,s.indexBuffer){e.indexBuffer=e.buffers[s.buffers.indexOf(s.indexBuffer)],e.indexBuffer.type=b.ELEMENT_ARRAY_BUFFER;let r=0,n=0,i=0,o=0;for(let t=0;t<s.buffers.length;t++)if(s.buffers[t]!==s.indexBuffer){o=t;break}for(const t in s.attributes){const e=s.attributes[t];(0|e.buffer)===o&&(n+=e.size*oi[e.type]/4)}for(let s=0;s<t.length;s++){const a=t[s].indexBuffer.data;for(let t=0;t<a.length;t++)e.indexBuffer.data[t+i]+=r;r+=t[s].buffers[o].data.length/n,i+=a.length}}return e}}class ui extends hi{constructor(t=!1){super(),this._buffer=new ri(null,t,!1),this._indexBuffer=new ri(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,u.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,u.FLOAT).addAttribute("aColor",this._buffer,4,!0,u.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,u.FLOAT).addIndex(this._indexBuffer)}}const ci=2*Math.PI,di=180/Math.PI,fi=Math.PI/180;var pi=(t=>(t[t["POLY"]=0]="POLY",t[t["RECT"]=1]="RECT",t[t["CIRC"]=2]="CIRC",t[t["ELIP"]=3]="ELIP",t[t["RREC"]=4]="RREC",t))(pi||{});class mi{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new mi(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const gi=[new mi,new mi,new mi,new mi];class yi{constructor(t=0,e=0,r=0,n=0){this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(n),this.type=pi.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new yi(0,0,0,0)}clone(){return new yi(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)}intersects(t,e){if(!e){const e=this.x<t.x?t.x:this.x,r=this.right>t.right?t.right:this.right;if(r<=e)return!1;const n=this.y<t.y?t.y:this.y,i=this.bottom>t.bottom?t.bottom:this.bottom;return i>n}const r=this.left,n=this.right,i=this.top,s=this.bottom;if(n<=r||s<=i)return!1;const o=gi[0].set(t.left,t.top),a=gi[1].set(t.left,t.bottom),l=gi[2].set(t.right,t.top),h=gi[3].set(t.right,t.bottom);if(l.x<=o.x||a.y<=o.y)return!1;const u=Math.sign(e.a*e.d-e.b*e.c);if(0===u)return!1;if(e.apply(o,o),e.apply(a,a),e.apply(l,l),e.apply(h,h),Math.max(o.x,a.x,l.x,h.x)<=r||Math.min(o.x,a.x,l.x,h.x)>=n||Math.max(o.y,a.y,l.y,h.y)<=i||Math.min(o.y,a.y,l.y,h.y)>=s)return!1;const c=u*(a.y-o.y),d=u*(o.x-a.x),f=c*r+d*i,p=c*n+d*i,m=c*r+d*s,g=c*n+d*s;if(Math.max(f,p,m,g)<=c*o.x+d*o.y||Math.min(f,p,m,g)>=c*h.x+d*h.y)return!1;const y=u*(o.y-l.y),v=u*(l.x-o.x),_=y*r+v*i,x=y*n+v*i,b=y*r+v*s,E=y*n+v*s;return!(Math.max(_,x,b,E)<=y*o.x+v*o.y||Math.min(_,x,b,E)>=y*h.x+v*h.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this}fit(t){const e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=n,this.height=Math.max(i-n,0),this}ceil(t=1,e=.001){const r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=n,this.height=i-n,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class vi{constructor(t=0,e=0,r=0){this.x=t,this.y=e,this.radius=r,this.type=pi.CIRC}clone(){return new vi(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const r=this.radius*this.radius;let n=this.x-t,i=this.y-e;return n*=n,i*=i,n+i<=r}getBounds(){return new yi(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class _i{constructor(t=0,e=0,r=0,n=0){this.x=t,this.y=e,this.width=r,this.height=n,this.type=pi.ELIP}clone(){return new _i(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let r=(t-this.x)/this.width,n=(e-this.y)/this.height;return r*=r,n*=n,r+n<=1}getBounds(){return new yi(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}r(8237);class xi{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if("number"!==typeof e[0]){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r].x,e[r].y);e=t}this.points=e,this.type=pi.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new xi(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let r=!1;const n=this.points.length/2;for(let i=0,s=n-1;i<n;s=i++){const n=this.points[2*i],o=this.points[2*i+1],a=this.points[2*s],l=this.points[2*s+1],h=o>e!==l>e&&t<(e-o)/(l-o)*(a-n)+n;h&&(r=!r)}return r}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}}class bi{constructor(t=0,e=0,r=0,n=0,i=20){this.x=t,this.y=e,this.width=r,this.height=n,this.radius=i,this.type=pi.RREC}clone(){return new bi(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+r&&e<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;let n=t-(this.x+r),i=e-(this.y+r);const s=r*r;if(n*n+i*i<=s)return!0;if(n=t-(this.x+this.width-r),n*n+i*i<=s)return!0;if(i=e-(this.y+this.height-r),n*n+i*i<=s)return!0;if(n=t-(this.x+r),n*n+i*i<=s)return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class Ei{constructor(t=1,e=0,r=0,n=1,i=0,s=0){this.array=null,this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=s}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,r,n,i,s){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=s,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(t,e){e=e||new mi;const r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e}applyInverse(t,e){e=e||new mi;const r=1/(this.a*this.d+this.c*-this.b),n=t.x,i=t.y;return e.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,s=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=s*e-this.ty*r,this.ty=s*r+this.ty*e,this}append(t){const e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this}setTransform(t,e,r,n,i,s,o,a,l){return this.a=Math.cos(o+l)*i,this.b=Math.sin(o+l)*i,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this}prepend(t){const e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){const e=this.a,r=this.c;this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,r=this.b,n=this.c,i=this.d,s=t.pivot,o=-Math.atan2(-n,i),a=Math.atan2(r,e),l=Math.abs(o+a);return l<1e-5||Math.abs(ci-l)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx+(s.x*e+s.y*n),t.position.y=this.ty+(s.x*r+s.y*i),t}invert(){const t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,s=t*n-e*r;return this.a=n/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-n*i)/s,this.ty=-(t*this.ty-e*i)/s,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Ei;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Ei}static get TEMP_MATRIX(){return new Ei}}const Ti=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],wi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ai=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Si=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ci=[],Ri=[],Ii=Math.sign;function Pi(){for(let t=0;t<16;t++){const e=[];Ci.push(e);for(let r=0;r<16;r++){const n=Ii(Ti[t]*Ti[r]+Ai[t]*wi[r]),i=Ii(wi[t]*Ti[r]+Si[t]*wi[r]),s=Ii(Ti[t]*Ai[r]+Ai[t]*Si[r]),o=Ii(wi[t]*Ai[r]+Si[t]*Si[r]);for(let t=0;t<16;t++)if(Ti[t]===n&&wi[t]===i&&Ai[t]===s&&Si[t]===o){e.push(t);break}}}for(let t=0;t<16;t++){const e=new Ei;e.set(Ti[t],wi[t],Ai[t],Si[t],0,0),Ri.push(e)}}Pi();const Mi={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Ti[t],uY:t=>wi[t],vX:t=>Ai[t],vY:t=>Si[t],inv:t=>8&t?15&t:7&-t,add:(t,e)=>Ci[t][e],sub:(t,e)=>Ci[t][Mi.inv(e)],rotate180:t=>4^t,isVertical:t=>2===(3&t),byDirection:(t,e)=>2*Math.abs(t)<=Math.abs(e)?e>=0?Mi.S:Mi.N:2*Math.abs(e)<=Math.abs(t)?t>0?Mi.E:Mi.W:e>0?t>0?Mi.SE:Mi.SW:t>0?Mi.NE:Mi.NW,matrixAppendRotationInv:(t,e,r=0,n=0)=>{const i=Ri[Mi.inv(e)];i.tx=r,i.ty=n,t.append(i)}};class Oi{constructor(t,e,r=0,n=0){this._x=r,this._y=n,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new Oi(t,e,this._x,this._y)}set(t=0,e=t){return this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const Di=class{constructor(){this.worldTransform=new Ei,this.localTransform=new Ei,this.position=new Oi(this.onChange,this,0,0),this.scale=new Oi(this.onChange,this,1,1),this.pivot=new Oi(this.onChange,this,0,0),this.skew=new Oi(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let Fi=Di;Fi.IDENTITY=new Di;var Bi="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}",Ni="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n";function Li(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function ki(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Li(2*e);case"bvec3":return Li(3*e);case"bvec4":return Li(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Ui=[{test:t=>"float"===t.type&&1===t.size&&!t.isArray,code:t=>`\n            if(uv["${t}"] !== ud["${t}"].value)\n            {\n                ud["${t}"].value = uv["${t}"]\n                gl.uniform1f(ud["${t}"].location, uv["${t}"])\n            }\n            `},{test:(t,e)=>("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray&&(null==e||void 0!==e.castToBaseTexture),code:t=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${t}"], t);\n\n            if(ud["${t}"].value !== t)\n            {\n                ud["${t}"].value = t;\n                gl.uniform1i(ud["${t}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(t,e)=>"mat3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.a,code:t=>`\n            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));\n            `,codeUbo:t=>`\n                var ${t}_matrix = uv.${t}.toArray(true);\n\n                data[offset] = ${t}_matrix[0];\n                data[offset+1] = ${t}_matrix[1];\n                data[offset+2] = ${t}_matrix[2];\n        \n                data[offset + 4] = ${t}_matrix[3];\n                data[offset + 5] = ${t}_matrix[4];\n                data[offset + 6] = ${t}_matrix[5];\n        \n                data[offset + 8] = ${t}_matrix[6];\n                data[offset + 9] = ${t}_matrix[7];\n                data[offset + 10] = ${t}_matrix[8];\n            `},{test:(t,e)=>"vec2"===t.type&&1===t.size&&!t.isArray&&void 0!==e.x,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${t}"].location, v.x, v.y);\n                }`,codeUbo:t=>`\n                v = uv.${t};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:t=>"vec2"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);\n                }\n            `},{test:(t,e)=>"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.width,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:t=>`\n                    v = uv.${t};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:t=>"vec4"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])\n                }`}],Gi={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},ji={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function zi(t,e){const r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const n in t.uniforms){const i=e[n];if(!i){t.uniforms[n]?.group&&(t.uniforms[n].ubo?r.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');\n                    `):r.push(`\n                        renderer.shader.syncUniformGroup(uv.${n}, syncData);\n                    `));continue}const s=t.uniforms[n];let o=!1;for(let t=0;t<Ui.length;t++)if(Ui[t].test(i,s)){r.push(Ui[t].code(n,s)),o=!0;break}if(!o){const t=1!==i.size||i.isArray?ji:Gi,e=t[i.type].replace("location",`ud["${n}"].location`);r.push(`\n            cu = ud["${n}"];\n            cv = cu.value;\n            v = uv["${n}"];\n            ${e};`)}}return new Function("ud","uv","renderer","syncData",r.join("\n"))}const Hi={};let Wi,Xi=Hi;function Vi(){if(Xi===Hi||Xi?.isContextLost()){const t=T.ADAPTER.createCanvas();let e;T.PREFER_ENV>=i.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Xi=e}return Xi}function $i(){if(!Wi){Wi=v.MEDIUM;const t=Vi();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);Wi=e.precision?v.HIGH:v.MEDIUM}}return Wi}r(2489);function Yi(t,e){const r=t.getShaderSource(e).split("\n").map((t,e)=>`${e}: ${t}`),n=t.getShaderInfoLog(e),i=n.split("\n"),s={},o=i.map(t=>parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(t=>!(!t||s[t])&&(s[t]=!0,!0)),a=[""];o.forEach(t=>{r[t-1]=`%c${r[t-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=r.join("\n");a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function qi(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||Yi(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||Yi(t,n),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const Ki={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Zi(t){return Ki[t]}let Ji=null;const Qi={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function ts(t,e){if(!Ji){const e=Object.keys(Qi);Ji={};for(let r=0;r<e.length;++r){const n=e[r];Ji[t[n]]=Qi[n]}}return Ji[e]}function es(t,e,r){if("precision"!==t.substring(0,9)){let n=e;return e===v.HIGH&&r!==v.HIGH&&(n=v.MEDIUM),`precision ${n} float;\n${t}`}return r!==v.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}let rs=0;const ns={},is=class{constructor(t,e,r="pixi-shader",n={}){this.extra={},this.id=rs++,this.vertexSrc=t||is.defaultVertexSrc,this.fragmentSrc=e||is.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),ns[r]?(ns[r]++,r+=`-${ns[r]}`):ns[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}\n${this.fragmentSrc}`,this.vertexSrc=es(this.vertexSrc,is.defaultVertexPrecision,v.HIGH),this.fragmentSrc=es(this.fragmentSrc,is.defaultFragmentPrecision,$i())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Ni}static get defaultFragmentSrc(){return Bi}static from(t,e,r){const n=t+e;let i=yn[n];return i||(yn[n]=i=new is(t,e,r)),i}};let ss=is;ss.defaultVertexPrecision=v.HIGH,ss.defaultFragmentPrecision=z.apple.device?v.HIGH:v.MEDIUM;let os=0;class as{constructor(t,e,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=os++,this.static=!!e,this.ubo=!!r,t instanceof ri?(this.buffer=t,this.buffer.type=b.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new ri(new Float32Array(1)),this.buffer.type=b.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[t]=new as(e,r)}static from(t,e,r){return new as(t,e,r)}static uboFrom(t,e){return new as(t,e??!0,!0)}}class ls{constructor(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof as?e:new as(e):new as({}),this.disposeRunner=new Yn("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const r in e.uniforms){const n=e.uniforms[r];if(n.group&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,r){const n=ss.from(t,e);return new ls(n,r)}}class hs{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const e=new Int32Array(t);for(let n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=as.from({uSamplers:e},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${t}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new ss(this.vertexSrc,r)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ei,default:this.defaultGroupCache[t]};return new ls(this.programCache[t],e)}generateSampleSrc(t){let e="";e+="\n",e+="\n";for(let r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+=`if(vTextureId < ${r}.5)`),e+="\n{",e+=`\n\tcolor = texture2D(uSamplers[${r}], vTextureCoord);`,e+="\n}";return e+="\n",e+="\n",e}}class us{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function cs(){return!z.apple.device}function ds(t){let e=!0;const r=T.ADAPTER.getNavigator();if(z.tablet||z.phone){if(z.apple.device){const t=r.userAgent.match(/OS (\d+)_(\d+)?/);if(t){const r=parseInt(t[1],10);r<11&&(e=!1)}}if(z.android.device){const t=r.userAgent.match(/Android\s([0-9.]*)/);if(t){const r=parseInt(t[1],10);r<7&&(e=!1)}}}return e?t:4}class fs{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var ps="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",ms="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n";const gs=class extends fs{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=ui,this.vertexSize=6,this.state=Xn.for2d(),this.size=4*gs.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??ds(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??cs(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return tt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return ms}static get defaultFragmentTemplate(){return ps}setShaderGenerator({vertex:t=gs.defaultVertexSrc,fragment:e=gs.defaultFragmentTemplate}={}){this.shaderGenerator=new hs(t,e)}contextChange(){const t=this.renderer.gl;T.PREFER_ENV===i.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),gs.defaultMaxTextures),this.maxTextures=kn(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=gs,r=this.size/4,n=Math.floor(r/this.maxTextures)+1;while(t.length<r)t.push(new ti);while(e.length<n)e.push(new us);for(let i=0;i<this.maxTextures;i++)this._tempBoundTextures[i]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,r=gs._textureArrayPool,n=this.renderer.batch,i=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++Qn._globalBatch,a=0,l=r[0],h=0;n.copyBoundTextures(i,e);for(let u=0;u<this._bufferSize;++u){const c=t[u];t[u]=null,c._batchEnabled!==o&&(l.count>=e&&(n.boundArray(l,i,o,e),this.buildDrawCalls(l,h,u),h=u,l=r[++a],++o),c._batchEnabled=o,c.touched=s,l.elements[l.count++]=c)}l.count>0&&(n.boundArray(l,i,o,e),this.buildDrawCalls(l,h,this._bufferSize),++a,++o);for(let u=0;u<i.length;u++)i[u]=null;Qn._globalBatch=o}buildDrawCalls(t,e,r){const{_bufferedElements:n,_attributeBuffer:i,_indexBuffer:s,vertexSize:o}=this,a=gs._drawCallPool;let l=this._dcIndex,h=this._aIndex,u=this._iIndex,c=a[l];c.start=this._iIndex,c.texArray=t;for(let d=e;d<r;++d){const r=n[d],f=r._texture.baseTexture,p=Zr[f.alphaMode?1:0][r.blendMode];n[d]=null,e<d&&c.blend!==p&&(c.size=u-c.start,e=d,c=a[++l],c.texArray=t,c.start=u),this.packInterleavedGeometry(r,i,s,h,u),h+=r.vertexData.length/2*o,u+=r.indices.length,c.blend=p}e<r&&(c.size=u-c.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=u}bindAndClearTexArray(t){const e=this.renderer.texture;for(let r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:r}=this;gs.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:r}=this.renderer,n=gs._drawCallPool;let i=null;for(let s=0;s<t;s++){const{texArray:t,type:o,size:a,start:l,blend:h}=n[s];i!==t&&(i=t,this.bindAndClearTexArray(t)),this.state.blendMode=h,r.set(this.state),e.drawElements(o,a,e.UNSIGNED_SHORT,2*l)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),gs.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=ln(Math.ceil(t/8)),r=un(e),n=8*e;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new Bn(n*this.vertexSize*4)),i}getIndexBuffer(t){const e=ln(Math.ceil(t/12)),r=un(e),n=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i}packInterleavedGeometry(t,e,r,n,i){const{uint32View:s,float32View:o}=e,a=n/this.vertexSize,l=t.uvs,h=t.indices,u=t.vertexData,c=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),f=d<1&&t._texture.baseTexture.alphaMode?tn(t._tintRGB,d):t._tintRGB+(255*d<<24);for(let p=0;p<u.length;p+=2)o[n++]=u[p],o[n++]=u[p+1],o[n++]=l[p],o[n++]=l[p+1],s[n++]=f,o[n++]=c;for(let p=0;p<h.length;p++)r[i++]=a+h[p]}};let ys=gs;ys.defaultBatchSize=4096,ys.extension={name:"batch",type:Mn.RendererPlugin},ys._drawCallPool=[],ys._textureArrayPool=[],Fn.add(ys);var vs="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n",_s="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";const xs=class extends ls{constructor(t,e,r){const n=ss.from(t||xs.defaultVertexSrc,e||xs.defaultFragmentSrc);super(n,r),this.padding=0,this.resolution=xs.defaultResolution,this.multisample=xs.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Xn}apply(t,e,r,n,i){t.applyFilter(this,e,r,n)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return _s}static get defaultFragmentSrc(){return vs}};let bs=xs;bs.defaultResolution=1,bs.defaultMultisample=x.NONE;class Es{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender,t.color&&(this.color="string"===typeof t.color?Yr(t.color):t.color),this.alpha=t.alpha}get color(){return this._backgroundColor}set color(t){this._backgroundColor=t,this._backgroundColorString=$r(t),Vr(t,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(t){this._backgroundColorRgba[3]=t}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}Es.extension={type:[Mn.RendererSystem,Mn.CanvasRendererSystem],name:"background"},Fn.add(Es);class Ts{constructor(t){this.renderer=t,this.emptyRenderer=new fs(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:r}=this.renderer.texture;for(let n=e-1;n>=0;--n)t[n]=r[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,e,r,n){const{elements:i,ids:s,count:o}=t;let a=0;for(let l=0;l<o;l++){const t=i[l],o=t._batchLocation;if(o>=0&&o<n&&e[o]===t)s[l]=o;else while(a<n){const n=e[a];if(!n||n._batchEnabled!==r||n._batchLocation!==a){s[l]=a,t._batchLocation=a,e[a]=t;break}a++}}}destroy(){this.renderer=null}}Ts.extension={type:Mn.RendererSystem,name:"batch"},Fn.add(Ts);let ws=0;class As{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=ws++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,r=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:r,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=ws++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;void 0!==e.addEventListener&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let r;if(T.PREFER_ENV>=i.WEBGL2&&(r=t.getContext("webgl2",e)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,void 0!==t.removeEventListener&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=r||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}As.extension={type:Mn.RendererSystem,name:"context"},Fn.add(As);class Ss extends Kn{upload(t,e,r){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===m.UNPACK);const i=e.realWidth,s=e.realHeight;return r.width===i&&r.height===s?n.texSubImage2D(e.target,0,0,0,i,s,e.format,r.type,this.data):(r.width=i,r.height=s,n.texImage2D(e.target,0,r.internalFormat,i,s,0,e.format,r.type,this.data)),!0}}class Cs{constructor(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Yn("disposeFramebuffer"),this.multisample=x.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new Qn(null,{scaleMode:d.NEAREST,resolution:1,mipmap:p.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new Qn(new Ss(null,{width:this.width,height:this.height}),{scaleMode:d.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:p.OFF,format:l.DEPTH_COMPONENT,type:u.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const n=this.colorTextures[r],i=n.resolution;n.setSize(t/i,e/i)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(t/r,e/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Rs extends Qn{constructor(t={}){if("number"===typeof t){const e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];t={width:e,height:r,scaleMode:n,resolution:i}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=x.NONE),super(null,t),this.mipmap=p.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new Cs(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Is extends qn{constructor(t){const e=t,r=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;super(r,n),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,r){void 0!==r||e.startsWith("data:")?!1!==r&&(t.crossOrigin="string"===typeof r?r:"anonymous"):t.crossOrigin=In(e)}upload(t,e,r,n){const i=t.gl,s=e.realWidth,o=e.realHeight;if(n=n||this.source,"undefined"!==typeof HTMLImageElement&&n instanceof HTMLImageElement){if(!n.complete||0===n.naturalWidth)return!1}else if("undefined"!==typeof HTMLVideoElement&&n instanceof HTMLVideoElement&&n.readyState<=1&&0===n.buffered.length)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===m.UNPACK),this.noSubImage||e.target!==i.TEXTURE_2D||r.width!==s||r.height!==o?(r.width=s,r.height=o,i.texImage2D(e.target,0,r.internalFormat,e.format,r.type,n)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,r.type,n),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(e,r),super.update()}dispose(){this.source=null}}class Ps extends Is{constructor(t,e){if(e=e||{},"string"===typeof t){const r=new Image;Is.crossOrigin(r,t,e.crossorigin),r.src=t,t=r}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??T.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"===typeof e.alphaMode?e.alphaMode:null,this.bitmap=null,this._load=null,!1!==e.autoLoad&&this.load()}load(t){return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((t,e)=>{const r=this.source;this.url=r.src;const n=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.resize(r.width,r.height),this._load=null,this.createBitmap?t(this.process()):t(this))};r.complete&&r.src?n():(r.onload=n,r.onerror=t=>{e(t),this.onError.emit(t)})})),this._load}process(){const t=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,r=!t.crossOrigin||"anonymous"===t.crossOrigin;return this._process=fetch(t.src,{mode:r?"cors":"no-cors"}).then(t=>t.blob()).then(r=>e(r,0,0,t.width,t.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===m.UNPACK?"premultiply":"none"})).then(t=>this.destroyed?Promise.reject():(this.bitmap=t,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,r){if("number"===typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,r,this.bitmap),!this.preserveBitmap){let t=!0;const n=e._glTextures;for(const i in n){const s=n[i];if(s!==r&&s.dirtyId!==e.dirtyId){t=!1;break}}t&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return"undefined"!==typeof HTMLImageElement&&("string"===typeof t||t instanceof HTMLImageElement)}}class Ms{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,r){const n=e.width,i=e.height;if(r){const e=t.width/2/n,s=t.height/2/i,o=t.x/n+e,a=t.y/i+s;r=Mi.add(r,Mi.NW),this.x0=o+e*Mi.uX(r),this.y0=a+s*Mi.uY(r),r=Mi.add(r,2),this.x1=o+e*Mi.uX(r),this.y1=a+s*Mi.uY(r),r=Mi.add(r,2),this.x2=o+e*Mi.uX(r),this.y2=a+s*Mi.uY(r),r=Mi.add(r,2),this.x3=o+e*Mi.uX(r),this.y3=a+s*Mi.uY(r)}else this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Os=new Ms;function Ds(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class Fs extends H{constructor(t,e,r,n,i,s){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new yi(0,0,1,1)),t instanceof Fs&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this._uvs=Os,this.uvMatrix=null,this.orig=r||e,this._rotate=Number(i||0),!0===i)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=s?new mi(s.x,s.y):new mi(0,0),this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:t}=this.baseTexture;t?.url&&vn[t.url]&&Fs.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Fs.removeFromCache(this),this.textureCacheIds=null}clone(){const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),r=new Fs(this.baseTexture,!this.noFrame&&t,e,this.trim?.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r}updateUvs(){this._uvs===Os&&(this._uvs=new Ms),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},r=T.STRICT_TEXTURE_CACHE){const n="string"===typeof t;let i=null;if(n)i=t;else if(t instanceof Qn){if(!t.cacheId){const r=e?.pixiIdPrefix||"pixiid";t.cacheId=`${r}-${pn()}`,Qn.addToCache(t,t.cacheId)}i=t.cacheId}else{if(!t._pixiId){const r=e?.pixiIdPrefix||"pixiid";t._pixiId=`${r}_${pn()}`}i=t._pixiId}let s=vn[i];if(n&&r&&!s)throw new Error(`The cacheId "${i}" does not exist in TextureCache.`);return s||t instanceof Qn?!s&&t instanceof Qn&&(s=new Fs(t),Fs.addToCache(s,i)):(e.resolution||(e.resolution=Pn(t)),s=new Fs(new Qn(t,e)),s.baseTexture.cacheId=i,Qn.addToCache(s.baseTexture,i),Fs.addToCache(s,i)),s}static fromURL(t,e){const r=Object.assign({autoLoad:!1},e?.resourceOptions),n=Fs.from(t,Object.assign({resourceOptions:r},e),!1),i=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):i.load().then(()=>Promise.resolve(n))}static fromBuffer(t,e,r,n){return new Fs(Qn.fromBuffer(t,e,r,n))}static fromLoader(t,e,r,n){const i=new Qn(t,Object.assign({scaleMode:Qn.defaultOptions.scaleMode,resolution:Pn(e)},n)),{resource:s}=i;s instanceof Ps&&(s.url=e);const o=new Fs(i);return r||(r=e),Qn.addToCache(o.baseTexture,r),Fs.addToCache(o,r),r!==e&&(Qn.addToCache(o.baseTexture,e),Fs.addToCache(o,e)),o.baseTexture.valid?Promise.resolve(o):new Promise(t=>{o.baseTexture.once("loaded",()=>t(o))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),vn[e]&&vn[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),vn[e]=t)}static removeFromCache(t){if("string"===typeof t){const e=vn[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete vn[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)vn[t.textureCacheIds[e]]===t&&delete vn[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:r,width:n,height:i}=t,s=e+n>this.baseTexture.width,o=r+i>this.baseTexture.height;if(s||o){const t=s&&o?"and":"or",a=`X: ${e} + ${n} = ${e+n} > ${this.baseTexture.width}`,l=`Y: ${r} + ${i} = ${r+i} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${a} ${t} ${l}`)}this.valid=n&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Fs._EMPTY||(Fs._EMPTY=new Fs(new Qn),Ds(Fs._EMPTY),Ds(Fs._EMPTY.baseTexture)),Fs._EMPTY}static get WHITE(){if(!Fs._WHITE){const t=T.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),Fs._WHITE=new Fs(Qn.from(t)),Ds(Fs._WHITE),Ds(Fs._WHITE.baseTexture)}return Fs._WHITE}}class Bs extends Fs{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,r=!0){const n=this.baseTexture.resolution,i=Math.round(t*n)/n,s=Math.round(e*n)/n;this.valid=i>0&&s>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=s,r&&this.baseTexture.resize(i,s),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new Bs(new Rs(t))}}class Ns{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,r=x.NONE){const n=new Rs(Object.assign({width:t,height:e,resolution:1,multisample:r},this.textureOptions));return new Bs(n)}getOptimalTexture(t,e,r=1,n=x.NONE){let i;t=Math.ceil(t*r-1e-6),e=Math.ceil(e*r-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?i=n>1?-n:-1:(t=ln(t),e=ln(e),i=((65535&t)<<16|65535&e)>>>0,n>1&&(i+=4294967296*n)),this.texturePool[i]||(this.texturePool[i]=[]);let s=this.texturePool[i].pop();return s||(s=this.createTexture(t,e,n)),s.filterPoolKey=i,s.setResolution(r),s}getFilterTexture(t,e,r){const n=this.getOptimalTexture(t.width,t.height,e||t.resolution,r||x.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=!1!==t,t)for(const e in this.texturePool){const t=this.texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0)}this.texturePool={}}setScreenSize(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){this.enableFullScreen=t.width>0&&t.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const e=this.texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Ns.SCREEN_KEY=-1;class Ls extends hi{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class ks extends hi{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ri(this.vertices),this.uvBuffer=new ri(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class Us{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=x.NONE,this.sourceFrame=new yi,this.destinationFrame=new yi,this.bindingSourceFrame=new yi,this.bindingDestinationFrame=new yi,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Gs=[new mi,new mi,new mi,new mi],js=new Ei;class zs{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Ns,this.statePool=[],this.quad=new Ls,this.quadUv=new ks,this.tempRect=new yi,this.activeState={},this.globalUniforms=new as({outputFrame:new yi,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const r=this.renderer,n=this.defaultFilterStack,i=this.statePool.pop()||new Us,s=this.renderer.renderTexture;let o=e[0].resolution,a=e[0].multisample,l=e[0].padding,h=e[0].autoFit,u=e[0].legacy??!0;for(let f=1;f<e.length;f++){const t=e[f];o=Math.min(o,t.resolution),a=Math.min(a,t.multisample),l=this.useMaxPadding?Math.max(l,t.padding):l+t.padding,h=h&&t.autoFit,u=u||(t.legacy??!0)}1===n.length&&(this.defaultFilterStack[0].renderTexture=s.current),n.push(i),i.resolution=o,i.multisample=a,i.legacy=u,i.target=t,i.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),i.sourceFrame.pad(l);const c=this.tempRect.copyFrom(s.sourceFrame);r.projection.transform&&this.transformAABB(js.copyFrom(r.projection.transform).invert(),c),h?(i.sourceFrame.fit(c),(i.sourceFrame.width<=0||i.sourceFrame.height<=0)&&(i.sourceFrame.width=0,i.sourceFrame.height=0)):i.sourceFrame.intersects(c)||(i.sourceFrame.width=0,i.sourceFrame.height=0),this.roundFrame(i.sourceFrame,s.current?s.current.resolution:r.resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,o,a),i.filters=e,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;const d=this.tempRect;d.x=0,d.y=0,d.width=i.sourceFrame.width,d.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(s.sourceFrame),i.bindingDestinationFrame.copyFrom(s.destinationFrame),i.transform=r.projection.transform,r.projection.transform=null,s.bind(i.renderTexture,i.sourceFrame,d),r.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;const n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;const i=n.inputSize,s=n.inputPixel,o=n.inputClamp;if(i[0]=e.destinationFrame.width,i[1]=e.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],s[0]=Math.round(i[0]*e.resolution),s[1]=Math.round(i[1]*e.resolution),s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*i[2]-.5*s[2],o[3]=e.sourceFrame.height*i[3]-.5*s[3],e.legacy){const t=n.filterArea;t[0]=e.destinationFrame.width,t[1]=e.destinationFrame.height,t[2]=e.sourceFrame.x,t[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const a=t[t.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,a.renderTexture,g.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let t=e.renderTexture,n=this.getOptimalFilterTexture(t.width,t.height,e.resolution);n.filterFrame=t.filterFrame;let i=0;for(i=0;i<r.length-1;++i){1===i&&e.multisample>1&&(n=this.getOptimalFilterTexture(t.width,t.height,e.resolution),n.filterFrame=t.filterFrame),r[i].apply(this,t,n,g.CLEAR,e);const s=t;t=n,n=s}r[i].apply(this,t,a.renderTexture,g.BLEND,e),i>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(t),this.returnFilterTexture(n)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=g.CLEAR){const{renderTexture:r,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t?.filterFrame){const e=this.tempRect;e.x=0,e.y=0,e.width=t.filterFrame.width,e.height=t.filterFrame.height,r.bind(t,t.filterFrame,e)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const i=1&n.stateId||this.forceClear;(e===g.CLEAR||e===g.BLIT&&i)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,r,n){const i=this.renderer;i.state.set(t.state),this.bindAndClear(r,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(a.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(a.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:r,destinationFrame:n}=this.activeState,{orig:i}=e._texture,s=t.set(n.width,0,0,n.height,r.x,r.y),o=e.worldTransform.copyTo(Ei.TEMP_MATRIX);return o.invert(),s.prepend(o),s.scale(1/i.width,1/i.height),s.translate(e.anchor.x,e.anchor.y),s}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,r=1,n=x.NONE){return this.texturePool.getOptimalTexture(t,e,r,n)}getFilterTexture(t,e,r){if("number"===typeof t){const r=t;t=e,e=r}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,r||x.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const r=Gs[0],n=Gs[1],i=Gs[2],s=Gs[3];r.set(e.left,e.top),n.set(e.left,e.bottom),i.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(n,n),t.apply(i,i),t.apply(s,s);const o=Math.min(r.x,n.x,i.x,s.x),a=Math.min(r.y,n.y,i.y,s.y),l=Math.max(r.x,n.x,i.x,s.x),h=Math.max(r.y,n.y,i.y,s.y);e.x=o,e.y=a,e.width=l-o,e.height=h-a}roundFrame(t,e,r,n,i){if(!(t.width<=0||t.height<=0||r.width<=0||r.height<=0)){if(i){const{a:t,b:e,c:r,d:n}=i;if((Math.abs(e)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(n)>1e-4))return}i=i?js.copyFrom(i):js.identity(),i.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(i,t),t.ceil(e),this.transformAABB(i.invert(),t)}}}zs.extension={type:Mn.RendererSystem,name:"filter"},Fn.add(zs);class Hs{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=x.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const Ws=new yi;class Xs{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Cs(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new yi,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let e=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;T.PREFER_ENV===i.WEBGL_LEGACY&&(e=null,r=null),e?t.drawBuffers=t=>e.drawBuffersWEBGL(t):(this.hasMRT=!1,t.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,r=0){const{gl:n}=this;if(t){const i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==r&&(t.dirtyId++,t.dirtyFormat++,i.mipLevel=r),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,i.dirtySize=t.dirtySize,this.updateFramebuffer(t,r)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let e=0;e<t.colorTextures.length;e++){const r=t.colorTextures[e];this.renderer.texture.unbind(r.parentTextureArray||r)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const t=e.width>>r,n=e.height>>r,i=t/e.width;this.setViewport(e.x*i,e.y*i,t,n)}else{const e=t.width>>r,n=t.height>>r;this.setViewport(0,0,e,n)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,r,n){const i=this.viewport;t=Math.round(t),e=Math.round(e),r=Math.round(r),n=Math.round(n),i.width===r&&i.height===n&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=r,i.height=n,this.gl.viewport(t,e,r,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,r,n,i=s.COLOR|s.DEPTH){const{gl:o}=this;o.clearColor(t,e,r,n),o.clear(i)}initFramebuffer(t){const{gl:e}=this,r=new Hs(e.createFramebuffer());return r.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(t),t.disposeRunner.add(this),r}resizeFramebuffer(t){const{gl:e}=this,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),r.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));const n=t.colorTextures;let i=n.length;e.drawBuffers||(i=Math.min(i,1));for(let s=0;s<i;s++){const i=n[s],o=i.parentTextureArray||i;this.renderer.texture.bind(o,0),0===s&&r.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,o._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:r}=this,n=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures;let s=i.length;r.drawBuffers||(s=Math.min(s,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer():n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const o=[];for(let a=0;a<s;a++){const s=i[a],l=s.parentTextureArray||s;this.renderer.texture.bind(l,0),0===a&&n.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+a,s.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(r.COLOR_ATTACHMENT0+a))}if(o.length>1&&r.drawBuffers(o),t.depthTexture){const n=this.writeDepthTexture;if(n){const n=t.depthTexture;this.renderer.texture.bind(n,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n._glTextures[this.CONTEXT_UID].texture,e)}}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null):(n.stencil=n.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n.stencil))}canMultisampleFramebuffer(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let r=x.NONE;if(t<=1||null===e)return r;for(let n=0;n<e.length;n++)if(e[n]<=t){r=e[n];break}return 1===r&&(r=x.NONE),r}blit(t,e,r){const{current:n,renderer:i,gl:s,CONTEXT_UID:o}=this;if(2!==i.context.webGLVersion)return;if(!n)return;const a=n.glFramebuffers[o];if(!a)return;if(!t){if(!a.msaaBuffer)return;const e=n.colorTextures[0];if(!e)return;a.blitFramebuffer||(a.blitFramebuffer=new Cs(n.width,n.height),a.blitFramebuffer.addColorTexture(0,e)),t=a.blitFramebuffer,t.colorTextures[0]!==e&&(t.colorTextures[0]=e,t.dirtyId++,t.dirtyFormat++),t.width===n.width&&t.height===n.height||(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}e||(e=Ws,e.width=n.width,e.height=n.height),r||(r=e);const l=e.width===r.width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,a.framebuffer),s.blitFramebuffer(e.left,e.top,e.right,e.bottom,r.left,r.top,r.right,r.bottom,s.COLOR_BUFFER_BIT,l?s.NEAREST:s.LINEAR)}disposeFramebuffer(t,e){const r=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!r)return;delete t.glFramebuffers[this.CONTEXT_UID];const i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil)return;t.stencil=!0;const r=t.width,n=t.height,i=this.gl,s=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,s),e.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,e.multisample,i.DEPTH24_STENCIL8,r,n):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,r,n),e.stencil=s,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,s)}reset(){this.current=this.unknownFramebuffer,this.viewport=new yi}destroy(){this.renderer=null}}Xs.extension={type:Mn.RendererSystem,name:"framebuffer"},Fn.add(Xs);const Vs={5126:4,5123:2,5121:1};class $s{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){let e=this.renderer.context.extensions.vertexArrayObject;T.PREFER_ENV===i.WEBGL_LEGACY&&(e=null),e?(t.createVertexArray=()=>e.createVertexArrayOES(),t.bindVertexArray=t=>e.bindVertexArrayOES(t),t.deleteVertexArray=t=>e.deleteVertexArrayOES(t)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(2!==e.webGLVersion){const e=t.getExtension("ANGLE_instanced_arrays");e?(t.vertexAttribDivisor=(t,r)=>e.vertexAttribDivisorANGLE(t,r),t.drawElementsInstanced=(t,r,n,i,s)=>e.drawElementsInstancedANGLE(t,r,n,i,s),t.drawArraysInstanced=(t,r,n,i)=>e.drawArraysInstancedANGLE(t,r,n,i)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:r}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},i=!0);const s=n[e.program.id]||this.initGeometryVao(t,e,i);this._activeGeometry=t,this._activeVao!==s&&(this._activeVao=s,this.hasVao?r.bindVertexArray(s):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let r=0;r<t.buffers.length;r++){const n=t.buffers[r];e.update(n)}}checkCompatibility(t,e){const r=t.attributes,n=e.attributeData;for(const i in n)if(!r[i])throw new Error(`shader and geometry incompatible, geometry missing the "${i}" attribute`)}getSignature(t,e){const r=t.attributes,n=e.attributeData,i=["g",t.id];for(const s in r)n[s]&&i.push(s,n[s].location);return i.join("-")}initGeometryVao(t,e,r=!0){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.program;o.glPrograms[i]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);const a=this.getSignature(t,o),l=t.glVertexArrayObjects[this.CONTEXT_UID];let h=l[a];if(h)return l[o.id]=h,h;const u=t.buffers,c=t.attributes,d={},f={};for(const p in u)d[p]=0,f[p]=0;for(const p in c)!c[p].size&&o.attributeData[p]?c[p].size=o.attributeData[p].size:c[p].size||console.warn(`PIXI Geometry attribute '${p}' size cannot be determined (likely the bound shader does not have the attribute)`),d[c[p].buffer]+=c[p].size*Vs[c[p].type];for(const p in c){const t=c[p],e=t.size;void 0===t.stride&&(d[t.buffer]===e*Vs[t.type]?t.stride=0:t.stride=d[t.buffer]),void 0===t.start&&(t.start=f[t.buffer],f[t.buffer]+=e*Vs[t.type])}h=n.createVertexArray(),n.bindVertexArray(h);for(let p=0;p<u.length;p++){const t=u[p];s.bind(t),r&&t._glBuffers[i].refCount++}return this.activateVao(t,o),l[o.id]=h,l[a]=h,n.bindVertexArray(null),s.unbind(b.ARRAY_BUFFER),h}disposeGeometry(t,e){if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const r=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,i=t.buffers,s=this.renderer?.buffer;if(t.disposeRunner.remove(this),r){if(s)for(let t=0;t<i.length;t++){const r=i[t]._glBuffers[this.CONTEXT_UID];r&&(r.refCount--,0!==r.refCount||e||s.dispose(i[t],e))}if(!e)for(const t in r)if("g"===t[0]){const e=r[t];this._activeVao===e&&this.unbind(),n.deleteVertexArray(e)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t)}activateVao(t,e){const r=this.gl,n=this.CONTEXT_UID,i=this.renderer.buffer,s=t.buffers,o=t.attributes;t.indexBuffer&&i.bind(t.indexBuffer);let a=null;for(const l in o){const t=o[l],h=s[t.buffer],u=h._glBuffers[n];if(e.attributeData[l]){a!==u&&(i.bind(h),a=u);const n=e.attributeData[l].location;if(r.enableVertexAttribArray(n),r.vertexAttribPointer(n,t.size,t.type||r.FLOAT,t.normalized,t.stride,t.start),t.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(n,t.divisor)}}}}draw(t,e,r,n){const{gl:i}=this,s=this._activeGeometry;if(s.indexBuffer){const o=s.indexBuffer.data.BYTES_PER_ELEMENT,a=2===o?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?s.instanced?i.drawElementsInstanced(t,e||s.indexBuffer.data.length,a,(r||0)*o,n||1):i.drawElements(t,e||s.indexBuffer.data.length,a,(r||0)*o):console.warn("unsupported index buffer type: uint32")}else s.instanced?i.drawArraysInstanced(t,r,e||s.getSize(),n||1):i.drawArrays(t,r,e||s.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}$s.extension={type:Mn.RendererSystem,name:"geometry"},Fn.add($s);const Ys=new Ei;class qs{constructor(t,e){this._texture=t,this.mapCoord=new Ei,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin="undefined"===typeof e?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){void 0===e&&(e=t);const r=this.mapCoord;for(let n=0;n<t.length;n+=2){const i=t[n],s=t[n+1];e[n]=i*r.a+s*r.c+r.tx,e[n+1]=i*r.b+s*r.d+r.ty}return e}update(t){const e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const n=e.orig,i=e.trim;i&&(Ys.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Ys));const s=e.baseTexture,o=this.uClampFrame,a=this.clampMargin/s.resolution,l=this.clampOffset;return o[0]=(e._frame.x+a+l)/s.width,o[1]=(e._frame.y+a+l)/s.height,o[2]=(e._frame.x+e._frame.width-a+l)/s.width,o[3]=(e._frame.y+e._frame.height-a+l)/s.height,this.uClampOffset[0]=l/s.realWidth,this.uClampOffset[1]=l/s.realHeight,this.isSimple=e._frame.width===s.width&&e._frame.height===s.height&&0===e.rotate,!0}}var Ks="varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",Zs="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n";class Js extends bs{constructor(t,e,r){let n=null;"string"!==typeof t&&void 0===e&&void 0===r&&(n=t,t=void 0,e=void 0,r=void 0),super(t||Zs,e||Ks,r),this.maskSprite=n,this.maskMatrix=new Ei}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,r,n){const i=this._maskSprite,s=i._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new qs(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,n))}}class Qs{constructor(t=null){this.type=_.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=bs.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=_.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class to{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let r=e;if(!r.isMaskData){const t=this.maskDataPool.pop()||new Qs;t.pooled=!0,t.maskObject=e,r=t}const n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(n),r._colorMask=n?n._colorMask:15,r.autoDetect&&this.detect(r),r._target=t,r.type!==_.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case _.SCISSOR:this.renderer.scissor.push(r);break;case _.STENCIL:this.renderer.stencil.push(r);break;case _.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case _.COLOR:this.pushColorMask(r);break;default:break}r.type===_.SPRITE&&this.maskStack.push(r)}pop(t){const e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case _.SCISSOR:this.renderer.scissor.pop(e);break;case _.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case _.SPRITE:this.popSpriteMask(e);break;case _.COLOR:this.popColorMask(e);break;default:break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){const t=this.maskStack[this.maskStack.length-1];t.type===_.SPRITE&&t._filters&&(t._filters[0].maskSprite=t.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=_.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=_.SCISSOR:t.type=_.STENCIL:t.type=_.COLOR}pushSpriteMask(t){const{maskObject:e}=t,r=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new Js]));const i=this.renderer,s=i.renderTexture;let o,a;if(s.current){const e=s.current;o=t.resolution||e.resolution,a=t.multisample??e.multisample}else o=t.resolution||i.resolution,a=t.multisample??i.multisample;n[0].resolution=o,n[0].multisample=a,n[0].maskSprite=e;const l=r.filterArea;r.filterArea=e.getBounds(!0),i.filter.push(r,n),r.filterArea=l,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,r=t._colorMask=e&t.colorMask;r!==e&&this.renderer.gl.colorMask(0!==(1&r),0!==(2&r),0!==(4&r),0!==(8&r))}popColorMask(t){const e=t._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==e&&this.renderer.gl.colorMask(0!==(1&r),0!==(2&r),0!==(4&r),0!==(8&r))}destroy(){this.renderer=null}}to.extension={type:Mn.RendererSystem,name:"mask"},Fn.add(to);class eo{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,r=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==r&&(0===n?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const ro=new Ei,no=[],io=class extends eo{constructor(t){super(t),this.glConst=T.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:r}=t,{renderer:n}=this,i=n.renderTexture,s=r.getBounds(!0,no.pop()??new yi);this.roundFrameToPixels(s,i.current?i.current.resolution:n.resolution,i.sourceFrame,i.destinationFrame,n.projection.transform),e&&s.fit(e),t._scissorRectLocal=s}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:r,c:n,d:i}=t;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect())return!1;if(io.isMatrixRotated(e.worldTransform))return!1;if(io.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const r=t._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(t,e,r,n,i){io.isMatrixRotated(i)||(i=i?ro.copyFrom(i):ro.identity(),i.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(i,t),t.fit(n),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&no.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let so=io;so.extension={type:Mn.RendererSystem,name:"scissor"},Fn.add(so);class oo extends eo{constructor(t){super(t),this.glConst=T.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:r}=this.renderer,n=t._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),t._stencilCounter++;const i=t._colorMask;0!==i&&(t._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,n,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==i&&(t._colorMask=i,r.colorMask(0!==(1&i),0!==(2&i),0!==(4&i),0!==(8&i))),this._useCurrent()}pop(t){const e=this.renderer.gl;if(0===this.getStackLength())e.disable(e.STENCIL_TEST);else{const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,n=r?r._colorMask:15;0!==n&&(r._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==n&&(r._colorMask=n,e.colorMask(0!==(1&n),0!==(2&n),0!==(4&n),0!==(8&n))),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}oo.extension={type:Mn.RendererSystem,name:"stencil"},Fn.add(oo);class ao{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return tt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return tt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return tt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(t){for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}ao.extension={type:[Mn.RendererSystem,Mn.CanvasRendererSystem],name:"_plugin"},Fn.add(ao);class lo{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ei,this.transform=null}update(t,e,r,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);const i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}calculateProjection(t,e,r,n){const i=this.projectionMatrix,s=n?-1:1;i.identity(),i.a=1/e.width*2,i.d=s*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-s-e.y*i.d}setTransform(t){}destroy(){this.renderer=null}}lo.extension={type:Mn.RendererSystem,name:"projection"},Fn.add(lo);const ho=new Fi;class uo{constructor(t){this.renderer=t,this._tempMatrix=new Ei}generateTexture(t,e){const{region:r,...n}=e||{},i=r||t.getLocalBounds(null,!0);0===i.width&&(i.width=1),0===i.height&&(i.height=1);const s=Bs.create({width:i.width,height:i.height,...n});this._tempMatrix.tx=-i.x,this._tempMatrix.ty=-i.y;const o=t.transform;return t.transform=ho,this.renderer.render(t,{renderTexture:s,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=o,s}destroy(){}}uo.extension={type:[Mn.RendererSystem,Mn.CanvasRendererSystem],name:"textureGenerator"},Fn.add(uo);const co=new yi,fo=new yi;class po{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new yi,this.destinationFrame=new yi,this.viewportFrame=new yi}bind(t=null,e,r){const n=this.renderer;let i,s,o;this.current=t,t?(i=t.baseTexture,o=i.resolution,e||(co.width=t.frame.width,co.height=t.frame.height,e=co),r||(fo.x=t.frame.x,fo.y=t.frame.y,fo.width=e.width,fo.height=e.height,r=fo),s=i.framebuffer):(o=n.resolution,e||(co.width=n._view.screen.width,co.height=n._view.screen.height,e=co),r||(r=co,r.width=e.width,r.height=e.height));const a=this.viewportFrame;a.x=r.x*o,a.y=r.y*o,a.width=r.width*o,a.height=r.height*o,t||(a.y=n.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(s,a),this.renderer.projection.update(r,e,o,!s),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)}clear(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.renderer.background.colorRgba;const r=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer._view.screen,i=r.width!==n.width||r.height!==n.height;if(i){let{x:t,y:e,width:r,height:n}=this.viewportFrame;t=Math.round(t),e=Math.round(e),r=Math.round(r),n=Math.round(n),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(t,e,r,n)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),i&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}po.extension={type:Mn.RendererSystem,name:"renderTexture"},Fn.add(po);class mo{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function go(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function yo(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const n=e.getActiveAttrib(t,i);if(n.name.startsWith("gl_"))continue;const s=ts(e,n.type),o={type:s,name:n.name,size:Zi(s),location:e.getAttribLocation(t,n.name)};r[n.name]=o}return r}function vo(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const n=e.getActiveUniform(t,i),s=n.name.replace(/\[.*?\]$/,""),o=!!n.name.match(/\[.*?\]$/),a=ts(e,n.type);r[s]={name:s,index:i,type:a,size:n.size,isArray:o,value:ki(a,n.size)}}return r}function _o(t,e){const r=go(t,t.VERTEX_SHADER,e.vertexSrc),n=go(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,r),t.attachShader(i,n);const s=e.extra?.transformFeedbackVaryings;if(s&&("function"!==typeof t.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,"separate"===s.bufferMode?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||qi(t,i,r,n),e.attributeData=yo(i,t),e.uniformData=vo(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const r=Object.keys(e.attributeData);r.sort((t,e)=>t>e?1:-1);for(let n=0;n<r.length;n++)e.attributeData[r[n]].location=n,t.bindAttribLocation(i,n,r[n]);t.linkProgram(i)}t.deleteShader(r),t.deleteShader(n);const o={};for(const l in e.uniformData){const r=e.uniformData[l];o[l]={location:t.getUniformLocation(i,l),value:ki(r.type,r.size)}}const a=new mo(i,o);return a}function xo(t,e,r,n,i){r.buffer.update(i)}const bo={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Eo={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function To(t){const e=t.map(t=>({data:t,offset:0,dataLen:0,dirty:0}));let r=0,n=0,i=0;for(let s=0;s<e.length;s++){const t=e[s];if(r=Eo[t.data.type],t.data.size>1&&(r=Math.max(r,16)*t.data.size),t.dataLen=r,n%r!==0&&n<16){const t=n%r%16;n+=t,i+=t}n+r>16?(i=16*Math.ceil(i/16),t.offset=i,i+=r,n=r):(t.offset=i,n+=r,i+=r)}return i=16*Math.ceil(i/16),{uboElements:e,size:i}}function wo(t,e){const r=[];for(const n in t)e[n]&&r.push(e[n]);return r.sort((t,e)=>t.index-e.index),r}function Ao(t,e){if(!t.autoManage)return{size:0,syncFunc:xo};const r=wo(t.uniforms,e),{uboElements:n,size:i}=To(r),s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let o=0;o<n.length;o++){const e=n[o],r=t.uniforms[e.data.name],i=e.data.name;let a=!1;for(let t=0;t<Ui.length;t++){const n=Ui[t];if(n.codeUbo&&n.test(e.data,r)){s.push(`offset = ${e.offset/4};`,Ui[t].codeUbo(e.data.name,r)),a=!0;break}}if(!a)if(e.data.size>1){const t=Zi(e.data.type),r=Math.max(Eo[e.data.type]/16,1),n=t/r,o=(4-n%4)%4;s.push(`\n                cv = ud.${i}.value;\n                v = uv.${i};\n                offset = ${e.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${e.data.size*r}; i++)\n                {\n                    for(var j = 0; j < ${n}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${o};\n                }\n\n                `)}else{const t=bo[e.data.type];s.push(`\n                cv = ud.${i}.value;\n                v = uv.${i};\n                offset = ${e.offset/4};\n                ${t};\n                `)}}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}let So;function Co(){if("boolean"===typeof So)return So;try{const t=new Function("param1","param2","param3","return param1[param2] === param3;");So=!0===t({a:"b"},"a","b")}catch(t){So=!1}return So}let Ro=0;const Io={textureCount:0,uboCount:0};class Po{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Ro++}systemCheck(){if(!Co())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const r=t.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),e||(Io.textureCount=0,Io.uboCount=0,this.syncUniformGroup(t.uniformGroup,Io)),n}setUniforms(t){const e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)}syncUniformGroup(t,e){const r=this.getGlProgram();t.static&&t.dirtyId===r.uniformDirtyGroups[t.id]||(r.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))}syncUniforms(t,e,r){const n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,r)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=zi(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const r=this.getGlProgram();if(!t.static||0!==t.dirtyId||!r.uniformGroups[t.id]){t.dirtyId=0;const n=r.uniformGroups[t.id]||this.createSyncBufferGroup(t,r,e);t.buffer.update(),n(r.uniformData,t.uniforms,this.renderer,Io,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,r.uniformBufferBindings[e])}createSyncBufferGroup(t,e,r){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const i=this.gl.getUniformBlockIndex(e.program,r);e.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;const s=this.getSignature(t,this.shader.program.uniformData,"ubo");let o=this._uboCache[s];if(o||(o=this._uboCache[s]=Ao(t,this.shader.program.uniformData)),t.autoManage){const e=new Float32Array(o.size/4);t.buffer.update(e)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,r){const n=t.uniforms,i=[`${r}-`];for(const s in n)i.push(s),e[s]&&i.push(e[s].type);return i.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,r=t.program,n=_o(e,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Po.extension={type:Mn.RendererSystem,name:"shader"},Fn.add(Po);class Mo{constructor(t){this.renderer=t}run(t){const e=this.renderer;e.emitWithCustomOptions(e.runners.init,t),t.hello&&console.log(`PixiJS 7.1.1 - ${e.rendererLogId} - https://pixijs.com`),e.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}function Oo(t,e=[]){return e[o.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.ADD]=[t.ONE,t.ONE],e[o.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.NONE]=[0,0],e[o.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[o.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[o.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[o.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[o.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[o.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[o.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[o.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[o.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[o.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}Mo.extension={type:[Mn.RendererSystem,Mn.CanvasRendererSystem],name:"startup"},Fn.add(Mo);const Do=0,Fo=1,Bo=2,No=3,Lo=4,ko=5,Uo=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=o.NONE,this._blendEq=!1,this.map=[],this.map[Do]=this.setBlend,this.map[Fo]=this.setOffset,this.map[Bo]=this.setCullFace,this.map[No]=this.setDepthTest,this.map[Lo]=this.setFrontFace,this.map[ko]=this.setDepthMask,this.checks=[],this.defaultState=new Xn,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=Oo(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,r=0;while(e)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(Uo.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(Uo.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],r=this.gl;2===e.length?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let Go=Uo;Go.extension={type:Mn.RendererSystem,name:"state"},Fn.add(Go);r(116);class jo extends H{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(e=>t.systems[e]),r=[...e,...Object.keys(t.systems).filter(t=>!e.includes(t))];for(const n of r)this.addSystem(t.systems[n],n)}addRunners(...t){t.forEach(t=>{this.runners[t]=new Yn(t)})}addSystem(t,e){const r=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=r,this._systemsHash[e]=r;for(const n in this.runners)this.runners[n].add(r);return this}emitWithCustomOptions(t,e){const r=Object.keys(this._systemsHash);t.items.forEach(n=>{const i=r.find(t=>this._systemsHash[t]===n);n[t.name](e[i])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const zo=class{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=zo.defaultMaxIdle,this.checkCountMax=zo.defaultCheckCountMax,this.mode=zo.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==y.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let r=!1;for(let n=0;n<e.length;n++){const i=e[n];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[n]=null,r=!0)}if(r){let t=0;for(let r=0;r<e.length;r++)null!==e[r]&&(e[t++]=e[r]);e.length=t}}unload(t){const e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(let n=t.children.length-1;n>=0;n--)this.unload(t.children[n])}destroy(){this.renderer=null}};let Ho=zo;Ho.defaultMode=y.AUTO,Ho.defaultMaxIdle=3600,Ho.defaultCheckCountMax=600,Ho.extension={type:Mn.RendererSystem,name:"textureGC"},Fn.add(Ho);class Wo{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=u.UNSIGNED_BYTE,this.internalFormat=l.RGBA,this.samplerType=0}}function Xo(t){let e;return e="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?{[u.UNSIGNED_BYTE]:{[l.RGBA]:t.RGBA8,[l.RGB]:t.RGB8,[l.RG]:t.RG8,[l.RED]:t.R8,[l.RGBA_INTEGER]:t.RGBA8UI,[l.RGB_INTEGER]:t.RGB8UI,[l.RG_INTEGER]:t.RG8UI,[l.RED_INTEGER]:t.R8UI,[l.ALPHA]:t.ALPHA,[l.LUMINANCE]:t.LUMINANCE,[l.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[u.BYTE]:{[l.RGBA]:t.RGBA8_SNORM,[l.RGB]:t.RGB8_SNORM,[l.RG]:t.RG8_SNORM,[l.RED]:t.R8_SNORM,[l.RGBA_INTEGER]:t.RGBA8I,[l.RGB_INTEGER]:t.RGB8I,[l.RG_INTEGER]:t.RG8I,[l.RED_INTEGER]:t.R8I},[u.UNSIGNED_SHORT]:{[l.RGBA_INTEGER]:t.RGBA16UI,[l.RGB_INTEGER]:t.RGB16UI,[l.RG_INTEGER]:t.RG16UI,[l.RED_INTEGER]:t.R16UI,[l.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[u.SHORT]:{[l.RGBA_INTEGER]:t.RGBA16I,[l.RGB_INTEGER]:t.RGB16I,[l.RG_INTEGER]:t.RG16I,[l.RED_INTEGER]:t.R16I},[u.UNSIGNED_INT]:{[l.RGBA_INTEGER]:t.RGBA32UI,[l.RGB_INTEGER]:t.RGB32UI,[l.RG_INTEGER]:t.RG32UI,[l.RED_INTEGER]:t.R32UI,[l.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[u.INT]:{[l.RGBA_INTEGER]:t.RGBA32I,[l.RGB_INTEGER]:t.RGB32I,[l.RG_INTEGER]:t.RG32I,[l.RED_INTEGER]:t.R32I},[u.FLOAT]:{[l.RGBA]:t.RGBA32F,[l.RGB]:t.RGB32F,[l.RG]:t.RG32F,[l.RED]:t.R32F,[l.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[u.HALF_FLOAT]:{[l.RGBA]:t.RGBA16F,[l.RGB]:t.RGB16F,[l.RG]:t.RG16F,[l.RED]:t.R16F},[u.UNSIGNED_SHORT_5_6_5]:{[l.RGB]:t.RGB565},[u.UNSIGNED_SHORT_4_4_4_4]:{[l.RGBA]:t.RGBA4},[u.UNSIGNED_SHORT_5_5_5_1]:{[l.RGBA]:t.RGB5_A1},[u.UNSIGNED_INT_2_10_10_10_REV]:{[l.RGBA]:t.RGB10_A2,[l.RGBA_INTEGER]:t.RGB10_A2UI},[u.UNSIGNED_INT_10F_11F_11F_REV]:{[l.RGB]:t.R11F_G11F_B10F},[u.UNSIGNED_INT_5_9_9_9_REV]:{[l.RGB]:t.RGB9_E5},[u.UNSIGNED_INT_24_8]:{[l.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[u.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[l.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:{[u.UNSIGNED_BYTE]:{[l.RGBA]:t.RGBA,[l.RGB]:t.RGB,[l.ALPHA]:t.ALPHA,[l.LUMINANCE]:t.LUMINANCE,[l.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[u.UNSIGNED_SHORT_5_6_5]:{[l.RGB]:t.RGB},[u.UNSIGNED_SHORT_4_4_4_4]:{[l.RGBA]:t.RGBA},[u.UNSIGNED_SHORT_5_5_5_1]:{[l.RGBA]:t.RGBA}},e}class Vo{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Qn,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Xo(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};const r=new Wo(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Wo(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(t,e=0){const{gl:r}=this;if(t=t?.castToBaseTexture(),t?.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let t=0;t<r.length;t++)r[t]===this.unknownTexture&&this.bind(null,t)}for(let n=0;n<r.length;n++)r[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[n]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:r,CONTEXT_UID:n}=this;if(r)for(let i=t-1;i>=0;--i){const t=e[i];if(t){const e=t._glTextures[n];e.samplerType!==c.FLOAT&&this.renderer.texture.unbind(t)}}}initTexture(t){const e=new Wo(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){e.internalFormat=this.internalFormats[t.type]?.[t.format]??t.format,2===this.webGLVersion&&t.type===u.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const r=this.renderer;if(this.initTextureType(t,e),t.resource?.upload(r,t,e))e.samplerType!==c.FLOAT&&(this.hasIntegerTextures=!0);else{const n=t.realWidth,i=t.realHeight,s=r.gl;(e.width!==n||e.height!==i||e.dirtyId<0)&&(e.width=n,e.height=i,s.texImage2D(t.target,0,e.internalFormat,n,i,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:r}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const e=this.managedTextures.indexOf(t);-1!==e&&cn(this.managedTextures,e,1)}}updateTextureStyle(t){const e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==p.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=f.CLAMP,t.resource?.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const r=this.gl;if(e.mipmap&&t.mipmap!==p.ON_MANUAL&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===d.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const e=this.renderer.context.extensions.anisotropicFiltering;if(e&&t.anisotropicLevel>0&&t.scaleMode===d.LINEAR){const n=Math.min(t.anisotropicLevel,r.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,e.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===d.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===d.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}Vo.extension={type:Mn.RendererSystem,name:"texture"},Fn.add(Vo);class $o{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glTransformFeedbacks[r]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:r,renderer:n}=this;e&&n.shader.bind(e),r.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:r,CONTEXT_UID:n}=this,i=e.createTransformFeedback();t._glTransformFeedbacks[n]=i,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,i);for(let s=0;s<t.buffers.length;s++){const i=t.buffers[s];i&&(r.buffer.update(i),i._glBuffers[n].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,s,i._glBuffers[n].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),i}disposeTransformFeedback(t,e){const r=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const i=this.renderer.buffer;if(i)for(let s=0;s<t.buffers.length;s++){const r=t.buffers[s];if(!r)continue;const n=r._glBuffers[this.CONTEXT_UID];n&&(n.refCount--,0!==n.refCount||e||i.dispose(r,e))}r&&(e||n.deleteTransformFeedback(r),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}$o.extension={type:Mn.RendererSystem,name:"transformFeedback"},Fn.add($o);class Yo{constructor(t){this.renderer=t}init(t){this.screen=new yi(0,0,t.width,t.height),this.element=t.view||T.ADAPTER.createCanvas(),this.resolution=t.resolution||T.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const r=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=r,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",r,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){t&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Yo.extension={type:[Mn.RendererSystem,Mn.CanvasRendererSystem],name:"_view"},Fn.add(Yo),T.PREFER_ENV=i.WEBGL2,T.STRICT_TEXTURE_CACHE=!1,Object.defineProperties(T,{WRAP_MODE:{get(){return Qn.defaultOptions.wrapMode},set(t){tt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Qn.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return Qn.defaultOptions.scaleMode},set(t){tt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Qn.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return Qn.defaultOptions.mipmap},set(t){tt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Qn.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return Qn.defaultOptions.anisotropicLevel},set(t){tt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Qn.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return tt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),bs.defaultResolution},set(t){bs.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return tt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),bs.defaultMultisample},set(t){bs.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return ys.defaultMaxTextures},set(t){tt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),ys.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return ys.defaultBatchSize},set(t){tt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),ys.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return ys.canUploadSameBuffer},set(t){tt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),ys.canUploadSameBuffer=t}},GC_MODE:{get(){return Ho.defaultMode},set(t){tt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ho.defaultMode=t}},GC_MAX_IDLE:{get(){return Ho.defaultMaxIdle},set(t){tt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ho.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return Ho.defaultCheckCountMax},set(t){tt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ho.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return ss.defaultVertexPrecision},set(t){tt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),ss.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return ss.defaultFragmentPrecision},set(t){tt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),ss.defaultFragmentPrecision=t}}});var qo=(t=>(t[t["HIGH"]=25]="HIGH",t[t["NORMAL"]=0]="NORMAL",t[t["LOW"]=-25]="LOW",t[t["UTILITY"]=-50]="UTILITY",t))(qo||{});class Ko{constructor(t,e=null,r=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=n}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Zo=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Ko(null,null,1/0),this.deltaMS=1/Zo.targetFPMS,this.elapsedMS=1/Zo.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,r=qo.NORMAL){return this._addListener(new Ko(t,e,r))}addOnce(t,e,r=qo.NORMAL){return this._addListener(new Ko(t,e,r,!0))}_addListener(t){let e=this._head.next,r=this._head;if(e){while(e){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this}remove(t,e){let r=this._head.next;while(r)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;while(e=e.next)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;while(t)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Zo.targetFPMS;const r=this._head;let n=r.next;while(n)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,Zo.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(0===t)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Zo._shared){const t=Zo._shared=new Zo;t.autoStart=!0,t._protected=!0}return Zo._shared}static get system(){if(!Zo._system){const t=Zo._system=new Zo;t.autoStart=!0,t._protected=!0}return Zo._system}};let Jo=Zo;Jo.targetFPMS=.06,Object.defineProperties(T,{TARGET_FPMS:{get(){return Jo.targetFPMS},set(t){tt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Jo.targetFPMS=t}}});class Qo{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,qo.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Jo.shared:new Jo,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}Qo.extension=Mn.Application,Fn.add(Qo);const ta=[];function ea(t){for(const e of ta)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}Fn.handleByList(Mn.Renderer,ta);var ra="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",na="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";const ia=ra,sa=na;class oa{constructor(t){this.renderer=t}contextChange(t){let e;if(1===this.renderer.context.webGLVersion){const r=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,r)}else{const r=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,r)}e>=x.HIGH?this.multisample=x.HIGH:e>=x.MEDIUM?this.multisample=x.MEDIUM:e>=x.LOW?this.multisample=x.LOW:this.multisample=x.NONE}destroy(){}}oa.extension={type:Mn.RendererSystem,name:"_multisample"},Fn.add(oa);class aa{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class la{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glBuffers[r]||this.createGLBuffer(t);e.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:r,CONTEXT_UID:n}=this;if(this.boundBufferBases[e]!==t){const i=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[e]=t,r.bindBufferBase(r.UNIFORM_BUFFER,e,i.buffer)}}bindBufferRange(t,e,r){const{gl:n,CONTEXT_UID:i}=this;r=r||0;const s=t._glBuffers[i]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,e||0,s.buffer,256*r,256)}update(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glBuffers[r]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,e.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const r=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,r)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const r=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),r&&(e||n.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let r=0;r<e.length;r++)this.dispose(this.managedBuffers[e[r]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:r}=this;return t._glBuffers[e]=new aa(r.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}la.extension={type:Mn.RendererSystem,name:"buffer"},Fn.add(la);class ha{constructor(t){this.renderer=t}render(t,e){const r=this.renderer;let n,i,s,o;if(e&&(n=e.renderTexture,i=e.clear,s=e.transform,o=e.skipUpdateTransform),this.renderingToScreen=!n,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=s,!r.context.isLost){if(n||(this.lastObjectRendered=t),!o){const e=t.enableTempParent();t.updateTransform(),t.disableTempParent(e)}r.renderTexture.bind(n),r.batch.currentRenderer.start(),(i??r.background.clearBeforeRender)&&r.renderTexture.clear(),t.render(r),r.batch.currentRenderer.flush(),n&&(e.blit&&r.framebuffer.blit(),n.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ha.extension={type:Mn.RendererSystem,name:"objectRenderer"},Fn.add(ha);const ua=class extends jo{constructor(t){super(),t=Object.assign({},T.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new as({projectionMatrix:new Ei},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:ua.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(tt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,t.backgroundAlpha=!1===t.useContextAlpha?1:t.backgroundAlpha);const r={hello:t.hello,_plugin:ua.__plugins,background:{alpha:t.backgroundAlpha,color:t.background??t.backgroundColor,clearBeforeRender:t.clearBeforeRender},_view:{height:t.height,width:t.width,autoDensity:t.autoDensity,resolution:t.resolution,view:t.view},context:{antialias:t.antialias,context:t.context,powerPreference:t.powerPreference,premultipliedAlpha:t.premultipliedAlpha,preserveDrawingBuffer:t.preserveDrawingBuffer}};this.startup.run(r),this.options=t}static test(t){return!t?.forceCanvas&&it()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return tt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return tt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return tt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return tt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){tt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return tt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.color}set backgroundAlpha(t){tt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return tt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let ca=ua;ca.extension={type:Mn.Renderer,priority:1},ca.__plugins={},ca.__systems={},Fn.handleByMap(Mn.RendererPlugin,ca.__plugins),Fn.handleByMap(Mn.RendererSystem,ca.__systems),Fn.add(ca);class da extends qn{constructor(t,e){const{width:r,height:n}=e||{};super(r,n),this.items=[],this.itemDirtyIds=[];for(let i=0;i<t;i++){const t=new Qn;this.items.push(t),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof qn?this.addResourceAt(t[r],r):this.addResourceAt($n(t[r],e),r))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(t=>t.resource).filter(t=>t),e=t.map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:e}=this.items[0];return this.resize(t,e),Promise.resolve(this)}),this._load}}class fa extends da{constructor(t,e){const{width:r,height:n}=e||{};let i,s;Array.isArray(t)?(i=t,s=t.length):s=t,super(s,{width:r,height:n}),i&&this.initFromArray(i,e)}addBaseTextureAt(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this}bind(t){super.bind(t),t.target=h.TEXTURE_2D_ARRAY}upload(t,e,r){const{length:n,itemDirtyIds:i,items:s}=this,{gl:o}=t;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,n,0,e.format,r.type,null);for(let a=0;a<n;a++){const t=s[a];i[a]<t.dirtyId&&(i[a]=t.dirtyId,t.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,t.resource.width,t.resource.height,1,e.format,r.type,t.resource.source))}return!0}}class pa extends Is{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const ma=class extends da{constructor(t,e){const{width:r,height:n,autoLoad:i,linkBaseTexture:s}=e||{};if(t&&t.length!==ma.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:r,height:n});for(let o=0;o<ma.SIDES;o++)this.items[o].target=h.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=!1!==s,t&&this.initFromArray(t,e),!1!==i&&this.load()}bind(t){super.bind(t),t.target=h.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=h.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,r){const n=this.itemDirtyIds;for(let i=0;i<ma.SIDES;i++){const s=this.items[i];(n[i]<s.dirtyId||r.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,r),n[i]=s.dirtyId):n[i]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),n[i]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===ma.SIDES}};let ga=ma;ga.SIDES=6;class ya extends Is{constructor(t,e){let r,n;e=e||{},"string"===typeof t?(r=ya.EMPTY,n=t):(r=t,n=null),super(r),this.url=n,this.crossOrigin=e.crossOrigin??!0,this.alphaMode="number"===typeof e.alphaMode?e.alphaMode:null,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(async(t,e)=>{if(null!==this.url)try{const e=await T.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await e.blob();if(this.destroyed)return;const n=await createImageBitmap(r,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===m.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=n,this.update(),t(this)}catch(r){if(this.destroyed)return;e(r),this.onError.emit(r)}else t(this)})),this._load}upload(t,e,r){return this.source instanceof ImageBitmap?("number"===typeof this.alphaMode&&(e.alphaMode=this.alphaMode),super.upload(t,e,r)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&"undefined"!==typeof ImageBitmap&&("string"===typeof t||t instanceof ImageBitmap)}static get EMPTY(){return ya._EMPTY=ya._EMPTY??T.ADAPTER.createCanvas(0,0),ya._EMPTY}}r(4979);const va=class extends Is{constructor(t,e){e=e||{},super(T.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},va.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()})),this._load}_loadSvg(){const t=new Image;Is.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,r=t.height;if(!e||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=e*this.scale,i=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/r*e,i=this._overrideHeight||this._overrideWidth/e*r),n=Math.round(n),i=Math.round(i);const s=this.source;s.width=n,s.height=i,s._pixiId=`canvas_${pn()}`,s.getContext("2d").drawImage(t,0,0,e,r,0,0,n,i),this._resolve(),this._resolve=null}}static getSize(t){const e=va.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return"svg"===e||"string"===typeof t&&t.startsWith("data:image/svg+xml")||"string"===typeof t&&va.SVG_XML.test(t)}};let _a=va;_a.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,_a.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const xa=class extends Is{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),"string"===typeof t&&(t=[t]);const n=t[0].src||t[0];Is.crossOrigin(r,n,e.crossorigin);for(let e=0;e<t.length;++e){const n=document.createElement("source");let{src:i,mime:s}=t[e];i=i||t[e];const o=i.split("?").shift().toLowerCase(),a=o.slice(o.lastIndexOf(".")+1);s=s||xa.MIME_TYPES[a]||`video/${a}`,n.src=i,n.type=s,r.appendChild(n)}t=r}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==e.autoLoad&&this.load()}update(t=0){if(!this.destroyed){const t=Jo.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){const t=this.source;return t.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Jo.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Jo.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(Jo.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Jo.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Jo.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||xa.TYPES.includes(e)}};let ba=xa;ba.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],ba.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},Vn.push(ya,Ps,pa,ba,_a,Kn,ga,fa)},3838:function(t,e,r){"use strict";var n=r(7080),i=r(5170),s=r(8469),o=r(3789);t.exports=function(t){var e=n(this),r=o(t);return!(i(e)>r.size)&&!1!==s(e,function(t){if(!r.includes(t))return!1},!0)}},3853:function(t,e,r){"use strict";var n=r(6518),i=r(4449),s=r(4916),o=!s("isDisjointFrom",function(t){return!t});n({target:"Set",proto:!0,real:!0,forced:o},{isDisjointFrom:i})},3925:function(t,e,r){"use strict";var n=r(34);t.exports=function(t){return n(t)||null===t}},4055:function(t,e,r){"use strict";var n=r(4576),i=r(34),s=n.document,o=i(s)&&i(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},4114:function(t,e,r){"use strict";var n=r(6518),i=r(8981),s=r(6198),o=r(4527),a=r(6837),l=r(9039),h=l(function(){return 4294967297!==[].push.call({length:4294967296},1)}),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},c=h||!u();n({target:"Array",proto:!0,arity:1,forced:c},{push:function(t){var e=i(this),r=s(e),n=arguments.length;a(r+n);for(var l=0;l<n;l++)e[r]=arguments[l],r++;return o(e,r),r}})},4117:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},4195:function(t){"use strict";t.exports=SyntaxError},4204:function(t,e,r){"use strict";var n=r(7080),i=r(4402).add,s=r(9286),o=r(3789),a=r(507);t.exports=function(t){var e=n(this),r=o(t).getIterator(),l=s(e);return a(r,function(t){i(l,t)}),l}},4209:function(t,e,r){"use strict";var n=r(8227),i=r(6269),s=n("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[s]===t)}},4232:function(t,e,r){"use strict";r.d(e,{$3:function(){return f},$H:function(){return L},BH:function(){return X},BX:function(){return rt},Bm:function(){return b},C4:function(){return Z},CE:function(){return m},CP:function(){return h},DY:function(){return k},Gv:function(){return E},J$:function(){return Q},Kg:function(){return x},MZ:function(){return i},Mp:function(){return l},NO:function(){return a},Oj:function(){return s},PT:function(){return O},Qd:function(){return C},Ro:function(){return j},SU:function(){return I},TF:function(){return c},Tg:function(){return F},Tn:function(){return _},Tr:function(){return V},We:function(){return H},X$:function(){return u},Y2:function(){return tt},ZH:function(){return B},Zf:function(){return S},bB:function(){return G},cy:function(){return p},gd:function(){return v},pD:function(){return n},rU:function(){return N},tE:function(){return o},u3:function(){return nt},vM:function(){return g},yI:function(){return R},yL:function(){return T},yQ:function(){return U}});r(4114),r(8111),r(2489),r(7588);
/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
function n(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return t=>t in e}const i={},s=[],o=()=>{},a=()=>!1,l=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),h=t=>t.startsWith("onUpdate:"),u=Object.assign,c=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},d=Object.prototype.hasOwnProperty,f=(t,e)=>d.call(t,e),p=Array.isArray,m=t=>"[object Map]"===A(t),g=t=>"[object Set]"===A(t),y=t=>"[object Date]"===A(t),v=t=>"[object RegExp]"===A(t),_=t=>"function"===typeof t,x=t=>"string"===typeof t,b=t=>"symbol"===typeof t,E=t=>null!==t&&"object"===typeof t,T=t=>(E(t)||_(t))&&_(t.then)&&_(t.catch),w=Object.prototype.toString,A=t=>w.call(t),S=t=>A(t).slice(8,-1),C=t=>"[object Object]"===A(t),R=t=>x(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,I=n(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),P=t=>{const e=Object.create(null);return r=>{const n=e[r];return n||(e[r]=t(r))}},M=/-(\w)/g,O=P(t=>t.replace(M,(t,e)=>e?e.toUpperCase():"")),D=/\B([A-Z])/g,F=P(t=>t.replace(D,"-$1").toLowerCase()),B=P(t=>t.charAt(0).toUpperCase()+t.slice(1)),N=P(t=>{const e=t?`on${B(t)}`:"";return e}),L=(t,e)=>!Object.is(t,e),k=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},U=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},G=t=>{const e=parseFloat(t);return isNaN(e)?t:e},j=t=>{const e=x(t)?Number(t):NaN;return isNaN(e)?t:e};let z;const H=()=>z||(z="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:{});const W="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",X=n(W);function V(t){if(p(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],i=x(n)?K(n):V(n);if(i)for(const t in i)e[t]=i[t]}return e}if(x(t)||E(t))return t}const $=/;(?![^(]*\))/g,Y=/:([^]+)/,q=/\/\*[^]*?\*\//g;function K(t){const e={};return t.replace(q,"").split($).forEach(t=>{if(t){const r=t.split(Y);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Z(t){let e="";if(x(t))e=t;else if(p(t))for(let r=0;r<t.length;r++){const n=Z(t[r]);n&&(e+=n+" ")}else if(E(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const J="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Q=n(J);function tt(t){return!!t||""===t}function et(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=rt(t[n],e[n]);return r}function rt(t,e){if(t===e)return!0;let r=y(t),n=y(e);if(r||n)return!(!r||!n)&&t.getTime()===e.getTime();if(r=b(t),n=b(e),r||n)return t===e;if(r=p(t),n=p(e),r||n)return!(!r||!n)&&et(t,e);if(r=E(t),n=E(e),r||n){if(!r||!n)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const r in t){const n=t.hasOwnProperty(r),i=e.hasOwnProperty(r);if(n&&!i||!n&&i||!rt(t[r],e[r]))return!1}}return String(t)===String(e)}function nt(t,e){return t.findIndex(t=>rt(t,e))}},4261:function(t,e,r){"use strict";var n=r(3682),i=r(7551),s=r(2531),o=r(5196);t.exports=o||n.call(s,i)},4270:function(t,e,r){"use strict";var n=r(9565),i=r(4901),s=r(34),o=TypeError;t.exports=function(t,e){var r,a;if("string"===e&&i(r=t.toString)&&!s(a=n(r,t)))return a;if(i(r=t.valueOf)&&!s(a=n(r,t)))return a;if("string"!==e&&i(r=t.toString)&&!s(a=n(r,t)))return a;throw new o("Can't convert object to primitive value")}},4302:function(t){"use strict";t.exports=Error},4376:function(t,e,r){"use strict";var n=r(2195);t.exports=Array.isArray||function(t){return"Array"===n(t)}},4402:function(t,e,r){"use strict";var n=r(9504),i=Set.prototype;t.exports={Set:Set,add:n(i.add),has:n(i.has),remove:n(i["delete"]),proto:i}},4449:function(t,e,r){"use strict";var n=r(7080),i=r(4402).has,s=r(5170),o=r(3789),a=r(8469),l=r(507),h=r(9539);t.exports=function(t){var e=n(this),r=o(t);if(s(e)<=r.size)return!1!==a(e,function(t){if(r.includes(t))return!1},!0);var u=r.getIterator();return!1!==l(u,function(t){if(i(e,t))return h(u,"normal",!1)})}},4495:function(t,e,r){"use strict";var n=r(9519),i=r(9039),s=r(4576),o=s.String;t.exports=!!Object.getOwnPropertySymbols&&!i(function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},4527:function(t,e,r){"use strict";var n=r(3724),i=r(4376),s=TypeError,o=Object.getOwnPropertyDescriptor,a=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!o(t,"length").writable)throw new s("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4549:function(t,e,r){"use strict";var n=r(4576);t.exports=function(t,e){var r=n.Iterator,i=r&&r.prototype,s=i&&i[t],o=!1;if(s)try{s.call({next:function(){return{done:!0}},return:function(){o=!0}},-1)}catch(a){a instanceof e||(o=!1)}if(!o)return s}},4576:function(t,e,r){"use strict";var n=function(t){return t&&t.Math===Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4644:function(t,e,r){"use strict";var n,i,s,o=r(7811),a=r(3724),l=r(4576),h=r(4901),u=r(34),c=r(9297),d=r(6955),f=r(6823),p=r(6699),m=r(6840),g=r(2106),y=r(1625),v=r(2787),_=r(2967),x=r(8227),b=r(3392),E=r(1181),T=E.enforce,w=E.get,A=l.Int8Array,S=A&&A.prototype,C=l.Uint8ClampedArray,R=C&&C.prototype,I=A&&v(A),P=S&&v(S),M=Object.prototype,O=l.TypeError,D=x("toStringTag"),F=b("TYPED_ARRAY_TAG"),B="TypedArrayConstructor",N=o&&!!_&&"Opera"!==d(l.opera),L=!1,k={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},G=function(t){if(!u(t))return!1;var e=d(t);return"DataView"===e||c(k,e)||c(U,e)},j=function(t){var e=v(t);if(u(e)){var r=w(e);return r&&c(r,B)?r[B]:j(e)}},z=function(t){if(!u(t))return!1;var e=d(t);return c(k,e)||c(U,e)},H=function(t){if(z(t))return t;throw new O("Target is not a typed array")},W=function(t){if(h(t)&&(!_||y(I,t)))return t;throw new O(f(t)+" is not a typed array constructor")},X=function(t,e,r,n){if(a){if(r)for(var i in k){var s=l[i];if(s&&c(s.prototype,t))try{delete s.prototype[t]}catch(o){try{s.prototype[t]=e}catch(h){}}}P[t]&&!r||m(P,t,r?e:N&&S[t]||e,n)}},V=function(t,e,r){var n,i;if(a){if(_){if(r)for(n in k)if(i=l[n],i&&c(i,t))try{delete i[t]}catch(s){}if(I[t]&&!r)return;try{return m(I,t,r?e:N&&I[t]||e)}catch(s){}}for(n in k)i=l[n],!i||i[t]&&!r||m(i,t,e)}};for(n in k)i=l[n],s=i&&i.prototype,s?T(s)[B]=i:N=!1;for(n in U)i=l[n],s=i&&i.prototype,s&&(T(s)[B]=i);if((!N||!h(I)||I===Function.prototype)&&(I=function(){throw new O("Incorrect invocation")},N))for(n in k)l[n]&&_(l[n],I);if((!N||!P||P===M)&&(P=I.prototype,N))for(n in k)l[n]&&_(l[n].prototype,P);if(N&&v(R)!==P&&_(R,P),a&&!c(P,D))for(n in L=!0,g(P,D,{configurable:!0,get:function(){return u(this)?this[F]:void 0}}),k)l[n]&&p(l[n],F,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:L&&F,aTypedArray:H,aTypedArrayConstructor:W,exportTypedArrayMethod:X,exportTypedArrayStaticMethod:V,getTypedArrayConstructor:j,isView:G,isTypedArray:z,TypedArray:I,TypedArrayPrototype:P}},4659:function(t,e,r){"use strict";var n=r(3724),i=r(4913),s=r(6980);t.exports=function(t,e,r){n?i.f(t,e,s(0,r)):t[e]=r}},4671:function(t){"use strict";t.exports=ReferenceError},4887:function(t,e,r){"use strict";var n,i=r(5631),s=r(9576);try{n=[].__proto__===Array.prototype}catch(h){if(!h||"object"!==typeof h||!("code"in h)||"ERR_PROTO_ACCESS"!==h.code)throw h}var o=!!n&&s&&s(Object.prototype,"__proto__"),a=Object,l=a.getPrototypeOf;t.exports=o&&"function"===typeof o.get?i([o.get]):"function"===typeof l&&function(t){return l(null==t?t:a(t))}},4901:function(t){"use strict";var e="object"==typeof document&&document.all;t.exports="undefined"==typeof e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},4913:function(t,e,r){"use strict";var n=r(3724),i=r(5917),s=r(8686),o=r(8551),a=r(6969),l=TypeError,h=Object.defineProperty,u=Object.getOwnPropertyDescriptor,c="enumerable",d="configurable",f="writable";e.f=n?s?function(t,e,r){if(o(t),e=a(e),o(r),"function"===typeof t&&"prototype"===e&&"value"in r&&f in r&&!r[f]){var n=u(t,e);n&&n[f]&&(t[e]=r.value,r={configurable:d in r?r[d]:n[d],enumerable:c in r?r[c]:n[c],writable:!1})}return h(t,e,r)}:h:function(t,e,r){if(o(t),e=a(e),o(r),i)try{return h(t,e,r)}catch(n){}if("get"in r||"set"in r)throw new l("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},4916:function(t,e,r){"use strict";var n=r(7751),i=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},s=function(t){return{size:t,has:function(){return!0},keys:function(){throw new Error("e")}}};t.exports=function(t,e){var r=n("Set");try{(new r)[t](i(0));try{return(new r)[t](i(-1)),!1}catch(a){if(!e)return!0;try{return(new r)[t](s(-1/0)),!1}catch(l){var o=new r;return o.add(1),o.add(2),e(o[t](s(1/0)))}}}catch(l){return!1}}},4924:function(t){"use strict";var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch(r){e=!1}t.exports=e},4977:function(t){"use strict";t.exports=Math.floor},4979:function(t,e,r){"use strict";var n=r(6518),i=r(4576),s=r(7751),o=r(6980),a=r(4913).f,l=r(9297),h=r(679),u=r(3167),c=r(2603),d=r(5002),f=r(6193),p=r(3724),m=r(6395),g="DOMException",y=s("Error"),v=s(g),_=function(){h(this,x);var t=arguments.length,e=c(t<1?void 0:arguments[0]),r=c(t<2?void 0:arguments[1],"Error"),n=new v(e,r),i=new y(e);return i.name=g,a(n,"stack",o(1,f(i.stack,1))),u(n,this,_),n},x=_.prototype=v.prototype,b="stack"in new y(g),E="stack"in new v(1,2),T=v&&p&&Object.getOwnPropertyDescriptor(i,g),w=!!T&&!(T.writable&&T.configurable),A=b&&!w&&!E;n({global:!0,constructor:!0,forced:m||A},{DOMException:A?_:v});var S=s(g),C=S.prototype;if(C.constructor!==S)for(var R in m||a(C,"constructor",o(1,S)),d)if(l(d,R)){var I=d[R],P=I.s;l(S,P)||a(S,P,o(6,I.c))}},5002:function(t){"use strict";t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},5024:function(t,e,r){"use strict";var n=r(6518),i=r(3650),s=r(9835),o=r(4916),a=!o("symmetricDifference")||!s("symmetricDifference");n({target:"Set",proto:!0,real:!0,forced:a},{symmetricDifference:i})},5031:function(t,e,r){"use strict";var n=r(7751),i=r(9504),s=r(8480),o=r(3717),a=r(8551),l=i([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=s.f(a(t)),r=o.f;return r?l(e,r(t)):e}},5072:function(t,e,r){"use strict";var n;r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698),r(9577);var i=r(2509),s=r(4302),o=r(1334),a=r(5619),l=r(4671),h=r(4195),u=r(9340),c=r(1868),d=r(3023),f=r(4977),p=r(2673),m=r(6931),g=r(409),y=r(7847),v=r(9234),_=Function,x=function(t){try{return _('"use strict"; return ('+t+").constructor;")()}catch(e){}},b=r(9576),E=r(4924),T=function(){throw new u},w=b?function(){try{return T}catch(t){try{return b(arguments,"callee").get}catch(e){return T}}}():T,A=r(8374)(),S=r(833),C=r(6417),R=r(6147),I=r(7551),P=r(2531),M={},O="undefined"!==typeof Uint8Array&&S?S(Uint8Array):n,D={__proto__:null,"%AggregateError%":"undefined"===typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":A&&S?S([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":M,"%AsyncGenerator%":M,"%AsyncGeneratorFunction%":M,"%AsyncIteratorPrototype%":M,"%Atomics%":"undefined"===typeof Atomics?n:Atomics,"%BigInt%":"undefined"===typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":s,"%eval%":eval,"%EvalError%":o,"%Float16Array%":"undefined"===typeof Float16Array?n:Float16Array,"%Float32Array%":"undefined"===typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":_,"%GeneratorFunction%":M,"%Int8Array%":"undefined"===typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":A&&S?S(S([][Symbol.iterator]())):n,"%JSON%":"object"===typeof JSON?JSON:n,"%Map%":"undefined"===typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&A&&S?S((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":i,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?n:Promise,"%Proxy%":"undefined"===typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":l,"%Reflect%":"undefined"===typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&A&&S?S((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":A&&S?S(""[Symbol.iterator]()):n,"%Symbol%":A?Symbol:n,"%SyntaxError%":h,"%ThrowTypeError%":w,"%TypedArray%":O,"%TypeError%":u,"%Uint8Array%":"undefined"===typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?n:Uint32Array,"%URIError%":c,"%WeakMap%":"undefined"===typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?n:WeakSet,"%Function.prototype.call%":P,"%Function.prototype.apply%":I,"%Object.defineProperty%":E,"%Object.getPrototypeOf%":C,"%Math.abs%":d,"%Math.floor%":f,"%Math.max%":p,"%Math.min%":m,"%Math.pow%":g,"%Math.round%":y,"%Math.sign%":v,"%Reflect.getPrototypeOf%":R};if(S)try{null.error}catch(Y){var F=S(S(Y));D["%Error.prototype%"]=F}var B=function t(e){var r;if("%AsyncFunction%"===e)r=x("async function () {}");else if("%GeneratorFunction%"===e)r=x("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=x("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&S&&(r=S(i.prototype))}return D[e]=r,r},N={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},L=r(3682),k=r(1866),U=L.call(P,Array.prototype.concat),G=L.call(I,Array.prototype.splice),j=L.call(P,String.prototype.replace),z=L.call(P,String.prototype.slice),H=L.call(P,RegExp.prototype.exec),W=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,X=/\\(\\)?/g,V=function(t){var e=z(t,0,1),r=z(t,-1);if("%"===e&&"%"!==r)throw new h("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new h("invalid intrinsic syntax, expected opening `%`");var n=[];return j(t,W,function(t,e,r,i){n[n.length]=r?j(i,X,"$1"):e||t}),n},$=function(t,e){var r,n=t;if(k(N,n)&&(r=N[n],n="%"+r[0]+"%"),k(D,n)){var i=D[n];if(i===M&&(i=B(n)),"undefined"===typeof i&&!e)throw new u("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new h("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!==typeof t||0===t.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof e)throw new u('"allowMissing" argument must be a boolean');if(null===H(/^%?[^%]*%?$/,t))throw new h("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=V(t),n=r.length>0?r[0]:"",i=$("%"+n+"%",e),s=i.name,o=i.value,a=!1,l=i.alias;l&&(n=l[0],G(r,U([0,1],l)));for(var c=1,d=!0;c<r.length;c+=1){var f=r[c],p=z(f,0,1),m=z(f,-1);if(('"'===p||"'"===p||"`"===p||'"'===m||"'"===m||"`"===m)&&p!==m)throw new h("property names with quotes must have matching quotes");if("constructor"!==f&&d||(a=!0),n+="."+f,s="%"+n+"%",k(D,s))o=D[s];else if(null!=o){if(!(f in o)){if(!e)throw new u("base intrinsic for "+t+" exists, but the property is not available.");return}if(b&&c+1>=r.length){var g=b(o,f);d=!!g,o=d&&"get"in g&&!("originalValue"in g.get)?g.get:o[f]}else d=k(o,f),o=o[f];d&&!a&&(D[s]=o)}}return o}},5106:function(t,e,r){"use strict";r(4114);var n=r(6529);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var s=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,l=["<",">",'"',"`"," ","\r","\n","\t"],h=["{","}","|","\\","^","`"].concat(l),u=["'"].concat(h),c=["%","/","?",";","#"].concat(u),d=["/","?","#"],f=255,p=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=r(5395);function x(t,e,r){if(t&&"object"===typeof t&&t instanceof i)return t;var n=new i;return n.parse(t,e,r),n}function b(t){return"string"===typeof t&&(t=x(t)),t instanceof i?t.format():i.prototype.format.call(t)}function E(t,e){return x(t,!1,!0).resolve(e)}function T(t,e){return t?x(t,!1,!0).resolveObject(e):e}i.prototype.parse=function(t,e,r){if("string"!==typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),o=-1!==i&&i<t.indexOf("#")?"?":"#",l=t.split(o),h=/\\/g;l[0]=l[0].replace(h,"/"),t=l.join(o);var x=t;if(x=x.trim(),!r&&1===t.split("#").length){var b=a.exec(x);if(b)return this.path=x,this.href=x,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var E=s.exec(x);if(E){E=E[0];var T=E.toLowerCase();this.protocol=T,x=x.substr(E.length)}if(r||E||x.match(/^\/\/[^@/]+@[^@/]+/)){var w="//"===x.substr(0,2);!w||E&&y[E]||(x=x.substr(2),this.slashes=!0)}if(!y[E]&&(w||E&&!v[E])){for(var A,S,C=-1,R=0;R<d.length;R++){var I=x.indexOf(d[R]);-1!==I&&(-1===C||I<C)&&(C=I)}S=-1===C?x.lastIndexOf("@"):x.lastIndexOf("@",C),-1!==S&&(A=x.slice(0,S),x=x.slice(S+1),this.auth=decodeURIComponent(A)),C=-1;for(R=0;R<c.length;R++){I=x.indexOf(c[R]);-1!==I&&(-1===C||I<C)&&(C=I)}-1===C&&(C=x.length),this.host=x.slice(0,C),x=x.slice(C),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var M=this.hostname.split(/\./),O=(R=0,M.length);R<O;R++){var D=M[R];if(D&&!D.match(p)){for(var F="",B=0,N=D.length;B<N;B++)D.charCodeAt(B)>127?F+="x":F+=D[B];if(!F.match(p)){var L=M.slice(0,R),k=M.slice(R+1),U=D.match(m);U&&(L.push(U[1]),k.unshift(U[2])),k.length&&(x="/"+k.join(".")+x),this.hostname=L.join(".");break}}}this.hostname.length>f?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=n.toASCII(this.hostname));var G=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+G,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==x[0]&&(x="/"+x))}if(!g[T])for(R=0,O=u.length;R<O;R++){var z=u[R];if(-1!==x.indexOf(z)){var H=encodeURIComponent(z);H===z&&(H=escape(z)),x=x.split(z).join(H)}}var W=x.indexOf("#");-1!==W&&(this.hash=x.substr(W),x=x.slice(0,W));var X=x.indexOf("?");if(-1!==X?(this.search=x.substr(X),this.query=x.substr(X+1),e&&(this.query=_.parse(this.query)),x=x.slice(0,X)):e&&(this.search="",this.query={}),x&&(this.pathname=x),v[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var V=this.search||"";this.path=G+V}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&"object"===typeof this.query&&Object.keys(this.query).length&&(s=_.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),o=o.replace("#","%23"),e+i+r+o+n},i.prototype.resolve=function(t){return this.resolveObject(x(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if("string"===typeof t){var e=new i;e.parse(t,!1,!0),t=e}for(var r=new i,n=Object.keys(this),s=0;s<n.length;s++){var o=n[s];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),l=0;l<a.length;l++){var h=a[l];"protocol"!==h&&(r[h]=t[h])}return v[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!v[t.protocol]){for(var u=Object.keys(t),c=0;c<u.length;c++){var d=u[c];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||y[t.protocol])r.pathname=t.pathname;else{var f=(t.pathname||"").split("/");while(f.length&&!(t.host=f.shift()));t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var p=r.pathname||"",m=r.search||"";r.path=p+m}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=_||g||r.host&&t.pathname,b=x,E=r.pathname&&r.pathname.split("/")||[],T=(f=t.pathname&&t.pathname.split("/")||[],r.protocol&&!v[r.protocol]);if(T&&(r.hostname="",r.port=null,r.host&&(""===E[0]?E[0]=r.host:E.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),x=x&&(""===f[0]||""===E[0])),_)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,E=f;else if(f.length)E||(E=[]),E.pop(),E=E.concat(f),r.search=t.search,r.query=t.query;else if(null!=t.search){if(T){r.host=E.shift(),r.hostname=r.host;var w=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");w&&(r.auth=w.shift(),r.hostname=w.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!E.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=E.slice(-1)[0],S=(r.host||t.host||E.length>1)&&("."===A||".."===A)||""===A,C=0,R=E.length;R>=0;R--)A=E[R],"."===A?E.splice(R,1):".."===A?(E.splice(R,1),C++):C&&(E.splice(R,1),C--);if(!x&&!b)for(;C--;C)E.unshift("..");!x||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),S&&"/"!==E.join("/").substr(-1)&&E.push("");var I=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(T){r.hostname=I?"":E.length?E.shift():"",r.host=r.hostname;w=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");w&&(r.auth=w.shift(),r.hostname=w.shift(),r.host=r.hostname)}return x=x||r.host&&E.length,x&&!I&&E.unshift(""),E.length>0?r.pathname=E.join("/"):(r.pathname=null,r.path=null),null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var t=this.host,e=o.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)},e.qg=x,e.hd=E,e.GP=b},5130:function(t,e,r){"use strict";r.d(e,{Ef:function(){return V}});r(4114),r(8111),r(2489),r(7588),r(1701),r(3579),r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698);var n=r(6768),i=r(4232);r(144);
/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let s;const o="undefined"!==typeof window&&window.trustedTypes;if(o)try{s=o.createPolicy("vue",{createHTML:t=>t})}catch(q){}const a=s?t=>s.createHTML(t):t=>t,l="http://www.w3.org/2000/svg",h="http://www.w3.org/1998/Math/MathML",u="undefined"!==typeof document?document:null,c=u&&u.createElement("template"),d={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const i="svg"===e?u.createElementNS(l,t):"mathml"===e?u.createElementNS(h,t):r?u.createElement(t,{is:r}):u.createElement(t);return"select"===t&&n&&null!=n.multiple&&i.setAttribute("multiple",n.multiple),i},createText:t=>u.createTextNode(t),createComment:t=>u.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>u.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,i,s){const o=r?r.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling)){while(1)if(e.insertBefore(i.cloneNode(!0),r),i===s||!(i=i.nextSibling))break}else{c.innerHTML=a("svg"===n?`<svg>${t}</svg>`:"mathml"===n?`<math>${t}</math>`:t);const i=c.content;if("svg"===n||"mathml"===n){const t=i.firstChild;while(t.firstChild)i.appendChild(t.firstChild);i.removeChild(t)}e.insertBefore(i,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},f=Symbol("_vtc"),p={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};n.QP;function m(t,e,r){const n=t[f];n&&(e=(e?[e,...n]:[...n]).join(" ")),null==e?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const g=Symbol("_vod"),y=Symbol("_vsh");const v=Symbol("");const _=/(^|;)\s*display\s*:/;function x(t,e,r){const n=t.style,s=(0,i.Kg)(r);let o=!1;if(r&&!s){if(e)if((0,i.Kg)(e))for(const t of e.split(";")){const e=t.slice(0,t.indexOf(":")).trim();null==r[e]&&E(n,e,"")}else for(const t in e)null==r[t]&&E(n,t,"");for(const t in r)"display"===t&&(o=!0),E(n,t,r[t])}else if(s){if(e!==r){const t=n[v];t&&(r+=";"+t),n.cssText=r,o=_.test(r)}}else e&&t.removeAttribute("style");g in t&&(t[g]=o?n.display:"",t[y]&&(n.display="none"))}const b=/\s*!important$/;function E(t,e,r){if((0,i.cy)(r))r.forEach(r=>E(t,e,r));else if(null==r&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=A(t,e);b.test(r)?t.setProperty((0,i.Tg)(n),r.replace(b,""),"important"):t[n]=r}}const T=["Webkit","Moz","ms"],w={};function A(t,e){const r=w[e];if(r)return r;let n=(0,i.PT)(e);if("filter"!==n&&n in t)return w[e]=n;n=(0,i.ZH)(n);for(let i=0;i<T.length;i++){const r=T[i]+n;if(r in t)return w[e]=r}return e}const S="http://www.w3.org/1999/xlink";function C(t,e,r,n,s,o=(0,i.J$)(e)){n&&e.startsWith("xlink:")?null==r?t.removeAttributeNS(S,e.slice(6,e.length)):t.setAttributeNS(S,e,r):null==r||o&&!(0,i.Y2)(r)?t.removeAttribute(e):t.setAttribute(e,o?"":(0,i.Bm)(r)?String(r):r)}function R(t,e,r,n,s){if("innerHTML"===e||"textContent"===e)return void(null!=r&&(t[e]="innerHTML"===e?a(r):r));const o=t.tagName;if("value"===e&&"PROGRESS"!==o&&!o.includes("-")){const n="OPTION"===o?t.getAttribute("value")||"":t.value,i=null==r?"checkbox"===t.type?"on":"":String(r);return n===i&&"_value"in t||(t.value=i),null==r&&t.removeAttribute(e),void(t._value=r)}let l=!1;if(""===r||null==r){const n=typeof t[e];"boolean"===n?r=(0,i.Y2)(r):null==r&&"string"===n?(r="",l=!0):"number"===n&&(r=0,l=!0)}try{t[e]=r}catch(q){0}l&&t.removeAttribute(s||e)}function I(t,e,r,n){t.addEventListener(e,r,n)}function P(t,e,r,n){t.removeEventListener(e,r,n)}const M=Symbol("_vei");function O(t,e,r,n,i=null){const s=t[M]||(t[M]={}),o=s[e];if(n&&o)o.value=n;else{const[r,a]=F(e);if(n){const o=s[e]=k(n,i);I(t,r,o,a)}else o&&(P(t,r,o,a),s[e]=void 0)}}const D=/(?:Once|Passive|Capture)$/;function F(t){let e;if(D.test(t)){let r;e={};while(r=t.match(D))t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}const r=":"===t[2]?t.slice(3):(0,i.Tg)(t.slice(2));return[r,e]}let B=0;const N=Promise.resolve(),L=()=>B||(N.then(()=>B=0),B=Date.now());function k(t,e){const r=t=>{if(t._vts){if(t._vts<=r.attached)return}else t._vts=Date.now();(0,n.qL)(U(t,r.value),e,5,[t])};return r.value=t,r.attached=L(),r}function U(t,e){if((0,i.cy)(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(t=>e=>!e._stopped&&t&&t(e))}return e}const G=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,j=(t,e,r,n,s,o)=>{const a="svg"===s;"class"===e?m(t,n,a):"style"===e?x(t,r,n):(0,i.Mp)(e)?(0,i.CP)(e)||O(t,e,r,n,o):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):z(t,e,n,a))?(R(t,e,n),t.tagName.includes("-")||"value"!==e&&"checked"!==e&&"selected"!==e||C(t,e,n,a,o,"value"!==e)):!t._isVueCE||!/[A-Z]/.test(e)&&(0,i.Kg)(n)?("true-value"===e?t._trueValue=n:"false-value"===e&&(t._falseValue=n),C(t,e,n,a)):R(t,(0,i.PT)(e),n,o,e)};function z(t,e,r,n){if(n)return"innerHTML"===e||"textContent"===e||!!(e in t&&G(e)&&(0,i.Tn)(r));if("spellcheck"===e||"draggable"===e||"translate"===e||"autocorrect"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if("width"===e||"height"===e){const e=t.tagName;if("IMG"===e||"VIDEO"===e||"CANVAS"===e||"SOURCE"===e)return!1}return(!G(e)||!(0,i.Kg)(r))&&e in t}
/*! #__NO_SIDE_EFFECTS__ */
"undefined"!==typeof HTMLElement&&HTMLElement;Symbol("_moveCb"),Symbol("_enterCb");Symbol("_assign");const H=(0,i.X$)({patchProp:j},d);let W;function X(){return W||(W=(0,n.K9)(H))}const V=(...t)=>{const e=X().createApp(...t);const{mount:r}=e;return e.mount=t=>{const n=Y(t);if(!n)return;const s=e._component;(0,i.Tn)(s)||s.render||s.template||(s.template=n.innerHTML),1===n.nodeType&&(n.textContent="");const o=r(n,!1,$(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function $(t){return t instanceof SVGElement?"svg":"function"===typeof MathMLElement&&t instanceof MathMLElement?"mathml":void 0}function Y(t){if((0,i.Kg)(t)){const e=document.querySelector(t);return e}return t}},5170:function(t,e,r){"use strict";var n=r(6706),i=r(4402);t.exports=n(i.proto,"size","get")||function(t){return t.size}},5196:function(t){"use strict";t.exports="undefined"!==typeof Reflect&&Reflect&&Reflect.apply},5302:function(t){"use strict";t.exports=Number.isNaN||function(t){return t!==t}},5395:function(t,e,r){"use strict";var n=r(6210),i=r(6748),s=r(5767);t.exports={formats:s,parse:i,stringify:n}},5397:function(t,e,r){"use strict";var n=r(7055),i=r(7750);t.exports=function(t){return n(i(t))}},5429:function(t,e,r){"use strict";r.d(e,{e:function(){return u},H:function(){return h}});var n=r(3818);const i={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},s=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");function o(t){const e=i[t],r=e.length;let n=s,o="";const a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let l;for(let i=0;i<t;i++){let n=a.replace("%index%",i.toString());l=i,i>=r&&(l=t-i-1),n=n.replace("%value%",e[l].toString()),o+=n,o+="\n"}return n=n.replace("%blur%",o),n=n.replace("%size%",t.toString()),n}const a="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }";function l(t,e){const r=Math.ceil(t/2);let n,i=a,s="";n=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let t=n.replace("%index%",o.toString());t=t.replace("%sampleIndex%",o-(r-1)+".0"),s+=t,s+="\n"}return i=i.replace("%blur%",s),i=i.replace("%size%",t.toString()),i}class h extends n.dJ{constructor(t,e=8,r=4,i=n.dJ.defaultResolution,s=5){const a=l(s,t),h=o(s);super(a,h),this.horizontal=t,this.resolution=i,this._quality=0,this.quality=r,this.blur=e}apply(t,e,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/e.width):this.uniforms.strength=1/r.height*(r.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,i);else{const s=t.getFilterTexture(),o=t.renderer;let a=e,l=s;this.state.blend=!1,t.applyFilter(this,a,l,n.fr.CLEAR);for(let e=1;e<this.passes-1;e++){t.bindAndClear(a,n.fr.BLIT),this.uniforms.uSampler=l;const e=l;l=a,a=e,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,r,i),t.returnFilterTexture(s)}}get blur(){return this.strength}set blur(t){this.padding=1+2*Math.abs(t),this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class u extends n.dJ{constructor(t=8,e=4,r=n.dJ.defaultResolution,i=5){super(),this.blurXFilter=new h(!0,t,e,r,i),this.blurYFilter=new h(!1,t,e,r,i),this.resolution=r,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,r,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const s=t.getFilterTexture();this.blurXFilter.apply(t,e,s,n.fr.CLEAR),this.blurYFilter.apply(t,s,r,i),t.returnFilterTexture(s)}else o?this.blurYFilter.apply(t,e,r,i):this.blurXFilter.apply(t,e,r,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}},5610:function(t,e,r){"use strict";var n=r(1291),i=Math.max,s=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):s(r,e)}},5619:function(t){"use strict";t.exports=RangeError},5631:function(t,e,r){"use strict";var n=r(3682),i=r(9340),s=r(2531),o=r(4261);t.exports=function(t){if(t.length<1||"function"!==typeof t[0])throw new i("a function is required");return o(n,s,t)}},5745:function(t,e,r){"use strict";var n=r(7629);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},5767:function(t){"use strict";var e=String.prototype.replace,r=/%20/g,n={RFC1738:"RFC1738",RFC3986:"RFC3986"};t.exports={default:n.RFC3986,formatters:{RFC1738:function(t){return e.call(t,r,"+")},RFC3986:function(t){return String(t)}},RFC1738:n.RFC1738,RFC3986:n.RFC3986}},5854:function(t,e,r){"use strict";var n=r(2777),i=TypeError;t.exports=function(t){var e=n(t,"number");if("number"==typeof e)throw new i("Can't convert number to bigint");return BigInt(e)}},5876:function(t,e,r){"use strict";var n=r(6518),i=r(3838),s=r(4916),o=!s("isSubsetOf",function(t){return t});n({target:"Set",proto:!0,real:!0,forced:o},{isSubsetOf:i})},5917:function(t,e,r){"use strict";var n=r(3724),i=r(9039),s=r(4055);t.exports=!n&&!i(function(){return 7!==Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},5966:function(t,e,r){"use strict";var n=r(9306),i=r(4117);t.exports=function(t,e){var r=t[e];return i(r)?void 0:n(r)}},6080:function(t,e,r){"use strict";var n=r(7476),i=r(9306),s=r(616),o=n(n.bind);t.exports=function(t,e){return i(t),void 0===e?t:s?o(t,e):function(){return t.apply(e,arguments)}}},6119:function(t,e,r){"use strict";var n=r(5745),i=r(3392),s=n("keys");t.exports=function(t){return s[t]||(s[t]=i(t))}},6147:function(t){"use strict";t.exports="undefined"!==typeof Reflect&&Reflect.getPrototypeOf||null},6193:function(t,e,r){"use strict";var n=r(9504),i=Error,s=n("".replace),o=function(t){return String(new i(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,l=a.test(o);t.exports=function(t,e){if(l&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=s(t,a,"");return t}},6198:function(t,e,r){"use strict";var n=r(8014);t.exports=function(t){return n(t.length)}},6210:function(t,e,r){"use strict";r(4114),r(8111),r(2489);var n=r(9511),i=r(2958),s=r(5767),o=Object.prototype.hasOwnProperty,a={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},l=Array.isArray,h=Array.prototype.push,u=function(t,e){h.apply(t,l(e)?e:[e])},c=Date.prototype.toISOString,d=s["default"],f={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:i.encode,encodeValuesOnly:!1,filter:void 0,format:d,formatter:s.formatters[d],indices:!1,serializeDate:function(t){return c.call(t)},skipNulls:!1,strictNullHandling:!1},p=function(t){return"string"===typeof t||"number"===typeof t||"boolean"===typeof t||"symbol"===typeof t||"bigint"===typeof t},m={},g=function t(e,r,s,o,a,h,c,d,g,y,v,_,x,b,E,T,w,A){var S=e,C=A,R=0,I=!1;while(void 0!==(C=C.get(m))&&!I){var P=C.get(e);if(R+=1,"undefined"!==typeof P){if(P===R)throw new RangeError("Cyclic object value");I=!0}"undefined"===typeof C.get(m)&&(R=0)}if("function"===typeof y?S=y(r,S):S instanceof Date?S=x(S):"comma"===s&&l(S)&&(S=i.maybeMap(S,function(t){return t instanceof Date?x(t):t})),null===S){if(h)return g&&!T?g(r,f.encoder,w,"key",b):r;S=""}if(p(S)||i.isBuffer(S)){if(g){var M=T?r:g(r,f.encoder,w,"key",b);return[E(M)+"="+E(g(S,f.encoder,w,"value",b))]}return[E(r)+"="+E(String(S))]}var O,D=[];if("undefined"===typeof S)return D;if("comma"===s&&l(S))T&&g&&(S=i.maybeMap(S,g)),O=[{value:S.length>0?S.join(",")||null:void 0}];else if(l(y))O=y;else{var F=Object.keys(S);O=v?F.sort(v):F}var B=d?String(r).replace(/\./g,"%2E"):String(r),N=o&&l(S)&&1===S.length?B+"[]":B;if(a&&l(S)&&0===S.length)return N+"[]";for(var L=0;L<O.length;++L){var k=O[L],U="object"===typeof k&&k&&"undefined"!==typeof k.value?k.value:S[k];if(!c||null!==U){var G=_&&d?String(k).replace(/\./g,"%2E"):String(k),j=l(S)?"function"===typeof s?s(N,G):N:N+(_?"."+G:"["+G+"]");A.set(e,R);var z=n();z.set(m,A),u(D,t(U,j,s,o,a,h,c,d,"comma"===s&&T&&l(S)?null:g,y,v,_,x,b,E,T,w,z))}}return D},y=function(t){if(!t)return f;if("undefined"!==typeof t.allowEmptyArrays&&"boolean"!==typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof t.encodeDotInKeys&&"boolean"!==typeof t.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.encoder&&"undefined"!==typeof t.encoder&&"function"!==typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||f.charset;if("undefined"!==typeof t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=s["default"];if("undefined"!==typeof t.format){if(!o.call(s.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n,i=s.formatters[r],h=f.filter;if(("function"===typeof t.filter||l(t.filter))&&(h=t.filter),n=t.arrayFormat in a?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":f.arrayFormat,"commaRoundTrip"in t&&"boolean"!==typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u="undefined"===typeof t.allowDots?!0===t.encodeDotInKeys||f.allowDots:!!t.allowDots;return{addQueryPrefix:"boolean"===typeof t.addQueryPrefix?t.addQueryPrefix:f.addQueryPrefix,allowDots:u,allowEmptyArrays:"boolean"===typeof t.allowEmptyArrays?!!t.allowEmptyArrays:f.allowEmptyArrays,arrayFormat:n,charset:e,charsetSentinel:"boolean"===typeof t.charsetSentinel?t.charsetSentinel:f.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:"undefined"===typeof t.delimiter?f.delimiter:t.delimiter,encode:"boolean"===typeof t.encode?t.encode:f.encode,encodeDotInKeys:"boolean"===typeof t.encodeDotInKeys?t.encodeDotInKeys:f.encodeDotInKeys,encoder:"function"===typeof t.encoder?t.encoder:f.encoder,encodeValuesOnly:"boolean"===typeof t.encodeValuesOnly?t.encodeValuesOnly:f.encodeValuesOnly,filter:h,format:r,formatter:i,serializeDate:"function"===typeof t.serializeDate?t.serializeDate:f.serializeDate,skipNulls:"boolean"===typeof t.skipNulls?t.skipNulls:f.skipNulls,sort:"function"===typeof t.sort?t.sort:null,strictNullHandling:"boolean"===typeof t.strictNullHandling?t.strictNullHandling:f.strictNullHandling}};t.exports=function(t,e){var r,i,s=t,o=y(e);"function"===typeof o.filter?(i=o.filter,s=i("",s)):l(o.filter)&&(i=o.filter,r=i);var h=[];if("object"!==typeof s||null===s)return"";var c=a[o.arrayFormat],d="comma"===c&&o.commaRoundTrip;r||(r=Object.keys(s)),o.sort&&r.sort(o.sort);for(var f=n(),p=0;p<r.length;++p){var m=r[p],v=s[m];o.skipNulls&&null===v||u(h,g(v,m,c,d,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,f))}var _=h.join(o.delimiter),x=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),_.length>0?x+_:""}},6269:function(t){"use strict";t.exports={}},6279:function(t,e,r){"use strict";var n=r(6840);t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},6319:function(t,e,r){"use strict";var n=r(8551),i=r(9539);t.exports=function(t,e,r,s){try{return s?e(n(r)[0],r[1]):e(r)}catch(o){i(t,"throw",o)}}},6395:function(t){"use strict";t.exports=!1},6417:function(t,e,r){"use strict";var n=r(2509);t.exports=n.getPrototypeOf||null},6518:function(t,e,r){"use strict";var n=r(4576),i=r(7347).f,s=r(6699),o=r(6840),a=r(9433),l=r(7740),h=r(2796);t.exports=function(t,e){var r,u,c,d,f,p,m=t.target,g=t.global,y=t.stat;if(u=g?n:y?n[m]||a(m,{}):n[m]&&n[m].prototype,u)for(c in e){if(f=e[c],t.dontCallGetSet?(p=i(u,c),d=p&&p.value):d=u[c],r=h(g?c:m+(y?".":"#")+c,t.forced),!r&&void 0!==d){if(typeof f==typeof d)continue;l(f,d)}(t.sham||d&&d.sham)&&s(f,"sham",!0),o(u,c,f,t)}}},6529:function(t,e,r){var n;t=r.nmd(t),r(4114),function(){e&&e.nodeType,t&&t.nodeType;var i="object"==typeof r.g&&r.g;i.global!==i&&i.window!==i&&i.self;var s,o=2147483647,a=36,l=1,h=26,u=38,c=700,d=72,f=128,p="-",m=/^xn--/,g=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=a-l,x=Math.floor,b=String.fromCharCode;function E(t){throw new RangeError(v[t])}function T(t,e){var r=t.length,n=[];while(r--)n[r]=e(t[r]);return n}function w(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(y,".");var i=t.split("."),s=T(i,e).join(".");return n+s}function A(t){var e,r,n=[],i=0,s=t.length;while(i<s)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<s?(r=t.charCodeAt(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function S(t){return T(t,function(t){var e="";return t>65535&&(t-=65536,e+=b(t>>>10&1023|55296),t=56320|1023&t),e+=b(t),e}).join("")}function C(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:a}function R(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function I(t,e,r){var n=0;for(t=r?x(t/c):t>>1,t+=x(t/e);t>_*h>>1;n+=a)t=x(t/_);return x(n+(_+1)*t/(t+u))}function P(t){var e,r,n,i,s,u,c,m,g,y,v=[],_=t.length,b=0,T=f,w=d;for(r=t.lastIndexOf(p),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&E("not-basic"),v.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<_;){for(s=b,u=1,c=a;;c+=a){if(i>=_&&E("invalid-input"),m=C(t.charCodeAt(i++)),(m>=a||m>x((o-b)/u))&&E("overflow"),b+=m*u,g=c<=w?l:c>=w+h?h:c-w,m<g)break;y=a-g,u>x(o/y)&&E("overflow"),u*=y}e=v.length+1,w=I(b-s,e,0==s),x(b/e)>o-T&&E("overflow"),T+=x(b/e),b%=e,v.splice(b++,0,T)}return S(v)}function M(t){var e,r,n,i,s,u,c,m,g,y,v,_,T,w,S,C=[];for(t=A(t),_=t.length,e=f,r=0,s=d,u=0;u<_;++u)v=t[u],v<128&&C.push(b(v));n=i=C.length,i&&C.push(p);while(n<_){for(c=o,u=0;u<_;++u)v=t[u],v>=e&&v<c&&(c=v);for(T=n+1,c-e>x((o-r)/T)&&E("overflow"),r+=(c-e)*T,e=c,u=0;u<_;++u)if(v=t[u],v<e&&++r>o&&E("overflow"),v==e){for(m=r,g=a;;g+=a){if(y=g<=s?l:g>=s+h?h:g-s,m<y)break;S=m-y,w=a-y,C.push(b(R(y+S%w,0))),m=x(S/w)}C.push(b(R(m,0))),s=I(r,T,n==i),r=0,++n}++r,++e}return C.join("")}function O(t){return w(t,function(t){return m.test(t)?P(t.slice(4).toLowerCase()):t})}function D(t){return w(t,function(t){return g.test(t)?"xn--"+M(t):t})}s={version:"1.4.1",ucs2:{decode:A,encode:S},decode:P,encode:M,toASCII:D,toUnicode:O},n=function(){return s}.call(e,r,e,t),void 0===n||(t.exports=n)}()},6583:function(t,e,r){"use strict";function n(t,e,r){r=r||2;var n,s,a,l,h,u,d,f=e&&e.length,p=f?e[0]*r:t.length,m=i(t,0,p,r,!0),g=[];if(!m||m.next===m.prev)return g;if(f&&(m=c(t,e,m,r)),t.length>80*r){n=a=t[0],s=l=t[1];for(var y=r;y<p;y+=r)h=t[y],u=t[y+1],h<n&&(n=h),u<s&&(s=u),h>a&&(a=h),u>l&&(l=u);d=Math.max(a-n,l-s),d=0!==d?32767/d:0}return o(m,g,r,n,s,d,0),g}function i(t,e,r,n,i){var s,o;if(i===F(t,e,r,n)>0)for(s=e;s<r;s+=n)o=M(s,t[s],t[s+1],o);else for(s=r-n;s>=e;s-=n)o=M(s,t[s],t[s+1],o);return o&&T(o,o.next)&&(O(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!T(n,n.next)&&0!==E(n.prev,n,n.next))n=n.next;else{if(O(n),n=e=n.prev,n===n.next)break;r=!0}}while(r||n!==e);return e}function o(t,e,r,n,i,c,d){if(t){!d&&c&&g(t,n,i,c);var f,p,m=t;while(t.prev!==t.next)if(f=t.prev,p=t.next,c?l(t,n,i,c):a(t))e.push(f.i/r|0),e.push(t.i/r|0),e.push(p.i/r|0),O(t),t=p.next,m=p.next;else if(t=p,t===m){d?1===d?(t=h(s(t),e,r),o(t,e,r,n,i,c,2)):2===d&&u(t,e,r,n,i,c):o(s(t),e,r,n,i,c,1);break}}}function a(t){var e=t.prev,r=t,n=t.next;if(E(e,r,n)>=0)return!1;var i=e.x,s=r.x,o=n.x,a=e.y,l=r.y,h=n.y,u=i<s?i<o?i:o:s<o?s:o,c=a<l?a<h?a:h:l<h?l:h,d=i>s?i>o?i:o:s>o?s:o,f=a>l?a>h?a:h:l>h?l:h,p=n.next;while(p!==e){if(p.x>=u&&p.x<=d&&p.y>=c&&p.y<=f&&x(i,a,s,l,o,h,p.x,p.y)&&E(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function l(t,e,r,n){var i=t.prev,s=t,o=t.next;if(E(i,s,o)>=0)return!1;var a=i.x,l=s.x,h=o.x,u=i.y,c=s.y,d=o.y,f=a<l?a<h?a:h:l<h?l:h,p=u<c?u<d?u:d:c<d?c:d,m=a>l?a>h?a:h:l>h?l:h,g=u>c?u>d?u:d:c>d?c:d,y=v(f,p,e,r,n),_=v(m,g,e,r,n),b=t.prevZ,T=t.nextZ;while(b&&b.z>=y&&T&&T.z<=_){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==o&&x(a,u,l,c,h,d,b.x,b.y)&&E(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,T.x>=f&&T.x<=m&&T.y>=p&&T.y<=g&&T!==i&&T!==o&&x(a,u,l,c,h,d,T.x,T.y)&&E(T.prev,T,T.next)>=0)return!1;T=T.nextZ}while(b&&b.z>=y){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==o&&x(a,u,l,c,h,d,b.x,b.y)&&E(b.prev,b,b.next)>=0)return!1;b=b.prevZ}while(T&&T.z<=_){if(T.x>=f&&T.x<=m&&T.y>=p&&T.y<=g&&T!==i&&T!==o&&x(a,u,l,c,h,d,T.x,T.y)&&E(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function h(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!T(i,o)&&w(i,n,n.next,o)&&R(i,o)&&R(o,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(o.i/r|0),O(n),O(n.next),n=t=o),n=n.next}while(n!==t);return s(n)}function u(t,e,r,n,i,a){var l=t;do{var h=l.next.next;while(h!==l.prev){if(l.i!==h.i&&b(l,h)){var u=P(l,h);return l=s(l,l.next),u=s(u,u.next),o(l,e,r,n,i,a,0),void o(u,e,r,n,i,a,0)}h=h.next}l=l.next}while(l!==t)}function c(t,e,r,n){var s,o,a,l,h,u=[];for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:t.length,h=i(t,a,l,n,!1),h===h.next&&(h.steiner=!0),u.push(_(h));for(u.sort(d),s=0;s<u.length;s++)r=f(u[s],r);return r}function d(t,e){return t.x-e.x}function f(t,e){var r=p(t,e);if(!r)return e;var n=P(r,t);return s(n,n.next),s(r,r.next)}function p(t,e){var r,n=e,i=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>o&&(o=a,r=n.x<n.next.x?n:n.next,a===i))return r}n=n.next}while(n!==e);if(!r)return null;var l,h=r,u=r.x,c=r.y,d=1/0;n=r;do{i>=n.x&&n.x>=u&&i!==n.x&&x(s<c?i:o,s,u,c,s<c?o:i,s,n.x,n.y)&&(l=Math.abs(s-n.y)/(i-n.x),R(n,t)&&(l<d||l===d&&(n.x>r.x||n.x===r.x&&m(r,n)))&&(r=n,d=l)),n=n.next}while(n!==h);return r}function m(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}function g(t,e,r,n){var i=t;do{0===i.z&&(i.z=v(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,y(i)}function y(t){var e,r,n,i,s,o,a,l,h=1;do{r=t,t=null,s=null,o=0;while(r){for(o++,n=r,a=0,e=0;e<h;e++)if(a++,n=n.nextZ,!n)break;l=h;while(a>0||l>0&&n)0!==a&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=n}s.nextZ=null,h*=2}while(o>1);return t}function v(t,e,r,n,i){return t=(t-r)*i|0,e=(e-n)*i|0,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function _(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function x(t,e,r,n,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(n-a)>=(r-o)*(e-a)&&(r-o)*(s-a)>=(i-o)*(n-a)}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!C(t,e)&&(R(t,e)&&R(e,t)&&I(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||T(t,e)&&E(t.prev,t,t.next)>0&&E(e.prev,e,e.next)>0)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function T(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,r,n){var i=S(E(t,e,r)),s=S(E(t,e,n)),o=S(E(r,n,t)),a=S(E(r,n,e));return i!==s&&o!==a||(!(0!==i||!A(t,r,e))||(!(0!==s||!A(t,n,e))||(!(0!==o||!A(r,t,n))||!(0!==a||!A(r,e,n)))))}function A(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function S(t){return t>0?1:t<0?-1:0}function C(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&w(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function R(t,e){return E(t.prev,t,t.next)<0?E(t,e,t.next)>=0&&E(t,t.prev,e)>=0:E(t,e,t.prev)<0||E(t,t.next,e)<0}function I(t,e){var r=t,n=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do{r.y>s!==r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}function P(t,e){var r=new D(t.i,t.x,t.y),n=new D(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function M(t,e,r,n){var i=new D(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function O(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function D(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F(t,e,r,n){for(var i=0,s=e,o=r-n;s<r;s+=n)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}r(4114),t.exports=n,t.exports["default"]=n,n.deviation=function(t,e,r,n){var i=e&&e.length,s=i?e[0]*r:t.length,o=Math.abs(F(t,0,s,r));if(i)for(var a=0,l=e.length;a<l;a++){var h=e[a]*r,u=a<l-1?e[a+1]*r:t.length;o-=Math.abs(F(t,h,u,r))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*r,f=n[a+1]*r,p=n[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},n.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[i][s][o]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}},6699:function(t,e,r){"use strict";var n=r(3724),i=r(4913),s=r(6980);t.exports=n?function(t,e,r){return i.f(t,e,s(1,r))}:function(t,e,r){return t[e]=r,t}},6706:function(t,e,r){"use strict";var n=r(9504),i=r(9306);t.exports=function(t,e,r){try{return n(i(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(s){}}},6748:function(t,e,r){"use strict";r(4114);var n=r(2958),i=Object.prototype.hasOwnProperty,s=Array.isArray,o={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},a=function(t){return t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},l=function(t,e,r){if(t&&"string"===typeof t&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(1===e.arrayLimit?"":"s")+" allowed in an array.");return t},h="utf8=%26%2310003%3B",u="utf8=%E2%9C%93",c=function(t,e){var r={__proto__:null},c=e.ignoreQueryPrefix?t.replace(/^\?/,""):t;c=c.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var d=e.parameterLimit===1/0?void 0:e.parameterLimit,f=c.split(e.delimiter,e.throwOnLimitExceeded?d+1:d);if(e.throwOnLimitExceeded&&f.length>d)throw new RangeError("Parameter limit exceeded. Only "+d+" parameter"+(1===d?"":"s")+" allowed.");var p,m=-1,g=e.charset;if(e.charsetSentinel)for(p=0;p<f.length;++p)0===f[p].indexOf("utf8=")&&(f[p]===u?g="utf-8":f[p]===h&&(g="iso-8859-1"),m=p,p=f.length);for(p=0;p<f.length;++p)if(p!==m){var y,v,_=f[p],x=_.indexOf("]="),b=-1===x?_.indexOf("="):x+1;-1===b?(y=e.decoder(_,o.decoder,g,"key"),v=e.strictNullHandling?null:""):(y=e.decoder(_.slice(0,b),o.decoder,g,"key"),v=n.maybeMap(l(_.slice(b+1),e,s(r[y])?r[y].length:0),function(t){return e.decoder(t,o.decoder,g,"value")})),v&&e.interpretNumericEntities&&"iso-8859-1"===g&&(v=a(String(v))),_.indexOf("[]=")>-1&&(v=s(v)?[v]:v);var E=i.call(r,y);E&&"combine"===e.duplicates?r[y]=n.combine(r[y],v):E&&"last"!==e.duplicates||(r[y]=v)}return r},d=function(t,e,r,i){var s=0;if(t.length>0&&"[]"===t[t.length-1]){var o=t.slice(0,-1).join("");s=Array.isArray(e)&&e[o]?e[o].length:0}for(var a=i?e:l(e,r,s),h=t.length-1;h>=0;--h){var u,c=t[h];if("[]"===c&&r.parseArrays)u=r.allowEmptyArrays&&(""===a||r.strictNullHandling&&null===a)?[]:n.combine([],a);else{u=r.plainObjects?{__proto__:null}:{};var d="["===c.charAt(0)&&"]"===c.charAt(c.length-1)?c.slice(1,-1):c,f=r.decodeDotInKeys?d.replace(/%2E/g,"."):d,p=parseInt(f,10);r.parseArrays||""!==f?!isNaN(p)&&c!==f&&String(p)===f&&p>=0&&r.parseArrays&&p<=r.arrayLimit?(u=[],u[p]=a):"__proto__"!==f&&(u[f]=a):u={0:a}}a=u}return a},f=function(t,e,r,n){if(t){var s=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=r.depth>0&&o.exec(s),h=l?s.slice(0,l.index):s,u=[];if(h){if(!r.plainObjects&&i.call(Object.prototype,h)&&!r.allowPrototypes)return;u.push(h)}var c=0;while(r.depth>0&&null!==(l=a.exec(s))&&c<r.depth){if(c+=1,!r.plainObjects&&i.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(l[1])}if(l){if(!0===r.strictDepth)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");u.push("["+s.slice(l.index)+"]")}return d(u,e,r,n)}},p=function(t){if(!t)return o;if("undefined"!==typeof t.allowEmptyArrays&&"boolean"!==typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof t.decodeDotInKeys&&"boolean"!==typeof t.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.decoder&&"undefined"!==typeof t.decoder&&"function"!==typeof t.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if("undefined"!==typeof t.throwOnLimitExceeded&&"boolean"!==typeof t.throwOnLimitExceeded)throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var e="undefined"===typeof t.charset?o.charset:t.charset,r="undefined"===typeof t.duplicates?o.duplicates:t.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw new TypeError("The duplicates option must be either combine, first, or last");var i="undefined"===typeof t.allowDots?!0===t.decodeDotInKeys||o.allowDots:!!t.allowDots;return{allowDots:i,allowEmptyArrays:"boolean"===typeof t.allowEmptyArrays?!!t.allowEmptyArrays:o.allowEmptyArrays,allowPrototypes:"boolean"===typeof t.allowPrototypes?t.allowPrototypes:o.allowPrototypes,allowSparse:"boolean"===typeof t.allowSparse?t.allowSparse:o.allowSparse,arrayLimit:"number"===typeof t.arrayLimit?t.arrayLimit:o.arrayLimit,charset:e,charsetSentinel:"boolean"===typeof t.charsetSentinel?t.charsetSentinel:o.charsetSentinel,comma:"boolean"===typeof t.comma?t.comma:o.comma,decodeDotInKeys:"boolean"===typeof t.decodeDotInKeys?t.decodeDotInKeys:o.decodeDotInKeys,decoder:"function"===typeof t.decoder?t.decoder:o.decoder,delimiter:"string"===typeof t.delimiter||n.isRegExp(t.delimiter)?t.delimiter:o.delimiter,depth:"number"===typeof t.depth||!1===t.depth?+t.depth:o.depth,duplicates:r,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof t.interpretNumericEntities?t.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"===typeof t.parameterLimit?t.parameterLimit:o.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"===typeof t.plainObjects?t.plainObjects:o.plainObjects,strictDepth:"boolean"===typeof t.strictDepth?!!t.strictDepth:o.strictDepth,strictNullHandling:"boolean"===typeof t.strictNullHandling?t.strictNullHandling:o.strictNullHandling,throwOnLimitExceeded:"boolean"===typeof t.throwOnLimitExceeded&&t.throwOnLimitExceeded}};t.exports=function(t,e){var r=p(e);if(""===t||null===t||"undefined"===typeof t)return r.plainObjects?{__proto__:null}:{};for(var i="string"===typeof t?c(t,r):t,s=r.plainObjects?{__proto__:null}:{},o=Object.keys(i),a=0;a<o.length;++a){var l=o[a],h=f(l,i[l],r,"string"===typeof t);s=n.merge(s,h,r)}return!0===r.allowSparse?s:n.compact(s)}},6768:function(t,e,r){"use strict";r.d(e,{$u:function(){return nt},CE:function(){return je},Df:function(){return G},FK:function(){return Pe},Gy:function(){return F},K9:function(){return ne},MZ:function(){return U},OW:function(){return k},QP:function(){return N},bF:function(){return $e},dY:function(){return g},nI:function(){return ar},qL:function(){return o},uX:function(){return Ne}});r(4114),r(8111),r(1148),r(2489),r(7588),r(1701),r(8237),r(3579),r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698);var n=r(144),i=r(4232);function s(t,e,r,n){try{return n?t(...n):t()}catch(i){a(i,e,r)}}function o(t,e,r,n){if((0,i.Tn)(t)){const o=s(t,e,r,n);return o&&(0,i.yL)(o)&&o.catch(t=>{a(t,e,r)}),o}if((0,i.cy)(t)){const i=[];for(let s=0;s<t.length;s++)i.push(o(t[s],e,r,n));return i}}function a(t,e,r,o=!0){const a=e?e.vnode:null,{errorHandler:h,throwUnhandledErrorInProduction:u}=e&&e.appContext.config||i.MZ;if(e){let i=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${r}`;while(i){const e=i.ec;if(e)for(let r=0;r<e.length;r++)if(!1===e[r](t,o,a))return;i=i.parent}if(h)return(0,n.C4)(),s(h,null,10,[t,o,a]),void(0,n.bl)()}l(t,r,a,o,u)}function l(t,e,r,n=!0,i=!1){if(i)throw t;console.error(t)}const h=[];let u=-1;const c=[];let d=null,f=0;const p=Promise.resolve();let m=null;function g(t){const e=m||p;return t?e.then(this?t.bind(this):t):e}function y(t){let e=u+1,r=h.length;while(e<r){const n=e+r>>>1,i=h[n],s=T(i);s<t||s===t&&2&i.flags?e=n+1:r=n}return e}function v(t){if(!(1&t.flags)){const e=T(t),r=h[h.length-1];!r||!(2&t.flags)&&e>=T(r)?h.push(t):h.splice(y(e),0,t),t.flags|=1,_()}}function _(){m||(m=p.then(w))}function x(t){(0,i.cy)(t)?c.push(...t):d&&-1===t.id?d.splice(f+1,0,t):1&t.flags||(c.push(t),t.flags|=1),_()}function b(t,e,r=u+1){for(0;r<h.length;r++){const e=h[r];if(e&&2&e.flags){if(t&&e.id!==t.uid)continue;0,h.splice(r,1),r--,4&e.flags&&(e.flags&=-2),e(),4&e.flags||(e.flags&=-2)}}}function E(t){if(c.length){const t=[...new Set(c)].sort((t,e)=>T(t)-T(e));if(c.length=0,d)return void d.push(...t);for(d=t,f=0;f<d.length;f++){const t=d[f];0,4&t.flags&&(t.flags&=-2),8&t.flags||t(),t.flags&=-2}d=null,f=0}}const T=t=>null==t.id?2&t.flags?-1:1/0:t.id;function w(t){i.tE;try{for(u=0;u<h.length;u++){const t=h[u];!t||8&t.flags||(4&t.flags&&(t.flags&=-2),s(t,t.i,t.i?15:14),4&t.flags||(t.flags&=-2))}}finally{for(;u<h.length;u++){const t=h[u];t&&(t.flags&=-2)}u=-1,h.length=0,E(t),m=null,(h.length||c.length)&&w(t)}}let A=null,S=null;function C(t){const e=A;return A=t,S=t&&t.type.__scopeId||null,e}function R(t,e=A,r){if(!e)return t;if(t._n)return t;const n=(...r)=>{n._d&&Ue(-1);const i=C(e);let s;try{s=t(...r)}finally{C(i),n._d&&Ue(1)}return s};return n._n=!0,n._c=!0,n._d=!0,n}function I(t,e,r,i){const s=t.dirs,a=e&&e.dirs;for(let l=0;l<s.length;l++){const h=s[l];a&&(h.oldValue=a[l].value);let u=h.dir[i];u&&((0,n.C4)(),o(u,r,8,[t.el,h,t,e]),(0,n.bl)())}}const P=Symbol("_vte"),M=t=>t.__isTeleport;const O=Symbol("_leaveCb"),D=Symbol("_enterCb");function F(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return et(()=>{t.isMounted=!0}),it(()=>{t.isUnmounting=!0}),t}const B=[Function,Array],N={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:B,onEnter:B,onAfterEnter:B,onEnterCancelled:B,onBeforeLeave:B,onLeave:B,onAfterLeave:B,onLeaveCancelled:B,onBeforeAppear:B,onAppear:B,onAfterAppear:B,onAppearCancelled:B};function L(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function k(t,e,r,n,s){const{appear:a,mode:l,persisted:h=!1,onBeforeEnter:u,onEnter:c,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:v,onAppear:_,onAfterAppear:x,onAppearCancelled:b}=e,E=String(t.key),T=L(r,t),w=(t,e)=>{t&&o(t,n,9,e)},A=(t,e)=>{const r=e[1];w(t,e),(0,i.cy)(t)?t.every(t=>t.length<=1)&&r():t.length<=1&&r()},S={mode:l,persisted:h,beforeEnter(e){let n=u;if(!r.isMounted){if(!a)return;n=v||u}e[O]&&e[O](!0);const i=T[E];i&&He(t,i)&&i.el[O]&&i.el[O](),w(n,[e])},enter(t){let e=c,n=d,i=f;if(!r.isMounted){if(!a)return;e=_||c,n=x||d,i=b||f}let s=!1;const o=t[D]=e=>{s||(s=!0,w(e?i:n,[t]),S.delayedLeave&&S.delayedLeave(),t[D]=void 0)};e?A(e,[t,o]):o()},leave(e,n){const i=String(t.key);if(e[D]&&e[D](!0),r.isUnmounting)return n();w(p,[e]);let s=!1;const o=e[O]=r=>{s||(s=!0,n(),w(r?y:g,[e]),e[O]=void 0,T[i]===t&&delete T[i])};T[i]=t,m?A(m,[e,o]):o()},clone(t){const i=k(t,e,r,n,s);return s&&s(i),i}};return S}function U(t,e){6&t.shapeFlag&&t.component?(t.transition=e,U(t.component.subTree,e)):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function G(t,e=!1,r){let n=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=null==r?o.key:String(r)+String(null!=o.key?o.key:s);o.type===Pe?(128&o.patchFlag&&i++,n=n.concat(G(o.children,e,a))):(e||o.type!==Oe)&&n.push(null!=a?Ke(o,{key:a}):o)}if(i>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}
/*! #__NO_SIDE_EFFECTS__ */function j(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function z(t,e,r,o,a=!1){if((0,i.cy)(t))return void t.forEach((t,n)=>z(t,e&&((0,i.cy)(e)?e[n]:e),r,o,a));if(H(o)&&!a)return void(512&o.shapeFlag&&o.type.__asyncResolved&&o.component.subTree.component&&z(t,e,r,o.component.subTree));const l=4&o.shapeFlag?Er(o.component):o.el,h=a?null:l,{i:u,r:c}=t;const d=e&&e.r,f=u.refs===i.MZ?u.refs={}:u.refs,p=u.setupState,m=(0,n.ux)(p),g=p===i.MZ?()=>!1:t=>(0,i.$3)(m,t);if(null!=d&&d!==c&&((0,i.Kg)(d)?(f[d]=null,g(d)&&(p[d]=null)):(0,n.i9)(d)&&(d.value=null)),(0,i.Tn)(c))s(c,u,12,[h,f]);else{const e=(0,i.Kg)(c),s=(0,n.i9)(c);if(e||s){const n=()=>{if(t.f){const r=e?g(c)?p[c]:f[c]:c.value;a?(0,i.cy)(r)&&(0,i.TF)(r,l):(0,i.cy)(r)?r.includes(l)||r.push(l):e?(f[c]=[l],g(c)&&(p[c]=f[c])):(c.value=[l],t.k&&(f[t.k]=c.value))}else e?(f[c]=h,g(c)&&(p[c]=h)):s&&(c.value=h,t.k&&(f[t.k]=h))};h?(n.id=-1,re(n,r)):n()}else 0}}(0,i.We)().requestIdleCallback,(0,i.We)().cancelIdleCallback;const H=t=>!!t.type.__asyncLoader;
/*! #__NO_SIDE_EFFECTS__ */const W=t=>t.type.__isKeepAlive;RegExp,RegExp;function X(t,e){return(0,i.cy)(t)?t.some(t=>X(t,e)):(0,i.Kg)(t)?t.split(",").includes(e):!!(0,i.gd)(t)&&(t.lastIndex=0,t.test(e))}function V(t,e){Y(t,"a",e)}function $(t,e){Y(t,"da",e)}function Y(t,e,r=or){const n=t.__wdc||(t.__wdc=()=>{let e=r;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(J(e,n,r),r){let t=r.parent;while(t&&t.parent)W(t.parent.vnode)&&q(n,e,r,t),t=t.parent}}function q(t,e,r,n){const s=J(e,t,n,!0);st(()=>{(0,i.TF)(n[e],s)},r)}function K(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Z(t){return 128&t.shapeFlag?t.ssContent:t}function J(t,e,r=or,i=!1){if(r){const s=r[t]||(r[t]=[]),a=e.__weh||(e.__weh=(...i)=>{(0,n.C4)();const s=ur(r),a=o(e,r,t,i);return s(),(0,n.bl)(),a});return i?s.unshift(a):s.push(a),a}}const Q=t=>(e,r=or)=>{mr&&"sp"!==t||J(t,(...t)=>e(...t),r)},tt=Q("bm"),et=Q("m"),rt=Q("bu"),nt=Q("u"),it=Q("bum"),st=Q("um"),ot=Q("sp"),at=Q("rtg"),lt=Q("rtc");function ht(t,e=or){J("ec",t,e)}const ut=Symbol.for("v-ndc");const ct=t=>t?dr(t)?Er(t):ct(t.parent):null,dt=(0,i.X$)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ct(t.parent),$root:t=>ct(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>bt(t),$forceUpdate:t=>t.f||(t.f=()=>{v(t.update)}),$nextTick:t=>t.n||(t.n=g.bind(t.proxy)),$watch:t=>ge.bind(t)}),ft=(t,e)=>t!==i.MZ&&!t.__isScriptSetup&&(0,i.$3)(t,e),pt={get({_:t},e){if("__v_skip"===e)return!0;const{ctx:r,setupState:s,data:o,props:a,accessCache:l,type:h,appContext:u}=t;let c;if("$"!==e[0]){const n=l[e];if(void 0!==n)switch(n){case 1:return s[e];case 2:return o[e];case 4:return r[e];case 3:return a[e]}else{if(ft(s,e))return l[e]=1,s[e];if(o!==i.MZ&&(0,i.$3)(o,e))return l[e]=2,o[e];if((c=t.propsOptions[0])&&(0,i.$3)(c,e))return l[e]=3,a[e];if(r!==i.MZ&&(0,i.$3)(r,e))return l[e]=4,r[e];gt&&(l[e]=0)}}const d=dt[e];let f,p;return d?("$attrs"===e&&(0,n.u4)(t.attrs,"get",""),d(t)):(f=h.__cssModules)&&(f=f[e])?f:r!==i.MZ&&(0,i.$3)(r,e)?(l[e]=4,r[e]):(p=u.config.globalProperties,(0,i.$3)(p,e)?p[e]:void 0)},set({_:t},e,r){const{data:n,setupState:s,ctx:o}=t;return ft(s,e)?(s[e]=r,!0):n!==i.MZ&&(0,i.$3)(n,e)?(n[e]=r,!0):!(0,i.$3)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=r,!0))},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:o}},a){let l;return!!r[a]||t!==i.MZ&&(0,i.$3)(t,a)||ft(e,a)||(l=o[0])&&(0,i.$3)(l,a)||(0,i.$3)(n,a)||(0,i.$3)(dt,a)||(0,i.$3)(s.config.globalProperties,a)},defineProperty(t,e,r){return null!=r.get?t._.accessCache[e]=0:(0,i.$3)(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function mt(t){return(0,i.cy)(t)?t.reduce((t,e)=>(t[e]=null,t),{}):t}let gt=!0;function yt(t){const e=bt(t),r=t.proxy,s=t.ctx;gt=!1,e.beforeCreate&&_t(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:l,watch:h,provide:u,inject:c,created:d,beforeMount:f,mounted:p,beforeUpdate:m,updated:g,activated:y,deactivated:v,beforeDestroy:_,beforeUnmount:x,destroyed:b,unmounted:E,render:T,renderTracked:w,renderTriggered:A,errorCaptured:S,serverPrefetch:C,expose:R,inheritAttrs:I,components:P,directives:M,filters:O}=e,D=null;if(c&&vt(c,s,D),l)for(const n in l){const t=l[n];(0,i.Tn)(t)&&(s[n]=t.bind(r))}if(o){0;const e=o.call(r,r);0,(0,i.Gv)(e)&&(t.data=(0,n.Kh)(e))}if(gt=!0,a)for(const n in a){const t=a[n],e=(0,i.Tn)(t)?t.bind(r,r):(0,i.Tn)(t.get)?t.get.bind(r,r):i.tE;0;const o=!(0,i.Tn)(t)&&(0,i.Tn)(t.set)?t.set.bind(r):i.tE,l=Ar({get:e,set:o});Object.defineProperty(s,n,{enumerable:!0,configurable:!0,get:()=>l.value,set:t=>l.value=t})}if(h)for(const n in h)xt(h[n],s,r,n);if(u){const t=(0,i.Tn)(u)?u.call(r):u;Reflect.ownKeys(t).forEach(e=>{Bt(e,t[e])})}function F(t,e){(0,i.cy)(e)?e.forEach(e=>t(e.bind(r))):e&&t(e.bind(r))}if(d&&_t(d,t,"c"),F(tt,f),F(et,p),F(rt,m),F(nt,g),F(V,y),F($,v),F(ht,S),F(lt,w),F(at,A),F(it,x),F(st,E),F(ot,C),(0,i.cy)(R))if(R.length){const e=t.exposed||(t.exposed={});R.forEach(t=>{Object.defineProperty(e,t,{get:()=>r[t],set:e=>r[t]=e})})}else t.exposed||(t.exposed={});T&&t.render===i.tE&&(t.render=T),null!=I&&(t.inheritAttrs=I),P&&(t.components=P),M&&(t.directives=M),C&&j(t)}function vt(t,e,r=i.tE){(0,i.cy)(t)&&(t=St(t));for(const s in t){const r=t[s];let o;o=(0,i.Gv)(r)?"default"in r?Nt(r.from||s,r.default,!0):Nt(r.from||s):Nt(r),(0,n.i9)(o)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[s]=o}}function _t(t,e,r){o((0,i.cy)(t)?t.map(t=>t.bind(e.proxy)):t.bind(e.proxy),e,r)}function xt(t,e,r,n){let s=n.includes(".")?ye(r,n):()=>r[n];if((0,i.Kg)(t)){const r=e[t];(0,i.Tn)(r)&&pe(s,r)}else if((0,i.Tn)(t))pe(s,t.bind(r));else if((0,i.Gv)(t))if((0,i.cy)(t))t.forEach(t=>xt(t,e,r,n));else{const n=(0,i.Tn)(t.handler)?t.handler.bind(r):e[t.handler];(0,i.Tn)(n)&&pe(s,n,t)}else 0}function bt(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:a}}=t.appContext,l=o.get(e);let h;return l?h=l:s.length||r||n?(h={},s.length&&s.forEach(t=>Et(h,t,a,!0)),Et(h,e,a)):h=e,(0,i.Gv)(e)&&o.set(e,h),h}function Et(t,e,r,n=!1){const{mixins:i,extends:s}=e;s&&Et(t,s,r,!0),i&&i.forEach(e=>Et(t,e,r,!0));for(const o in e)if(n&&"expose"===o);else{const n=Tt[o]||r&&r[o];t[o]=n?n(t[o],e[o]):e[o]}return t}const Tt={data:wt,props:It,emits:It,methods:Rt,computed:Rt,beforeCreate:Ct,created:Ct,beforeMount:Ct,mounted:Ct,beforeUpdate:Ct,updated:Ct,beforeDestroy:Ct,beforeUnmount:Ct,destroyed:Ct,unmounted:Ct,activated:Ct,deactivated:Ct,errorCaptured:Ct,serverPrefetch:Ct,components:Rt,directives:Rt,watch:Pt,provide:wt,inject:At};function wt(t,e){return e?t?function(){return(0,i.X$)((0,i.Tn)(t)?t.call(this,this):t,(0,i.Tn)(e)?e.call(this,this):e)}:e:t}function At(t,e){return Rt(St(t),St(e))}function St(t){if((0,i.cy)(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Ct(t,e){return t?[...new Set([].concat(t,e))]:e}function Rt(t,e){return t?(0,i.X$)(Object.create(null),t,e):e}function It(t,e){return t?(0,i.cy)(t)&&(0,i.cy)(e)?[...new Set([...t,...e])]:(0,i.X$)(Object.create(null),mt(t),mt(null!=e?e:{})):e}function Pt(t,e){if(!t)return e;if(!e)return t;const r=(0,i.X$)(Object.create(null),t);for(const n in e)r[n]=Ct(t[n],e[n]);return r}function Mt(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ot=0;function Dt(t,e){return function(r,n=null){(0,i.Tn)(r)||(r=(0,i.X$)({},r)),null==n||(0,i.Gv)(n)||(n=null);const s=Mt(),a=new WeakSet,l=[];let h=!1;const u=s.app={_uid:Ot++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:Sr,get config(){return s.config},set config(t){0},use(t,...e){return a.has(t)||(t&&(0,i.Tn)(t.install)?(a.add(t),t.install(u,...e)):(0,i.Tn)(t)&&(a.add(t),t(u,...e))),u},mixin(t){return s.mixins.includes(t)||s.mixins.push(t),u},component(t,e){return e?(s.components[t]=e,u):s.components[t]},directive(t,e){return e?(s.directives[t]=e,u):s.directives[t]},mount(i,o,a){if(!h){0;const l=u._ceVNode||$e(r,n);return l.appContext=s,!0===a?a="svg":!1===a&&(a=void 0),o&&e?e(l,i):t(l,i,a),h=!0,u._container=i,i.__vue_app__=u,Er(l.component)}},onUnmount(t){l.push(t)},unmount(){h&&(o(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(t,e){return s.provides[t]=e,u},runWithContext(t){const e=Ft;Ft=u;try{return t()}finally{Ft=e}}};return u}}let Ft=null;function Bt(t,e){if(or){let r=or.provides;const n=or.parent&&or.parent.provides;n===r&&(r=or.provides=Object.create(n)),r[t]=e}else 0}function Nt(t,e,r=!1){const n=or||A;if(n||Ft){let s=Ft?Ft._context.provides:n?null==n.parent||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&(0,i.Tn)(e)?e.call(n&&n.proxy):e}else 0}const Lt={},kt=()=>Object.create(Lt),Ut=t=>Object.getPrototypeOf(t)===Lt;function Gt(t,e,r,i=!1){const s={},o=kt();t.propsDefaults=Object.create(null),zt(t,e,s,o);for(const n in t.propsOptions[0])n in s||(s[n]=void 0);r?t.props=i?s:(0,n.Gc)(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function jt(t,e,r,s){const{props:o,attrs:a,vnode:{patchFlag:l}}=t,h=(0,n.ux)(o),[u]=t.propsOptions;let c=!1;if(!(s||l>0)||16&l){let n;zt(t,e,o,a)&&(c=!0);for(const s in h)e&&((0,i.$3)(e,s)||(n=(0,i.Tg)(s))!==s&&(0,i.$3)(e,n))||(u?!r||void 0===r[s]&&void 0===r[n]||(o[s]=Ht(u,h,s,void 0,t,!0)):delete o[s]);if(a!==h)for(const t in a)e&&(0,i.$3)(e,t)||(delete a[t],c=!0)}else if(8&l){const r=t.vnode.dynamicProps;for(let n=0;n<r.length;n++){let s=r[n];if(be(t.emitsOptions,s))continue;const l=e[s];if(u)if((0,i.$3)(a,s))l!==a[s]&&(a[s]=l,c=!0);else{const e=(0,i.PT)(s);o[e]=Ht(u,h,e,l,t,!1)}else l!==a[s]&&(a[s]=l,c=!0)}}c&&(0,n.hZ)(t.attrs,"set","")}function zt(t,e,r,s){const[o,a]=t.propsOptions;let l,h=!1;if(e)for(let n in e){if((0,i.SU)(n))continue;const u=e[n];let c;o&&(0,i.$3)(o,c=(0,i.PT)(n))?a&&a.includes(c)?(l||(l={}))[c]=u:r[c]=u:be(t.emitsOptions,n)||n in s&&u===s[n]||(s[n]=u,h=!0)}if(a){const e=(0,n.ux)(r),s=l||i.MZ;for(let n=0;n<a.length;n++){const l=a[n];r[l]=Ht(o,e,l,s[l],t,!(0,i.$3)(s,l))}}return h}function Ht(t,e,r,n,s,o){const a=t[r];if(null!=a){const t=(0,i.$3)(a,"default");if(t&&void 0===n){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,i.Tn)(t)){const{propsDefaults:i}=s;if(r in i)n=i[r];else{const o=ur(s);n=i[r]=t.call(null,e),o()}}else n=t;s.ce&&s.ce._setProp(r,n)}a[0]&&(o&&!t?n=!1:!a[1]||""!==n&&n!==(0,i.Tg)(r)||(n=!0))}return n}const Wt=new WeakMap;function Xt(t,e,r=!1){const n=r?Wt:e.propsCache,s=n.get(t);if(s)return s;const o=t.props,a={},l=[];let h=!1;if(!(0,i.Tn)(t)){const n=t=>{h=!0;const[r,n]=Xt(t,e,!0);(0,i.X$)(a,r),n&&l.push(...n)};!r&&e.mixins.length&&e.mixins.forEach(n),t.extends&&n(t.extends),t.mixins&&t.mixins.forEach(n)}if(!o&&!h)return(0,i.Gv)(t)&&n.set(t,i.Oj),i.Oj;if((0,i.cy)(o))for(let c=0;c<o.length;c++){0;const t=(0,i.PT)(o[c]);Vt(t)&&(a[t]=i.MZ)}else if(o){0;for(const t in o){const e=(0,i.PT)(t);if(Vt(e)){const r=o[t],n=a[e]=(0,i.cy)(r)||(0,i.Tn)(r)?{type:r}:(0,i.X$)({},r),s=n.type;let h=!1,u=!0;if((0,i.cy)(s))for(let t=0;t<s.length;++t){const e=s[t],r=(0,i.Tn)(e)&&e.name;if("Boolean"===r){h=!0;break}"String"===r&&(u=!1)}else h=(0,i.Tn)(s)&&"Boolean"===s.name;n[0]=h,n[1]=u,(h||(0,i.$3)(n,"default"))&&l.push(e)}}}const u=[a,l];return(0,i.Gv)(t)&&n.set(t,u),u}function Vt(t){return"$"!==t[0]&&!(0,i.SU)(t)}const $t=t=>"_"===t[0]||"$stable"===t,Yt=t=>(0,i.cy)(t)?t.map(Je):[Je(t)],qt=(t,e,r)=>{if(e._n)return e;const n=R((...t)=>Yt(e(...t)),r);return n._c=!1,n},Kt=(t,e,r)=>{const n=t._ctx;for(const s in t){if($t(s))continue;const r=t[s];if((0,i.Tn)(r))e[s]=qt(s,r,n);else if(null!=r){0;const t=Yt(r);e[s]=()=>t}}},Zt=(t,e)=>{const r=Yt(e);t.slots.default=()=>r},Jt=(t,e,r)=>{for(const n in e)!r&&$t(n)||(t[n]=e[n])},Qt=(t,e,r)=>{const n=t.slots=kt();if(32&t.vnode.shapeFlag){const t=e.__;t&&(0,i.yQ)(n,"__",t,!0);const s=e._;s?(Jt(n,e,r),r&&(0,i.yQ)(n,"_",s,!0)):Kt(e,n)}else e&&Zt(t,e)},te=(t,e,r)=>{const{vnode:n,slots:s}=t;let o=!0,a=i.MZ;if(32&n.shapeFlag){const t=e._;t?r&&1===t?o=!1:Jt(s,e,r):(o=!e.$stable,Kt(e,s)),a=e}else e&&(Zt(t,e),a={default:1});if(o)for(const i in s)$t(i)||null!=a[i]||delete s[i]};function ee(){"boolean"!==typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&((0,i.We)().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const re=Ie;function ne(t){return ie(t)}function ie(t,e){ee();const r=(0,i.We)();r.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:l,createText:h,createComment:u,setText:c,setElementText:d,parentNode:f,nextSibling:p,setScopeId:m=i.tE,insertStaticContent:g}=t,y=(t,e,r,n=null,i=null,s=null,o=void 0,a=null,l=!!e.dynamicChildren)=>{if(t===e)return;t&&!He(t,e)&&(n=Q(t),Y(t,i,s,!0),t=null),-2===e.patchFlag&&(l=!1,e.dynamicChildren=null);const{type:h,ref:u,shapeFlag:c}=e;switch(h){case Me:_(t,e,r,n);break;case Oe:x(t,e,r,n);break;case De:null==t&&T(e,r,n,o);break;case Pe:B(t,e,r,n,i,s,o,a,l);break;default:1&c?S(t,e,r,n,i,s,o,a,l):6&c?N(t,e,r,n,i,s,o,a,l):(64&c||128&c)&&h.process(t,e,r,n,i,s,o,a,l,rt)}null!=u&&i?z(u,t&&t.ref,s,e||t,!e):null==u&&t&&null!=t.ref&&z(t.ref,null,s,t,!0)},_=(t,e,r,n)=>{if(null==t)s(e.el=h(e.children),r,n);else{const r=e.el=t.el;e.children!==t.children&&c(r,e.children)}},x=(t,e,r,n)=>{null==t?s(e.el=u(e.children||""),r,n):e.el=t.el},T=(t,e,r,n)=>{[t.el,t.anchor]=g(t.children,e,r,n,t.el,t.anchor)},w=({el:t,anchor:e},r,n)=>{let i;while(t&&t!==e)i=p(t),s(t,r,n),t=i;s(e,r,n)},A=({el:t,anchor:e})=>{let r;while(t&&t!==e)r=p(t),o(t),t=r;o(e)},S=(t,e,r,n,i,s,o,a,l)=>{"svg"===e.type?o="svg":"math"===e.type&&(o="mathml"),null==t?C(e,r,n,i,s,o,a,l):O(t,e,i,s,o,a,l)},C=(t,e,r,n,o,h,u,c)=>{let f,p;const{props:m,shapeFlag:g,transition:y,dirs:v}=t;if(f=t.el=l(t.type,h,m&&m.is,m),8&g?d(f,t.children):16&g&&M(t.children,f,null,n,o,se(t,h),u,c),v&&I(t,null,n,"created"),R(f,t,t.scopeId,u,n),m){for(const t in m)"value"===t||(0,i.SU)(t)||a(f,t,null,m[t],h,n);"value"in m&&a(f,"value",null,m.value,h),(p=m.onVnodeBeforeMount)&&rr(p,n,t)}v&&I(t,null,n,"beforeMount");const _=ae(o,y);_&&y.beforeEnter(f),s(f,e,r),((p=m&&m.onVnodeMounted)||_||v)&&re(()=>{p&&rr(p,n,t),_&&y.enter(f),v&&I(t,null,n,"mounted")},o)},R=(t,e,r,n,i)=>{if(r&&m(t,r),n)for(let s=0;s<n.length;s++)m(t,n[s]);if(i){let r=i.subTree;if(e===r||Re(r.type)&&(r.ssContent===e||r.ssFallback===e)){const e=i.vnode;R(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},M=(t,e,r,n,i,s,o,a,l=0)=>{for(let h=l;h<t.length;h++){const l=t[h]=a?Qe(t[h]):Je(t[h]);y(null,l,e,r,n,i,s,o,a)}},O=(t,e,r,n,s,o,l)=>{const h=e.el=t.el;let{patchFlag:u,dynamicChildren:c,dirs:f}=e;u|=16&t.patchFlag;const p=t.props||i.MZ,m=e.props||i.MZ;let g;if(r&&oe(r,!1),(g=m.onVnodeBeforeUpdate)&&rr(g,r,e,t),f&&I(e,t,r,"beforeUpdate"),r&&oe(r,!0),(p.innerHTML&&null==m.innerHTML||p.textContent&&null==m.textContent)&&d(h,""),c?D(t.dynamicChildren,c,h,r,n,se(e,s),o):l||j(t,e,h,null,r,n,se(e,s),o,!1),u>0){if(16&u)F(h,p,m,r,s);else if(2&u&&p.class!==m.class&&a(h,"class",null,m.class,s),4&u&&a(h,"style",p.style,m.style,s),8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e],i=p[n],o=m[n];o===i&&"value"!==n||a(h,n,i,o,s,r)}}1&u&&t.children!==e.children&&d(h,e.children)}else l||null!=c||F(h,p,m,r,s);((g=m.onVnodeUpdated)||f)&&re(()=>{g&&rr(g,r,e,t),f&&I(e,t,r,"updated")},n)},D=(t,e,r,n,i,s,o)=>{for(let a=0;a<e.length;a++){const l=t[a],h=e[a],u=l.el&&(l.type===Pe||!He(l,h)||198&l.shapeFlag)?f(l.el):r;y(l,h,u,null,n,i,s,o,!0)}},F=(t,e,r,n,s)=>{if(e!==r){if(e!==i.MZ)for(const o in e)(0,i.SU)(o)||o in r||a(t,o,e[o],null,s,n);for(const o in r){if((0,i.SU)(o))continue;const l=r[o],h=e[o];l!==h&&"value"!==o&&a(t,o,h,l,s,n)}"value"in r&&a(t,"value",e.value,r.value,s)}},B=(t,e,r,n,i,o,a,l,u)=>{const c=e.el=t?t.el:h(""),d=e.anchor=t?t.anchor:h("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:m}=e;m&&(l=l?l.concat(m):m),null==t?(s(c,r,n),s(d,r,n),M(e.children||[],r,d,i,o,a,l,u)):f>0&&64&f&&p&&t.dynamicChildren?(D(t.dynamicChildren,p,r,i,o,a,l),(null!=e.key||i&&e===i.subTree)&&le(t,e,!0)):j(t,e,r,d,i,o,a,l,u)},N=(t,e,r,n,i,s,o,a,l)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,r,n,o,l):L(e,r,n,i,s,o,l):k(t,e,l)},L=(t,e,r,n,i,s,o)=>{const a=t.component=sr(t,n,i);if(W(t)&&(a.ctx.renderer=rt),gr(a,!1,o),a.asyncDep){if(i&&i.registerDep(a,U,o),!t.el){const t=a.subTree=$e(Oe);x(null,t,e,r)}}else U(a,t,e,r,i,s,o)},k=(t,e,r)=>{const n=e.component=t.component;if(Ae(t,e,r)){if(n.asyncDep&&!n.asyncResolved)return void G(n,e,r);n.next=e,n.update()}else e.el=t.el,n.vnode=e},U=(t,e,r,s,o,a,l)=>{const h=()=>{if(t.isMounted){let{next:e,bu:r,u:n,parent:s,vnode:u}=t;{const r=ue(t);if(r)return e&&(e.el=u.el,G(t,e,l)),void r.asyncDep.then(()=>{t.isUnmounted||h()})}let c,d=e;0,oe(t,!1),e?(e.el=u.el,G(t,e,l)):e=u,r&&(0,i.DY)(r),(c=e.props&&e.props.onVnodeBeforeUpdate)&&rr(c,s,e,u),oe(t,!0);const p=Ee(t);0;const m=t.subTree;t.subTree=p,y(m,p,f(m.el),Q(m),t,o,a),e.el=p.el,null===d&&Ce(t,p.el),n&&re(n,o),(c=e.props&&e.props.onVnodeUpdated)&&re(()=>rr(c,s,e,u),o)}else{let n;const{el:l,props:h}=e,{bm:u,m:c,parent:d,root:f,type:p}=t,m=H(e);if(oe(t,!1),u&&(0,i.DY)(u),!m&&(n=h&&h.onVnodeBeforeMount)&&rr(n,d,e),oe(t,!0),l&&it){const e=()=>{t.subTree=Ee(t),it(l,t.subTree,t,o,null)};m&&p.__asyncHydrate?p.__asyncHydrate(l,t,e):e()}else{f.ce&&!1!==f.ce._def.shadowRoot&&f.ce._injectChildStyle(p);const n=t.subTree=Ee(t);0,y(null,n,r,s,t,o,a),e.el=n.el}if(c&&re(c,o),!m&&(n=h&&h.onVnodeMounted)){const t=e;re(()=>rr(n,d,t),o)}(256&e.shapeFlag||d&&H(d.vnode)&&256&d.vnode.shapeFlag)&&t.a&&re(t.a,o),t.isMounted=!0,e=r=s=null}};t.scope.on();const u=t.effect=new n.X2(h);t.scope.off();const c=t.update=u.run.bind(u),d=t.job=u.runIfDirty.bind(u);d.i=t,d.id=t.uid,u.scheduler=()=>v(d),oe(t,!0),c()},G=(t,e,r)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,jt(t,e.props,i,r),te(t,e.children,r),(0,n.C4)(),b(t),(0,n.bl)()},j=(t,e,r,n,i,s,o,a,l=!1)=>{const h=t&&t.children,u=t?t.shapeFlag:0,c=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void V(h,c,r,n,i,s,o,a,l);if(256&f)return void X(h,c,r,n,i,s,o,a,l)}8&p?(16&u&&J(h,i,s),c!==h&&d(r,c)):16&u?16&p?V(h,c,r,n,i,s,o,a,l):J(h,i,s,!0):(8&u&&d(r,""),16&p&&M(c,r,n,i,s,o,a,l))},X=(t,e,r,n,s,o,a,l,h)=>{t=t||i.Oj,e=e||i.Oj;const u=t.length,c=e.length,d=Math.min(u,c);let f;for(f=0;f<d;f++){const n=e[f]=h?Qe(e[f]):Je(e[f]);y(t[f],n,r,null,s,o,a,l,h)}u>c?J(t,s,o,!0,!1,d):M(e,r,n,s,o,a,l,h,d)},V=(t,e,r,n,s,o,a,l,h)=>{let u=0;const c=e.length;let d=t.length-1,f=c-1;while(u<=d&&u<=f){const n=t[u],i=e[u]=h?Qe(e[u]):Je(e[u]);if(!He(n,i))break;y(n,i,r,null,s,o,a,l,h),u++}while(u<=d&&u<=f){const n=t[d],i=e[f]=h?Qe(e[f]):Je(e[f]);if(!He(n,i))break;y(n,i,r,null,s,o,a,l,h),d--,f--}if(u>d){if(u<=f){const t=f+1,i=t<c?e[t].el:n;while(u<=f)y(null,e[u]=h?Qe(e[u]):Je(e[u]),r,i,s,o,a,l,h),u++}}else if(u>f)while(u<=d)Y(t[u],s,o,!0),u++;else{const p=u,m=u,g=new Map;for(u=m;u<=f;u++){const t=e[u]=h?Qe(e[u]):Je(e[u]);null!=t.key&&g.set(t.key,u)}let v,_=0;const x=f-m+1;let b=!1,E=0;const T=new Array(x);for(u=0;u<x;u++)T[u]=0;for(u=p;u<=d;u++){const n=t[u];if(_>=x){Y(n,s,o,!0);continue}let i;if(null!=n.key)i=g.get(n.key);else for(v=m;v<=f;v++)if(0===T[v-m]&&He(n,e[v])){i=v;break}void 0===i?Y(n,s,o,!0):(T[i-m]=u+1,i>=E?E=i:b=!0,y(n,e[i],r,null,s,o,a,l,h),_++)}const w=b?he(T):i.Oj;for(v=w.length-1,u=x-1;u>=0;u--){const t=m+u,i=e[t],d=t+1<c?e[t+1].el:n;0===T[u]?y(null,i,r,d,s,o,a,l,h):b&&(v<0||u!==w[v]?$(i,r,d,2):v--)}}},$=(t,e,r,n,i=null)=>{const{el:a,type:l,transition:h,children:u,shapeFlag:c}=t;if(6&c)return void $(t.component.subTree,e,r,n);if(128&c)return void t.suspense.move(e,r,n);if(64&c)return void l.move(t,e,r,rt);if(l===Pe){s(a,e,r);for(let t=0;t<u.length;t++)$(u[t],e,r,n);return void s(t.anchor,e,r)}if(l===De)return void w(t,e,r);const d=2!==n&&1&c&&h;if(d)if(0===n)h.beforeEnter(a),s(a,e,r),re(()=>h.enter(a),i);else{const{leave:n,delayLeave:i,afterLeave:l}=h,u=()=>{t.ctx.isUnmounted?o(a):s(a,e,r)},c=()=>{n(a,()=>{u(),l&&l()})};i?i(a,u,c):c()}else s(a,e,r)},Y=(t,e,r,i=!1,s=!1)=>{const{type:o,props:a,ref:l,children:h,dynamicChildren:u,shapeFlag:c,patchFlag:d,dirs:f,cacheIndex:p}=t;if(-2===d&&(s=!1),null!=l&&((0,n.C4)(),z(l,null,r,t,!0),(0,n.bl)()),null!=p&&(e.renderCache[p]=void 0),256&c)return void e.ctx.deactivate(t);const m=1&c&&f,g=!H(t);let y;if(g&&(y=a&&a.onVnodeBeforeUnmount)&&rr(y,e,t),6&c)Z(t.component,r,i);else{if(128&c)return void t.suspense.unmount(r,i);m&&I(t,null,e,"beforeUnmount"),64&c?t.type.remove(t,e,r,rt,i):u&&!u.hasOnce&&(o!==Pe||d>0&&64&d)?J(u,e,r,!1,!0):(o===Pe&&384&d||!s&&16&c)&&J(h,e,r),i&&q(t)}(g&&(y=a&&a.onVnodeUnmounted)||m)&&re(()=>{y&&rr(y,e,t),m&&I(t,null,e,"unmounted")},r)},q=t=>{const{type:e,el:r,anchor:n,transition:i}=t;if(e===Pe)return void K(r,n);if(e===De)return void A(t);const s=()=>{o(r),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:e,delayLeave:n}=i,o=()=>e(r,s);n?n(t.el,s,o):o()}else s()},K=(t,e)=>{let r;while(t!==e)r=p(t),o(t),t=r;o(e)},Z=(t,e,r)=>{const{bum:n,scope:s,job:o,subTree:a,um:l,m:h,a:u,parent:c,slots:{__:d}}=t;ce(h),ce(u),n&&(0,i.DY)(n),c&&(0,i.cy)(d)&&d.forEach(t=>{c.renderCache[t]=void 0}),s.stop(),o&&(o.flags|=8,Y(a,t,e,r)),l&&re(l,e),re(()=>{t.isUnmounted=!0},e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},J=(t,e,r,n=!1,i=!1,s=0)=>{for(let o=s;o<t.length;o++)Y(t[o],e,r,n,i)},Q=t=>{if(6&t.shapeFlag)return Q(t.component.subTree);if(128&t.shapeFlag)return t.suspense.next();const e=p(t.anchor||t.el),r=e&&e[P];return r?p(r):e};let tt=!1;const et=(t,e,r)=>{null==t?e._vnode&&Y(e._vnode,null,null,!0):y(e._vnode||null,t,e,null,null,null,r),e._vnode=t,tt||(tt=!0,b(),E(),tt=!1)},rt={p:y,um:Y,m:$,r:q,mt:L,mc:M,pc:j,pbc:D,n:Q,o:t};let nt,it;return e&&([nt,it]=e(rt)),{render:et,hydrate:nt,createApp:Dt(et,nt)}}function se({type:t,props:e},r){return"svg"===r&&"foreignObject"===t||"mathml"===r&&"annotation-xml"===t&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function oe({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ae(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function le(t,e,r=!1){const n=t.children,s=e.children;if((0,i.cy)(n)&&(0,i.cy)(s))for(let i=0;i<n.length;i++){const t=n[i];let e=s[i];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=s[i]=Qe(s[i]),e.el=t.el),r||-2===e.patchFlag||le(t,e)),e.type===Me&&(e.el=t.el),e.type!==Oe||e.el||(e.el=t.el)}}function he(t){const e=t.slice(),r=[0];let n,i,s,o,a;const l=t.length;for(n=0;n<l;n++){const l=t[n];if(0!==l){if(i=r[r.length-1],t[i]<l){e[n]=i,r.push(n);continue}s=0,o=r.length-1;while(s<o)a=s+o>>1,t[r[a]]<l?s=a+1:o=a;l<t[r[s]]&&(s>0&&(e[n]=r[s-1]),r[s]=n)}}s=r.length,o=r[s-1];while(s-- >0)r[s]=o,o=e[o];return r}function ue(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ue(e)}function ce(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const de=Symbol.for("v-scx"),fe=()=>{{const t=Nt(de);return t}};function pe(t,e,r){return me(t,e,r)}function me(t,e,r=i.MZ){const{immediate:s,deep:a,flush:l,once:h}=r;const u=(0,i.X$)({},r);const c=e&&s||!e&&"post"!==l;let d;if(mr)if("sync"===l){const t=fe();d=t.__watcherHandles||(t.__watcherHandles=[])}else if(!c){const t=()=>{};return t.stop=i.tE,t.resume=i.tE,t.pause=i.tE,t}const f=or;u.call=(t,e,r)=>o(t,f,e,r);let p=!1;"post"===l?u.scheduler=t=>{re(t,f&&f.suspense)}:"sync"!==l&&(p=!0,u.scheduler=(t,e)=>{e?t():v(t)}),u.augmentJob=t=>{e&&(t.flags|=4),p&&(t.flags|=2,f&&(t.id=f.uid,t.i=f))};const m=(0,n.wB)(t,e,u);return mr&&(d?d.push(m):c&&m()),m}function ge(t,e,r){const n=this.proxy,s=(0,i.Kg)(t)?t.includes(".")?ye(n,t):()=>n[t]:t.bind(n,n);let o;(0,i.Tn)(e)?o=e:(o=e.handler,r=e);const a=ur(this),l=me(s,o.bind(n),r);return a(),l}function ye(t,e){const r=e.split(".");return()=>{let e=t;for(let t=0;t<r.length&&e;t++)e=e[r[t]];return e}}const ve=(t,e)=>"modelValue"===e||"model-value"===e?t.modelModifiers:t[`${e}Modifiers`]||t[`${(0,i.PT)(e)}Modifiers`]||t[`${(0,i.Tg)(e)}Modifiers`];function _e(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||i.MZ;let s=r;const a=e.startsWith("update:"),l=a&&ve(n,e.slice(7));let h;l&&(l.trim&&(s=r.map(t=>(0,i.Kg)(t)?t.trim():t)),l.number&&(s=r.map(i.bB)));let u=n[h=(0,i.rU)(e)]||n[h=(0,i.rU)((0,i.PT)(e))];!u&&a&&(u=n[h=(0,i.rU)((0,i.Tg)(e))]),u&&o(u,t,6,s);const c=n[h+"Once"];if(c){if(t.emitted){if(t.emitted[h])return}else t.emitted={};t.emitted[h]=!0,o(c,t,6,s)}}function xe(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(void 0!==s)return s;const o=t.emits;let a={},l=!1;if(!(0,i.Tn)(t)){const n=t=>{const r=xe(t,e,!0);r&&(l=!0,(0,i.X$)(a,r))};!r&&e.mixins.length&&e.mixins.forEach(n),t.extends&&n(t.extends),t.mixins&&t.mixins.forEach(n)}return o||l?((0,i.cy)(o)?o.forEach(t=>a[t]=null):(0,i.X$)(a,o),(0,i.Gv)(t)&&n.set(t,a),a):((0,i.Gv)(t)&&n.set(t,null),null)}function be(t,e){return!(!t||!(0,i.Mp)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,i.$3)(t,e[0].toLowerCase()+e.slice(1))||(0,i.$3)(t,(0,i.Tg)(e))||(0,i.$3)(t,e))}function Ee(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[o],slots:l,attrs:h,emit:u,render:c,renderCache:d,props:f,data:p,setupState:m,ctx:g,inheritAttrs:y}=t,v=C(t);let _,x;try{if(4&r.shapeFlag){const t=s||n,e=t;_=Je(c.call(e,t,d,f,m,p,g)),x=h}else{const t=e;0,_=Je(t.length>1?t(f,{attrs:h,slots:l,emit:u}):t(f,null)),x=e.props?h:Te(h)}}catch(E){Fe.length=0,a(E,t,1),_=$e(Oe)}let b=_;if(x&&!1!==y){const t=Object.keys(x),{shapeFlag:e}=b;t.length&&7&e&&(o&&t.some(i.CP)&&(x=we(x,o)),b=Ke(b,x,!1,!0))}return r.dirs&&(b=Ke(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(r.dirs):r.dirs),r.transition&&U(b,r.transition),_=b,C(v),_}const Te=t=>{let e;for(const r in t)("class"===r||"style"===r||(0,i.Mp)(r))&&((e||(e={}))[r]=t[r]);return e},we=(t,e)=>{const r={};for(const n in t)(0,i.CP)(n)&&n.slice(9)in e||(r[n]=t[n]);return r};function Ae(t,e,r){const{props:n,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,h=s.emitsOptions;if(e.dirs||e.transition)return!0;if(!(r&&l>=0))return!(!i&&!a||a&&a.$stable)||n!==o&&(n?!o||Se(n,o,h):!!o);if(1024&l)return!0;if(16&l)return n?Se(n,o,h):!!o;if(8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const r=t[e];if(o[r]!==n[r]&&!be(h,r))return!0}}return!1}function Se(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(e[s]!==t[s]&&!be(r,s))return!0}return!1}function Ce({vnode:t,parent:e},r){while(e){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n!==t)break;(t=e.vnode).el=r,e=e.parent}}const Re=t=>t.__isSuspense;function Ie(t,e){e&&e.pendingBranch?(0,i.cy)(t)?e.effects.push(...t):e.effects.push(t):x(t)}const Pe=Symbol.for("v-fgt"),Me=Symbol.for("v-txt"),Oe=Symbol.for("v-cmt"),De=Symbol.for("v-stc"),Fe=[];let Be=null;function Ne(t=!1){Fe.push(Be=t?null:[])}function Le(){Fe.pop(),Be=Fe[Fe.length-1]||null}let ke=1;function Ue(t,e=!1){ke+=t,t<0&&Be&&e&&(Be.hasOnce=!0)}function Ge(t){return t.dynamicChildren=ke>0?Be||i.Oj:null,Le(),ke>0&&Be&&Be.push(t),t}function je(t,e,r,n,i,s){return Ge(Ve(t,e,r,n,i,s,!0))}function ze(t){return!!t&&!0===t.__v_isVNode}function He(t,e){return t.type===e.type&&t.key===e.key}const We=({key:t})=>null!=t?t:null,Xe=({ref:t,ref_key:e,ref_for:r})=>("number"===typeof t&&(t=""+t),null!=t?(0,i.Kg)(t)||(0,n.i9)(t)||(0,i.Tn)(t)?{i:A,r:t,k:e,f:!!r}:t:null);function Ve(t,e=null,r=null,n=0,s=null,o=(t===Pe?0:1),a=!1,l=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&We(e),ref:e&&Xe(e),scopeId:S,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:A};return l?(tr(h,r),128&o&&t.normalize(h)):r&&(h.shapeFlag|=(0,i.Kg)(r)?8:16),ke>0&&!a&&Be&&(h.patchFlag>0||6&o)&&32!==h.patchFlag&&Be.push(h),h}const $e=Ye;function Ye(t,e=null,r=null,s=0,o=null,a=!1){if(t&&t!==ut||(t=Oe),ze(t)){const n=Ke(t,e,!0);return r&&tr(n,r),ke>0&&!a&&Be&&(6&n.shapeFlag?Be[Be.indexOf(t)]=n:Be.push(n)),n.patchFlag=-2,n}if(wr(t)&&(t=t.__vccOpts),e){e=qe(e);let{class:t,style:r}=e;t&&!(0,i.Kg)(t)&&(e.class=(0,i.C4)(t)),(0,i.Gv)(r)&&((0,n.ju)(r)&&!(0,i.cy)(r)&&(r=(0,i.X$)({},r)),e.style=(0,i.Tr)(r))}const l=(0,i.Kg)(t)?1:Re(t)?128:M(t)?64:(0,i.Gv)(t)?4:(0,i.Tn)(t)?2:0;return Ve(t,e,r,s,o,l,a,!0)}function qe(t){return t?(0,n.ju)(t)||Ut(t)?(0,i.X$)({},t):t:null}function Ke(t,e,r=!1,n=!1){const{props:s,ref:o,patchFlag:a,children:l,transition:h}=t,u=e?er(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&We(u),ref:e&&e.ref?r&&o?(0,i.cy)(o)?o.concat(Xe(e)):[o,Xe(e)]:Xe(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Pe?-1===a?16:16|a:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:h,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ke(t.ssContent),ssFallback:t.ssFallback&&Ke(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return h&&n&&U(c,h.clone(c)),c}function Ze(t=" ",e=0){return $e(Me,null,t,e)}function Je(t){return null==t||"boolean"===typeof t?$e(Oe):(0,i.cy)(t)?$e(Pe,null,t.slice()):ze(t)?Qe(t):$e(Me,null,String(t))}function Qe(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:Ke(t)}function tr(t,e){let r=0;const{shapeFlag:n}=t;if(null==e)e=null;else if((0,i.cy)(e))r=16;else if("object"===typeof e){if(65&n){const r=e.default;return void(r&&(r._c&&(r._d=!1),tr(t,r()),r._c&&(r._d=!0)))}{r=32;const n=e._;n||Ut(e)?3===n&&A&&(1===A.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=A}}else(0,i.Tn)(e)?(e={default:e,_ctx:A},r=32):(e=String(e),64&n?(r=16,e=[Ze(e)]):r=8);t.children=e,t.shapeFlag|=r}function er(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const t in n)if("class"===t)e.class!==n.class&&(e.class=(0,i.C4)([e.class,n.class]));else if("style"===t)e.style=(0,i.Tr)([e.style,n.style]);else if((0,i.Mp)(t)){const r=e[t],s=n[t];!s||r===s||(0,i.cy)(r)&&r.includes(s)||(e[t]=r?[].concat(r,s):s)}else""!==t&&(e[t]=n[t])}return e}function rr(t,e,r,n=null){o(t,e,7,[r,n])}const nr=Mt();let ir=0;function sr(t,e,r){const s=t.type,o=(e?e.appContext:t.appContext)||nr,a={uid:ir++,vnode:t,type:s,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new n.yC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Xt(s,o),emitsOptions:xe(s,o),emit:null,emitted:null,propsDefaults:i.MZ,inheritAttrs:s.inheritAttrs,ctx:i.MZ,data:i.MZ,props:i.MZ,attrs:i.MZ,slots:i.MZ,refs:i.MZ,setupState:i.MZ,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=_e.bind(null,a),t.ce&&t.ce(a),a}let or=null;const ar=()=>or||A;let lr,hr;{const t=(0,i.We)(),e=(e,r)=>{let n;return(n=t[e])||(n=t[e]=[]),n.push(r),t=>{n.length>1?n.forEach(e=>e(t)):n[0](t)}};lr=e("__VUE_INSTANCE_SETTERS__",t=>or=t),hr=e("__VUE_SSR_SETTERS__",t=>mr=t)}const ur=t=>{const e=or;return lr(t),t.scope.on(),()=>{t.scope.off(),lr(e)}},cr=()=>{or&&or.scope.off(),lr(null)};function dr(t){return 4&t.vnode.shapeFlag}let fr,pr,mr=!1;function gr(t,e=!1,r=!1){e&&hr(e);const{props:n,children:i}=t.vnode,s=dr(t);Gt(t,n,s,e),Qt(t,i,r||e);const o=s?yr(t,e):void 0;return e&&hr(!1),o}function yr(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,pt);const{setup:o}=r;if(o){(0,n.C4)();const r=t.setupContext=o.length>1?br(t):null,l=ur(t),h=s(o,t,0,[t.props,r]),u=(0,i.yL)(h);if((0,n.bl)(),l(),!u&&!t.sp||H(t)||j(t),u){if(h.then(cr,cr),e)return h.then(r=>{vr(t,r,e)}).catch(e=>{a(e,t,0)});t.asyncDep=h}else vr(t,h,e)}else _r(t,e)}function vr(t,e,r){(0,i.Tn)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,i.Gv)(e)&&(t.setupState=(0,n.Pr)(e)),_r(t,r)}function _r(t,e,r){const s=t.type;if(!t.render){if(!e&&fr&&!s.render){const e=s.template||bt(t).template;if(e){0;const{isCustomElement:r,compilerOptions:n}=t.appContext.config,{delimiters:o,compilerOptions:a}=s,l=(0,i.X$)((0,i.X$)({isCustomElement:r,delimiters:o},n),a);s.render=fr(e,l)}}t.render=s.render||i.tE,pr&&pr(t)}{const e=ur(t);(0,n.C4)();try{yt(t)}finally{(0,n.bl)(),e()}}}const xr={get(t,e){return(0,n.u4)(t,"get",""),t[e]}};function br(t){const e=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,xr),slots:t.slots,emit:t.emit,expose:e}}function Er(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy((0,n.Pr)((0,n.IG)(t.exposed)),{get(e,r){return r in e?e[r]:r in dt?dt[r](t):void 0},has(t,e){return e in t||e in dt}})):t.proxy}function Tr(t,e=!0){return(0,i.Tn)(t)?t.displayName||t.name:t.name||e&&t.__name}function wr(t){return(0,i.Tn)(t)&&"__vccOpts"in t}const Ar=(t,e)=>{const r=(0,n.EW)(t,e,mr);return r};const Sr="3.5.17"},6801:function(t,e,r){"use strict";var n=r(3724),i=r(8686),s=r(4913),o=r(8551),a=r(5397),l=r(1072);e.f=n&&!i?Object.defineProperties:function(t,e){o(t);var r,n=a(e),i=l(e),h=i.length,u=0;while(h>u)s.f(t,r=i[u++],n[r]);return t}},6823:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(r){return"Object"}}},6837:function(t){"use strict";var e=TypeError,r=9007199254740991;t.exports=function(t){if(t>r)throw e("Maximum allowed index exceeded");return t}},6840:function(t,e,r){"use strict";var n=r(4901),i=r(4913),s=r(283),o=r(9433);t.exports=function(t,e,r,a){a||(a={});var l=a.enumerable,h=void 0!==a.name?a.name:e;if(n(r)&&s(r,h,a),a.global)l?t[e]=r:o(e,r);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(u){}l?t[e]=r:i.f(t,e,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},6931:function(t){"use strict";t.exports=Math.min},6955:function(t,e,r){"use strict";var n=r(2140),i=r(4901),s=r(2195),o=r(8227),a=o("toStringTag"),l=Object,h="Arguments"===s(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(r){}};t.exports=n?s:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=u(e=l(t),a))?r:h?s(e):"Object"===(n=s(e))&&i(e.callee)?"Arguments":n}},6969:function(t,e,r){"use strict";var n=r(2777),i=r(757);t.exports=function(t){var e=n(t,"string");return i(e)?e:e+""}},6980:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7040:function(t,e,r){"use strict";var n=r(4495);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7055:function(t,e,r){"use strict";var n=r(9504),i=r(9039),s=r(2195),o=Object,a=n("".split);t.exports=i(function(){return!o("z").propertyIsEnumerable(0)})?function(t){return"String"===s(t)?a(t,""):o(t)}:o},7080:function(t,e,r){"use strict";var n=r(4402).has;t.exports=function(t){return n(t),t}},7347:function(t,e,r){"use strict";var n=r(3724),i=r(9565),s=r(8773),o=r(6980),a=r(5397),l=r(6969),h=r(9297),u=r(5917),c=Object.getOwnPropertyDescriptor;e.f=n?c:function(t,e){if(t=a(t),e=l(e),u)try{return c(t,e)}catch(r){}if(h(t,e))return o(!i(s.f,t,e),t[e])}},7476:function(t,e,r){"use strict";var n=r(2195),i=r(9504);t.exports=function(t){if("Function"===n(t))return i(t)}},7551:function(t){"use strict";t.exports=Function.prototype.apply},7588:function(t,e,r){"use strict";var n=r(6518),i=r(9565),s=r(2652),o=r(9306),a=r(8551),l=r(1767),h=r(9539),u=r(4549),c=u("forEach",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:c},{forEach:function(t){a(this);try{o(t)}catch(n){h(this,"throw",n)}if(c)return i(c,this,t);var e=l(this),r=0;s(e,function(e){t(e,r++)},{IS_RECORD:!0})}})},7629:function(t,e,r){"use strict";var n=r(6395),i=r(4576),s=r(9433),o="__core-js_shared__",a=t.exports=i[o]||s(o,{});(a.versions||(a.versions=[])).push({version:"3.43.0",mode:n?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.43.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7642:function(t,e,r){"use strict";var n=r(6518),i=r(3440),s=r(9039),o=r(4916),a=!o("difference",function(t){return 0===t.size}),l=a||s(function(){var t={size:1,has:function(){return!0},keys:function(){var t=0;return{next:function(){var r=t++>1;return e.has(1)&&e.clear(),{done:r,value:2}}}}},e=new Set([1,2,3,4]);return 3!==e.difference(t).size});n({target:"Set",proto:!0,real:!0,forced:l},{difference:i})},7657:function(t,e,r){"use strict";var n,i,s,o=r(9039),a=r(4901),l=r(34),h=r(2360),u=r(2787),c=r(6840),d=r(8227),f=r(6395),p=d("iterator"),m=!1;[].keys&&(s=[].keys(),"next"in s?(i=u(u(s)),i!==Object.prototype&&(n=i)):m=!0);var g=!l(n)||o(function(){var t={};return n[p].call(t)!==t});g?n={}:f&&(n=h(n)),a(n[p])||c(n,p,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:m}},7724:function(t){"use strict";t.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"===typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;var n=42;for(var i in t[e]=n,t)return!1;if("function"===typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var s=Object.getOwnPropertySymbols(t);if(1!==s.length||s[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==n||!0!==o.enumerable)return!1}return!0}},7740:function(t,e,r){"use strict";var n=r(9297),i=r(5031),s=r(7347),o=r(4913);t.exports=function(t,e,r){for(var a=i(e),l=o.f,h=s.f,u=0;u<a.length;u++){var c=a[u];n(t,c)||r&&n(r,c)||l(t,c,h(e,c))}}},7750:function(t,e,r){"use strict";var n=r(4117),i=TypeError;t.exports=function(t){if(n(t))throw new i("Can't call method on "+t);return t}},7751:function(t,e,r){"use strict";var n=r(4576),i=r(4901),s=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?s(n[t]):n[t]&&n[t][e]}},7771:function(t,e,r){"use strict";r.d(e,{CB:function(){return ot}});var n=r(3818);n.dJ;r(4114),r(8111),r(8237),r(9577);var i="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",s="\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}",o="\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n";class a extends n.dJ{constructor(t=4,e=3,r=!1){super(i,r?o:s),this._kernels=[],this._blur=4,this._quality=3,this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new n.bR,this.pixelSize=1,this._clamp=r,Array.isArray(t)?this.kernels=t:(this._blur=t,this.quality=e)}apply(t,e,r,n){const i=this._pixelSize.x/e._frame.width,s=this._pixelSize.y/e._frame.height;let o;if(1===this._quality||0===this._blur)o=this._kernels[0]+.5,this.uniforms.uOffset[0]=o*i,this.uniforms.uOffset[1]=o*s,t.applyFilter(this,e,r,n);else{const a=t.getFilterTexture();let l,h=e,u=a;const c=this._quality-1;for(let e=0;e<c;e++)o=this._kernels[e]+.5,this.uniforms.uOffset[0]=o*i,this.uniforms.uOffset[1]=o*s,t.applyFilter(this,h,u,1),l=h,h=u,u=l;o=this._kernels[c]+.5,this.uniforms.uOffset[0]=o*i,this.uniforms.uOffset[1]=o*s,t.applyFilter(this,h,r,n),t.returnFilterTexture(a)}}_updatePadding(){this.padding=Math.ceil(this._kernels.reduce((t,e)=>t+e+.5,0))}_generateKernels(){const t=this._blur,e=this._quality,r=[t];if(t>0){let n=t;const i=t/e;for(let t=1;t<e;t++)n-=i,r.push(n)}this._kernels=r,this._updatePadding()}get kernels(){return this._kernels}set kernels(t){Array.isArray(t)&&t.length>0?(this._kernels=t,this._quality=t.length,this._blur=Math.max(...t)):(this._kernels=[0],this._quality=1)}get clamp(){return this._clamp}set pixelSize(t){"number"==typeof t?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):t instanceof n.bR?(this._pixelSize.x=t.x,this._pixelSize.y=t.y):(this._pixelSize.x=1,this._pixelSize.y=1)}get pixelSize(){return this._pixelSize}get quality(){return this._quality}set quality(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()}get blur(){return this._blur}set blur(t){this._blur=t,this._generateKernels()}}
/*!
 * @pixi/filter-advanced-bloom - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-advanced-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var l="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",h="\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n";class u extends n.dJ{constructor(t=.5){super(l,h),this.threshold=t}get threshold(){return this.uniforms.threshold}set threshold(t){this.uniforms.threshold=t}}var c="uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D bloomTexture;\nuniform float bloomScale;\nuniform float brightness;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    color.rgb *= brightness;\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\n    bloomColor.rgb *= bloomScale;\n    gl_FragColor = color + bloomColor;\n}\n";const d=class extends n.dJ{constructor(t){super(l,c),this.bloomScale=1,this.brightness=1,this._resolution=n.W0.FILTER_RESOLUTION,"number"==typeof t&&(t={threshold:t});const e=Object.assign(d.defaults,t);this.bloomScale=e.bloomScale,this.brightness=e.brightness;const{kernels:r,blur:i,quality:s,pixelSize:o,resolution:h}=e;this._extractFilter=new u(e.threshold),this._extractFilter.resolution=h,this._blurFilter=r?new a(r):new a(i,s),this.pixelSize=o,this.resolution=h}apply(t,e,r,n,i){const s=t.getFilterTexture();this._extractFilter.apply(t,e,s,1,i);const o=t.getFilterTexture();this._blurFilter.apply(t,s,o,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=o,t.applyFilter(this,e,r,n),t.returnFilterTexture(o),t.returnFilterTexture(s)}get resolution(){return this._resolution}set resolution(t){this._resolution=t,this._extractFilter&&(this._extractFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)}get threshold(){return this._extractFilter.threshold}set threshold(t){this._extractFilter.threshold=t}get kernels(){return this._blurFilter.kernels}set kernels(t){this._blurFilter.kernels=t}get blur(){return this._blurFilter.blur}set blur(t){this._blurFilter.blur=t}get quality(){return this._blurFilter.quality}set quality(t){this._blurFilter.quality=t}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(t){this._blurFilter.pixelSize=t}};let f=d;f.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:n.W0.FILTER_RESOLUTION};n.dJ;n.dJ;r(2460),r(5429);
/*!
 * @pixi/filter-bloom - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
n.dJ;
/*!
 * @pixi/filter-bulge-pinch - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-bulge-pinch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var p="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",m="uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n";const g=class extends n.dJ{constructor(t){super(p,m),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,g.defaults,t)}apply(t,e,r,n){const{width:i,height:s}=e.filterFrame;this.uniforms.dimensions[0]=i,this.uniforms.dimensions[1]=s,t.applyFilter(this,e,r,n)}get radius(){return this.uniforms.radius}set radius(t){this.uniforms.radius=t}get strength(){return this.uniforms.strength}set strength(t){this.uniforms.strength=t}get center(){return this.uniforms.center}set center(t){this.uniforms.center=t}};let y=g;y.defaults={center:[.5,.5],radius:100,strength:1};n.dJ;n.dJ;n.dJ;r(7588);n.dJ;n.dJ;
/*!
 * @pixi/filter-crt - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-crt is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var v="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",_="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nconst float SQRT_2 = 1.414213;\n\nconst float light = 1.0;\n\nuniform float curvature;\nuniform float lineWidth;\nuniform float lineContrast;\nuniform bool verticalLine;\nuniform float noise;\nuniform float noiseSize;\n\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\n\nuniform float seed;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));\n    \n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 rgb = gl_FragColor.rgb;\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        rgb += _noise * noise;\n    }\n\n    if (lineWidth > 0.0)\n    {\n        float _c = curvature > 0. ? curvature : 1.;\n        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\n        vec2 uv = dir * k;\n\n        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;\n        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;\n        rgb *= j;\n        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);\n        rgb *= 0.99 + ceil(segment) * 0.015;\n    }\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    gl_FragColor.rgb = rgb;\n}\n";const x=class extends n.dJ{constructor(t){super(v,_),this.time=0,this.seed=0,this.uniforms.dimensions=new Float32Array(2),Object.assign(this,x.defaults,t)}apply(t,e,r,n){const{width:i,height:s}=e.filterFrame;this.uniforms.dimensions[0]=i,this.uniforms.dimensions[1]=s,this.uniforms.seed=this.seed,this.uniforms.time=this.time,t.applyFilter(this,e,r,n)}set curvature(t){this.uniforms.curvature=t}get curvature(){return this.uniforms.curvature}set lineWidth(t){this.uniforms.lineWidth=t}get lineWidth(){return this.uniforms.lineWidth}set lineContrast(t){this.uniforms.lineContrast=t}get lineContrast(){return this.uniforms.lineContrast}set verticalLine(t){this.uniforms.verticalLine=t}get verticalLine(){return this.uniforms.verticalLine}set noise(t){this.uniforms.noise=t}get noise(){return this.uniforms.noise}set noiseSize(t){this.uniforms.noiseSize=t}get noiseSize(){return this.uniforms.noiseSize}set vignetting(t){this.uniforms.vignetting=t}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(t){this.uniforms.vignettingAlpha=t}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(t){this.uniforms.vignettingBlur=t}get vignettingBlur(){return this.uniforms.vignettingBlur}};let b=x;b.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0};n.dJ;
/*!
 * @pixi/filter-drop-shadow - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-drop-shadow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var E="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",T="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\n\nuniform vec2 shift;\nuniform vec4 inputSize;\n\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);\n\n    // Premultiply alpha\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}",w=Object.defineProperty,A=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,R=(t,e,r)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,I=(t,e)=>{for(var r in e||(e={}))S.call(e,r)&&R(t,r,e[r]);if(A)for(var r of A(e))C.call(e,r)&&R(t,r,e[r]);return t};const P=class extends n.dJ{constructor(t){super(),this.angle=45,this._distance=5,this._resolution=n.W0.FILTER_RESOLUTION;const e=t?I(I({},P.defaults),t):P.defaults,{kernels:r,blur:i,quality:s,pixelSize:o,resolution:l}=e;this._tintFilter=new n.dJ(E,T),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.uniforms.shift=new n.bR,this._tintFilter.resolution=l,this._blurFilter=r?new a(r):new a(i,s),this.pixelSize=o,this.resolution=l;const{shadowOnly:h,rotation:u,distance:c,alpha:d,color:f}=e;this.shadowOnly=h,this.rotation=u,this.distance=c,this.alpha=d,this.color=f,this._updatePadding()}apply(t,e,r,n){const i=t.getFilterTexture();this._tintFilter.apply(t,e,i,1),this._blurFilter.apply(t,i,r,n),!0!==this.shadowOnly&&t.applyFilter(this,e,r,0),t.returnFilterTexture(i)}_updatePadding(){this.padding=this.distance+2*this.blur}_updateShift(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))}get resolution(){return this._resolution}set resolution(t){this._resolution=t,this._tintFilter&&(this._tintFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)}get distance(){return this._distance}set distance(t){this._distance=t,this._updatePadding(),this._updateShift()}get rotation(){return this.angle/n.Td}set rotation(t){this.angle=t*n.Td,this._updateShift()}get alpha(){return this._tintFilter.uniforms.alpha}set alpha(t){this._tintFilter.uniforms.alpha=t}get color(){return n.Wp.rgb2hex(this._tintFilter.uniforms.color)}set color(t){n.Wp.hex2rgb(t,this._tintFilter.uniforms.color)}get kernels(){return this._blurFilter.kernels}set kernels(t){this._blurFilter.kernels=t}get blur(){return this._blurFilter.blur}set blur(t){this._blurFilter.blur=t,this._updatePadding()}get quality(){return this._blurFilter.quality}set quality(t){this._blurFilter.quality=t}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(t){this._blurFilter.pixelSize=t}};let M=P;M.defaults={rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:n.W0.FILTER_RESOLUTION};n.dJ;
/*!
 * @pixi/filter-glitch - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-glitch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var O="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",D="// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n";const F=class extends n.dJ{constructor(t){super(O,D),this.offset=100,this.fillMode=F.TRANSPARENT,this.average=!1,this.seed=0,this.minSize=8,this.sampleSize=512,this._slices=0,this._offsets=new Float32Array(1),this._sizes=new Float32Array(1),this._direction=-1,this.uniforms.dimensions=new Float32Array(2),this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=n.gP.from(this._canvas,{scaleMode:n.M6.NEAREST}),Object.assign(this,F.defaults,t)}apply(t,e,r,n){const{width:i,height:s}=e.filterFrame;this.uniforms.dimensions[0]=i,this.uniforms.dimensions[1]=s,this.uniforms.aspect=s/i,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,t.applyFilter(this,e,r,n)}_randomizeSizes(){const t=this._sizes,e=this._slices-1,r=this.sampleSize,n=Math.min(this.minSize/r,.9/this._slices);if(this.average){const r=this._slices;let i=1;for(let s=0;s<e;s++){const e=i/(r-s),o=Math.max(e*(1-.6*Math.random()),n);t[s]=o,i-=o}t[e]=i}else{let r=1;const i=Math.sqrt(1/this._slices);for(let s=0;s<e;s++){const e=Math.max(i*r*Math.random(),n);t[s]=e,r-=e}t[e]=r}this.shuffle()}shuffle(){const t=this._sizes,e=this._slices-1;for(let r=e;r>0;r--){const e=Math.random()*r|0,n=t[r];t[r]=t[e],t[e]=n}}_randomizeOffsets(){for(let t=0;t<this._slices;t++)this._offsets[t]=Math.random()*(Math.random()<.5?-1:1)}refresh(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()}redraw(){const t=this.sampleSize,e=this.texture,r=this._canvas.getContext("2d");r.clearRect(0,0,8,t);let n,i=0;for(let s=0;s<this._slices;s++){n=Math.floor(256*this._offsets[s]);const e=this._sizes[s]*t,o=n>0?n:0,a=n<0?-n:0;r.fillStyle=`rgba(${o}, ${a}, 0, 1)`,r.fillRect(0,i|0,t,e+1|0),i+=e}e.baseTexture.update(),this.uniforms.displacementMap=e}set sizes(t){const e=Math.min(this._slices,t.length);for(let r=0;r<e;r++)this._sizes[r]=t[r]}get sizes(){return this._sizes}set offsets(t){const e=Math.min(this._slices,t.length);for(let r=0;r<e;r++)this._offsets[r]=t[r]}get offsets(){return this._offsets}get slices(){return this._slices}set slices(t){this._slices!==t&&(this._slices=t,this.uniforms.slices=t,this._sizes=this.uniforms.slicesWidth=new Float32Array(t),this._offsets=this.uniforms.slicesOffset=new Float32Array(t),this.refresh())}get direction(){return this._direction}set direction(t){if(this._direction===t)return;this._direction=t;const e=t*n.Td;this.uniforms.sinDir=Math.sin(e),this.uniforms.cosDir=Math.cos(e)}get red(){return this.uniforms.red}set red(t){this.uniforms.red=t}get green(){return this.uniforms.green}set green(t){this.uniforms.green=t}get blue(){return this.uniforms.blue}set blue(t){this.uniforms.blue=t}destroy(){var t;null==(t=this.texture)||t.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null}};let B=F;B.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},B.TRANSPARENT=0,B.ORIGINAL=1,B.LOOP=2,B.CLAMP=3,B.MIRROR=4;
/*!
 * @pixi/filter-glow - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-glow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var N="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",L="varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float outerStrength;\nuniform float innerStrength;\n\nuniform vec4 glowColor;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform bool knockout;\nuniform float alpha;\n\nconst float PI = 3.14159265358979323846264;\n\nconst float DIST = __DIST__;\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);\nconst float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);\n\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\n    float totalAlpha = 0.0;\n\n    vec2 direction;\n    vec2 displaced;\n    vec4 curColor;\n\n    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {\n       direction = vec2(cos(angle), sin(angle)) * px;\n\n       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {\n           displaced = clamp(vTextureCoord + direction * \n                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);\n\n           curColor = texture2D(uSampler, displaced);\n\n           totalAlpha += (DIST - curDistance) * curColor.a;\n       }\n    }\n    \n    curColor = texture2D(uSampler, vTextureCoord);\n\n    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);\n\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    \n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\n\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n\n    if (knockout) {\n      float resultAlpha = (outerGlowAlpha + innerGlowAlpha) * alpha;\n      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else {\n      vec4 outerGlowColor = outerGlowStrength * glowColor.rgba * alpha;\n      gl_FragColor = innerColor + outerGlowColor;\n    }\n}\n";const k=class extends n.dJ{constructor(t){const e=Object.assign({},k.defaults,t),{outerStrength:r,innerStrength:n,color:i,knockout:s,quality:o,alpha:a}=e,l=Math.round(e.distance);super(N,L.replace(/__ANGLE_STEP_SIZE__/gi,`${(1/o/l).toFixed(7)}`).replace(/__DIST__/gi,`${l.toFixed(0)}.0`)),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.uniforms.alpha=1,Object.assign(this,{color:i,outerStrength:r,innerStrength:n,padding:l,knockout:s,alpha:a})}get color(){return n.Wp.rgb2hex(this.uniforms.glowColor)}set color(t){n.Wp.hex2rgb(t,this.uniforms.glowColor)}get outerStrength(){return this.uniforms.outerStrength}set outerStrength(t){this.uniforms.outerStrength=t}get innerStrength(){return this.uniforms.innerStrength}set innerStrength(t){this.uniforms.innerStrength=t}get knockout(){return this.uniforms.knockout}set knockout(t){this.uniforms.knockout=t}get alpha(){return this.uniforms.alpha}set alpha(t){this.uniforms.alpha=t}};let U=k;U.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1,alpha:1};
/*!
 * @pixi/filter-godray - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-godray is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var G="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",j="vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n",z="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\nuniform float alpha;\n\n${perlin}\n\nvoid main(void) {\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n    // apply user alpha\n    mist *= alpha;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;\n\n}\n";const H=class extends n.dJ{constructor(t){super(G,z.replace("${perlin}",j)),this.parallel=!0,this.time=0,this._angle=0,this.uniforms.dimensions=new Float32Array(2);const e=Object.assign(H.defaults,t);this._angleLight=new n.bR,this.angle=e.angle,this.gain=e.gain,this.lacunarity=e.lacunarity,this.alpha=e.alpha,this.parallel=e.parallel,this.center=e.center,this.time=e.time}apply(t,e,r,n){const{width:i,height:s}=e.filterFrame;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=i,this.uniforms.dimensions[1]=s,this.uniforms.aspect=s/i,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,t.applyFilter(this,e,r,n)}get angle(){return this._angle}set angle(t){this._angle=t;const e=t*n.Td;this._angleLight.x=Math.cos(e),this._angleLight.y=Math.sin(e)}get gain(){return this.uniforms.gain}set gain(t){this.uniforms.gain=t}get lacunarity(){return this.uniforms.lacunarity}set lacunarity(t){this.uniforms.lacunarity=t}get alpha(){return this.uniforms.alpha}set alpha(t){this.uniforms.alpha=t}};let W=H;W.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1};n.dJ;n.dJ;n.dJ;
/*!
 * @pixi/filter-old-film - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-old-film is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var X="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",V="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n";const $=class extends n.dJ{constructor(t,e=0){super(X,V),this.seed=0,this.uniforms.dimensions=new Float32Array(2),"number"==typeof t?(this.seed=t,t=void 0):this.seed=e,Object.assign(this,$.defaults,t)}apply(t,e,r,n){var i,s;this.uniforms.dimensions[0]=null==(i=e.filterFrame)?void 0:i.width,this.uniforms.dimensions[1]=null==(s=e.filterFrame)?void 0:s.height,this.uniforms.seed=this.seed,t.applyFilter(this,e,r,n)}set sepia(t){this.uniforms.sepia=t}get sepia(){return this.uniforms.sepia}set noise(t){this.uniforms.noise=t}get noise(){return this.uniforms.noise}set noiseSize(t){this.uniforms.noiseSize=t}get noiseSize(){return this.uniforms.noiseSize}set scratch(t){this.uniforms.scratch=t}get scratch(){return this.uniforms.scratch}set scratchDensity(t){this.uniforms.scratchDensity=t}get scratchDensity(){return this.uniforms.scratchDensity}set scratchWidth(t){this.uniforms.scratchWidth=t}get scratchWidth(){return this.uniforms.scratchWidth}set vignetting(t){this.uniforms.vignetting=t}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(t){this.uniforms.vignettingAlpha=t}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(t){this.uniforms.vignettingBlur=t}get vignettingBlur(){return this.uniforms.vignettingBlur}};let Y=$;Y.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3};
/*!
 * @pixi/filter-outline - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-outline is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var q="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",K="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float alpha;\nuniform vec2 thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterClamp;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main(void) {\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 displaced;\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ${angleStep}) {\n        displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n        displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, curColor.a * alpha);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n";const Z=class extends n.dJ{constructor(t=1,e=0,r=.1,n=1){super(q,K.replace(/\$\{angleStep\}/,Z.getAngleStep(r))),this._thickness=1,this._alpha=1,this.uniforms.thickness=new Float32Array([0,0]),this.uniforms.outlineColor=new Float32Array([0,0,0,1]),this.uniforms.alpha=n,Object.assign(this,{thickness:t,color:e,quality:r,alpha:n})}static getAngleStep(t){const e=Math.max(t*Z.MAX_SAMPLES,Z.MIN_SAMPLES);return(2*Math.PI/e).toFixed(7)}apply(t,e,r,n){this.uniforms.thickness[0]=this._thickness/e._frame.width,this.uniforms.thickness[1]=this._thickness/e._frame.height,this.uniforms.alpha=this._alpha,t.applyFilter(this,e,r,n)}get alpha(){return this._alpha}set alpha(t){this._alpha=t}get color(){return n.Wp.rgb2hex(this.uniforms.outlineColor)}set color(t){n.Wp.hex2rgb(t,this.uniforms.outlineColor)}get thickness(){return this._thickness}set thickness(t){this._thickness=t,this.padding=t}};let J=Z;J.MIN_SAMPLES=1,J.MAX_SAMPLES=100;n.dJ;n.dJ;
/*!
 * @pixi/filter-reflection - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-reflection is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Q="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",tt="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nuniform bool mirror;\nuniform float boundary;\nuniform vec2 amplitude;\nuniform vec2 waveLength;\nuniform vec2 alpha;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    if (coord.y < boundary) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    float k = (coord.y - boundary) / (1. - boundary + 0.0001);\n    float areaY = boundary * dimensions.y / filterArea.y;\n    float v = areaY + areaY - vTextureCoord.y;\n    float y = mirror ? v : vTextureCoord.y;\n\n    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;\n    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;\n    float _alpha = (alpha.y - alpha.x) * k + alpha.x;\n\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;\n    x = clamp(x, filterClamp.x, filterClamp.z);\n\n    vec4 color = texture2D(uSampler, vec2(x, y));\n\n    gl_FragColor = color * _alpha;\n}\n";const et=class extends n.dJ{constructor(t){super(Q,tt),this.time=0,this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,et.defaults,t)}apply(t,e,r,n){var i,s;this.uniforms.dimensions[0]=null==(i=e.filterFrame)?void 0:i.width,this.uniforms.dimensions[1]=null==(s=e.filterFrame)?void 0:s.height,this.uniforms.time=this.time,t.applyFilter(this,e,r,n)}set mirror(t){this.uniforms.mirror=t}get mirror(){return this.uniforms.mirror}set boundary(t){this.uniforms.boundary=t}get boundary(){return this.uniforms.boundary}set amplitude(t){this.uniforms.amplitude[0]=t[0],this.uniforms.amplitude[1]=t[1]}get amplitude(){return this.uniforms.amplitude}set waveLength(t){this.uniforms.waveLength[0]=t[0],this.uniforms.waveLength[1]=t[1]}get waveLength(){return this.uniforms.waveLength}set alpha(t){this.uniforms.alpha[0]=t[0],this.uniforms.alpha[1]=t[1]}get alpha(){return this.uniforms.alpha}};let rt=et;rt.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0};n.dJ;
/*!
 * @pixi/filter-shockwave - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-shockwave is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var nt="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",it="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nuniform vec2 center;\n\nuniform float amplitude;\nuniform float wavelength;\n// uniform float power;\nuniform float brightness;\nuniform float speed;\nuniform float radius;\n\nuniform float time;\n\nconst float PI = 3.14159;\n\nvoid main()\n{\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\n    float maxRadius = radius / filterArea.x;\n    float currentRadius = time * speed / filterArea.x;\n\n    float fade = 1.0;\n\n    if (maxRadius > 0.0) {\n        if (currentRadius > maxRadius) {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\n    }\n\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\n    dir.y *= filterArea.y / filterArea.x;\n    float dist = length(dir);\n\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    vec2 diffUV = normalize(dir);\n\n    float diff = (dist - currentRadius) / halfWavelength;\n\n    float p = 1.0 - pow(abs(diff), 2.0);\n\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\n\n    vec2 offset = diffUV * powDiff / filterArea.xy;\n\n    // Do clamp :\n    vec2 coord = vTextureCoord + offset;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    // No clamp :\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\n\n    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;\n\n    gl_FragColor = color;\n}\n";const st=class extends n.dJ{constructor(t=[0,0],e,r=0){super(nt,it),this.center=t,Object.assign(this,st.defaults,e),this.time=r}apply(t,e,r,n){this.uniforms.time=this.time,t.applyFilter(this,e,r,n)}get center(){return this.uniforms.center}set center(t){this.uniforms.center=t}get amplitude(){return this.uniforms.amplitude}set amplitude(t){this.uniforms.amplitude=t}get wavelength(){return this.uniforms.wavelength}set wavelength(t){this.uniforms.wavelength=t}get brightness(){return this.uniforms.brightness}set brightness(t){this.uniforms.brightness=t}get speed(){return this.uniforms.speed}set speed(t){this.uniforms.speed=t}get radius(){return this.uniforms.radius}set radius(t){this.uniforms.radius=t}};let ot=st;ot.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1};n.dJ;n.dJ;n.dJ;
/*!
 * @pixi/filter-twist - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-twist is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var at="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",lt="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 twist(vec2 coord)\n{\n    coord -= offset;\n\n    float dist = length(coord);\n\n    if (dist < radius)\n    {\n        float ratioDist = (radius - dist) / radius;\n        float angleMod = ratioDist * ratioDist * angle;\n        float s = sin(angleMod);\n        float c = cos(angleMod);\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n    }\n\n    coord += offset;\n\n    return coord;\n}\n\nvoid main(void)\n{\n\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = twist(coord);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord );\n\n}\n";const ht=class extends n.dJ{constructor(t){super(at,lt),Object.assign(this,ht.defaults,t)}get offset(){return this.uniforms.offset}set offset(t){this.uniforms.offset=t}get radius(){return this.uniforms.radius}set radius(t){this.uniforms.radius=t}get angle(){return this.uniforms.angle}set angle(t){this.uniforms.angle=t}};let ut=ht;ut.defaults={radius:200,angle:4,padding:20,offset:new n.bR};
/*!
 * @pixi/filter-zoom-blur - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-zoom-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var ct="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",dt="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = ${maxKernelSize};\n\n// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand(vec2 co, float seed) {\n    const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);\n    return fract(sin(sn) * c + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = rand(vTextureCoord, 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    color /= total;\n    // switch back from pre-multiplied alpha\n    // color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n",ft=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable,gt=(t,e)=>{var r={};for(var n in t)pt.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&ft)for(var n of ft(t))e.indexOf(n)<0&&mt.call(t,n)&&(r[n]=t[n]);return r};const yt=class extends n.dJ{constructor(t){const e=Object.assign(yt.defaults,t),{maxKernelSize:r}=e,n=gt(e,["maxKernelSize"]);super(ct,dt.replace("${maxKernelSize}",r.toFixed(1))),Object.assign(this,n)}get center(){return this.uniforms.uCenter}set center(t){this.uniforms.uCenter=t}get strength(){return this.uniforms.uStrength}set strength(t){this.uniforms.uStrength=t}get innerRadius(){return this.uniforms.uInnerRadius}set innerRadius(t){this.uniforms.uInnerRadius=t}get radius(){return this.uniforms.uRadius}set radius(t){(t<0||t===1/0)&&(t=-1),this.uniforms.uRadius=t}};let vt=yt;vt.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32}},7811:function(t){"use strict";t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7847:function(t){"use strict";t.exports=Math.round},8004:function(t,e,r){"use strict";var n=r(6518),i=r(9039),s=r(8750),o=r(4916),a=!o("intersection",function(t){return 2===t.size&&t.has(1)&&t.has(2)})||i(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))});n({target:"Set",proto:!0,real:!0,forced:a},{intersection:s})},8014:function(t,e,r){"use strict";var n=r(1291),i=Math.min;t.exports=function(t){var e=n(t);return e>0?i(e,9007199254740991):0}},8111:function(t,e,r){"use strict";var n=r(6518),i=r(4576),s=r(679),o=r(8551),a=r(4901),l=r(2787),h=r(2106),u=r(4659),c=r(9039),d=r(9297),f=r(8227),p=r(7657).IteratorPrototype,m=r(3724),g=r(6395),y="constructor",v="Iterator",_=f("toStringTag"),x=TypeError,b=i[v],E=g||!a(b)||b.prototype!==p||!c(function(){b({})}),T=function(){if(s(this,p),l(this)===p)throw new x("Abstract class Iterator not directly constructable")},w=function(t,e){m?h(p,t,{configurable:!0,get:function(){return e},set:function(e){if(o(this),this===p)throw new x("You can't redefine this property");d(this,t)?this[t]=e:u(this,t,e)}}):p[t]=e};d(p,_)||w(_,v),!E&&d(p,y)&&p[y]!==Object||w(y,T),T.prototype=p,n({global:!0,constructor:!0,forced:E},{Iterator:T})},8227:function(t,e,r){"use strict";var n=r(4576),i=r(5745),s=r(9297),o=r(3392),a=r(4495),l=r(7040),h=n.Symbol,u=i("wks"),c=l?h["for"]||h:h&&h.withoutSetter||o;t.exports=function(t){return s(u,t)||(u[t]=a&&s(h,t)?h[t]:c("Symbol."+t)),u[t]}},8237:function(t,e,r){"use strict";var n=r(6518),i=r(2652),s=r(9306),o=r(8551),a=r(1767),l=r(9539),h=r(4549),u=r(8745),c=r(9039),d=TypeError,f=c(function(){[].keys().reduce(function(){},void 0)}),p=!f&&h("reduce",d);n({target:"Iterator",proto:!0,real:!0,forced:f||p},{reduce:function(t){o(this);try{s(t)}catch(c){l(this,"throw",c)}var e=arguments.length<2,r=e?void 0:arguments[1];if(p)return u(p,this,e?[t]:[t,r]);var n=a(this),h=0;if(i(n,function(n){e?(e=!1,r=n):r=t(r,n,h),h++},{IS_RECORD:!0}),e)throw new d("Reduce of empty iterator with no initial value");return r}})},8374:function(t,e,r){"use strict";var n="undefined"!==typeof Symbol&&Symbol,i=r(7724);t.exports=function(){return"function"===typeof n&&("function"===typeof Symbol&&("symbol"===typeof n("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},8469:function(t,e,r){"use strict";var n=r(9504),i=r(507),s=r(4402),o=s.Set,a=s.proto,l=n(a.forEach),h=n(a.keys),u=h(new o).next;t.exports=function(t,e,r){return r?i({iterator:h(t),next:u},e):l(t,e)}},8480:function(t,e,r){"use strict";var n=r(1828),i=r(8727),s=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,s)}},8527:function(t,e,r){"use strict";var n=r(7080),i=r(4402).has,s=r(5170),o=r(3789),a=r(507),l=r(9539);t.exports=function(t){var e=n(this),r=o(t);if(s(e)<r.size)return!1;var h=r.getIterator();return!1!==a(h,function(t){if(!i(e,t))return l(h,"normal",!1)})}},8551:function(t,e,r){"use strict";var n=r(34),i=String,s=TypeError;t.exports=function(t){if(n(t))return t;throw new s(i(t)+" is not an object")}},8622:function(t,e,r){"use strict";var n=r(4576),i=r(4901),s=n.WeakMap;t.exports=i(s)&&/native code/.test(String(s))},8686:function(t,e,r){"use strict";var n=r(3724),i=r(9039);t.exports=n&&i(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8727:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:function(t,e,r){"use strict";var n=r(616),i=Function.prototype,s=i.apply,o=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?o.bind(s):function(){return o.apply(s,arguments)})},8750:function(t,e,r){"use strict";var n=r(7080),i=r(4402),s=r(5170),o=r(3789),a=r(8469),l=r(507),h=i.Set,u=i.add,c=i.has;t.exports=function(t){var e=n(this),r=o(t),i=new h;return s(e)>r.size?l(r.getIterator(),function(t){c(e,t)&&u(i,t)}):a(e,function(t){r.includes(t)&&u(i,t)}),i}},8773:function(t,e){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);e.f=i?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},8981:function(t,e,r){"use strict";var n=r(7750),i=Object;t.exports=function(t){return i(n(t))}},9039:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(e){return!0}}},9234:function(t,e,r){"use strict";var n=r(5302);t.exports=function(t){return n(t)||0===t?t:t<0?-1:1}},9286:function(t,e,r){"use strict";var n=r(4402),i=r(8469),s=n.Set,o=n.add;t.exports=function(t){var e=new s;return i(t,function(t){o(e,t)}),e}},9297:function(t,e,r){"use strict";var n=r(9504),i=r(8981),s=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return s(i(t),e)}},9306:function(t,e,r){"use strict";var n=r(4901),i=r(6823),s=TypeError;t.exports=function(t){if(n(t))return t;throw new s(i(t)+" is not a function")}},9340:function(t){"use strict";t.exports=TypeError},9433:function(t,e,r){"use strict";var n=r(4576),i=Object.defineProperty;t.exports=function(t,e){try{i(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},9462:function(t,e,r){"use strict";var n=r(9565),i=r(2360),s=r(6699),o=r(6279),a=r(8227),l=r(1181),h=r(5966),u=r(7657).IteratorPrototype,c=r(2529),d=r(9539),f=r(1385),p=a("toStringTag"),m="IteratorHelper",g="WrapForValidIterator",y="normal",v="throw",_=l.set,x=function(t){var e=l.getterFor(t?g:m);return o(i(u),{next:function(){var r=e(this);if(t)return r.nextHandler();if(r.done)return c(void 0,!0);try{var n=r.nextHandler();return r.returnHandlerResult?n:c(n,r.done)}catch(i){throw r.done=!0,i}},return:function(){var r=e(this),i=r.iterator;if(r.done=!0,t){var s=h(i,"return");return s?n(s,i):c(void 0,!0)}if(r.inner)try{d(r.inner.iterator,y)}catch(o){return d(i,v,o)}if(r.openIters)try{f(r.openIters,y)}catch(o){return d(i,v,o)}return i&&d(i,y),c(void 0,!0)}})},b=x(!0),E=x(!1);s(E,p,"Iterator Helper"),t.exports=function(t,e,r){var n=function(n,i){i?(i.iterator=n.iterator,i.next=n.next):i=n,i.type=e?g:m,i.returnHandlerResult=!!r,i.nextHandler=t,i.counter=0,i.done=!1,_(this,i)};return n.prototype=e?b:E,n}},9504:function(t,e,r){"use strict";var n=r(616),i=Function.prototype,s=i.call,o=n&&i.bind.bind(s,s);t.exports=n?o:function(t){return function(){return s.apply(t,arguments)}}},9511:function(t,e,r){"use strict";var n=r(9340),i=r(1012),s=r(9810),o=r(28),a=r(3436),l=a||o||s;t.exports=function(){var t,e={assert:function(t){if(!e.has(t))throw new n("Side channel does not contain "+i(t))},delete:function(e){return!!t&&t["delete"](e)},get:function(e){return t&&t.get(e)},has:function(e){return!!t&&t.has(e)},set:function(e,r){t||(t=l()),t.set(e,r)}};return e}},9519:function(t,e,r){"use strict";var n,i,s=r(4576),o=r(2839),a=s.process,l=s.Deno,h=a&&a.versions||l&&l.version,u=h&&h.v8;u&&(n=u.split("."),i=n[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&o&&(n=o.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/),n&&(i=+n[1]))),t.exports=i},9539:function(t,e,r){"use strict";var n=r(9565),i=r(8551),s=r(5966);t.exports=function(t,e,r){var o,a;i(t);try{if(o=s(t,"return"),!o){if("throw"===e)throw r;return r}o=n(o,t)}catch(l){a=!0,o=l}if("throw"===e)throw r;if(a)throw o;return i(o),r}},9565:function(t,e,r){"use strict";var n=r(616),i=Function.prototype.call;t.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},9576:function(t,e,r){"use strict";var n=r(1068);if(n)try{n([],"length")}catch(i){n=null}t.exports=n},9577:function(t,e,r){"use strict";var n=r(9928),i=r(4644),s=r(1108),o=r(1291),a=r(5854),l=i.aTypedArray,h=i.getTypedArrayConstructor,u=i.exportTypedArrayMethod,c=function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}(),d=c&&function(){try{new Int8Array(1)["with"](-.5,1)}catch(t){return!0}}();u("with",{with:function(t,e){var r=l(this),i=o(t),u=s(r)?a(e):+e;return n(r,h(r),i,u)}}["with"],!c||d)},9617:function(t,e,r){"use strict";var n=r(5397),i=r(5610),s=r(6198),o=function(t){return function(e,r,o){var a=n(e),l=s(a);if(0===l)return!t&&-1;var h,u=i(o,l);if(t&&r!==r){while(l>u)if(h=a[u++],h!==h)return!0}else for(;l>u;u++)if((t||u in a)&&a[u]===r)return t||u||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},9810:function(t,e,r){"use strict";var n=r(1012),i=r(9340),s=function(t,e,r){for(var n,i=t;null!=(n=i.next);i=n)if(n.key===e)return i.next=n.next,r||(n.next=t.next,t.next=n),n},o=function(t,e){if(t){var r=s(t,e);return r&&r.value}},a=function(t,e,r){var n=s(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},l=function(t,e){return!!t&&!!s(t,e)},h=function(t,e){if(t)return s(t,e,!0)};t.exports=function(){var t,e={assert:function(t){if(!e.has(t))throw new i("Side channel does not contain "+n(t))},delete:function(e){var r=t&&t.next,n=h(t,e);return n&&r&&r===n&&(t=void 0),!!n},get:function(e){return o(t,e)},has:function(e){return l(t,e)},set:function(e,r){t||(t={next:void 0}),a(t,e,r)}};return e}},9835:function(t){"use strict";t.exports=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return 1!==n.size||4!==n.values().next().value}catch(i){return!1}}},9928:function(t,e,r){"use strict";var n=r(6198),i=r(1291),s=RangeError;t.exports=function(t,e,r,o){var a=n(t),l=i(r),h=l<0?a+l:l;if(h>=a||h<0)throw new s("Incorrect index");for(var u=new e(a),c=0;c<a;c++)u[c]=c===h?o:t[c];return u}}}]);
//# sourceMappingURL=chunk-vendors.2ce0ecbf.js.map